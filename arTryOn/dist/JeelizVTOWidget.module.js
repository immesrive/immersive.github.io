 /**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

 /**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

 /**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

 /**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

 /**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

 /**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

 /**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

/* eslint-disable */
let JEELIZVTO=null;let JEELIZVTOWIDGET=null;var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(na,pa){return Object.prototype.hasOwnProperty.call(na,pa)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(na,pa,ya){if(na==Array.prototype||na==Object.prototype)return na;na[pa]=ya.value;return na};
$jscomp.getGlobal=function(na){na=["object"==typeof globalThis&&globalThis,na,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var pa=0;pa<na.length;++pa){var ya=na[pa];if(ya&&ya.Math==Math)return ya}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;
$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(na,pa){var ya=$jscomp.propertyToPolyfillSymbol[pa];if(null==ya)return na[pa];ya=na[ya];return void 0!==ya?ya:na[pa]};$jscomp.polyfill=function(na,pa,ya,La){pa&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(na,pa,ya,La):$jscomp.polyfillUnisolated(na,pa,ya,La))};
$jscomp.polyfillUnisolated=function(na,pa,ya,La){ya=$jscomp.global;na=na.split(".");for(La=0;La<na.length-1;La++){var ua=na[La];if(!(ua in ya))return;ya=ya[ua]}na=na[na.length-1];La=ya[na];pa=pa(La);pa!=La&&null!=pa&&$jscomp.defineProperty(ya,na,{configurable:!0,writable:!0,value:pa})};
$jscomp.polyfillIsolated=function(na,pa,ya,La){var ua=na.split(".");na=1===ua.length;La=ua[0];La=!na&&La in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Ab=0;Ab<ua.length-1;Ab++){var ma=ua[Ab];if(!(ma in La))return;La=La[ma]}ua=ua[ua.length-1];ya=$jscomp.IS_SYMBOL_NATIVE&&"es6"===ya?La[ua]:null;pa=pa(ya);null!=pa&&(na?$jscomp.defineProperty($jscomp.polyfills,ua,{configurable:!0,writable:!0,value:pa}):pa!==ya&&($jscomp.propertyToPolyfillSymbol[ua]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(ua):
$jscomp.POLYFILL_PREFIX+ua,ua=$jscomp.propertyToPolyfillSymbol[ua],$jscomp.defineProperty(La,ua,{configurable:!0,writable:!0,value:pa})))};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(na,pa){for(var ya=1;ya<arguments.length;ya++){var La=arguments[ya];if(La)for(var ua in La)$jscomp.owns(La,ua)&&(na[ua]=La[ua])}return na};$jscomp.polyfill("Object.assign",function(na){return na||$jscomp.assign},"es6","es3");
$jscomp.arrayIteratorImpl=function(na){var pa=0;return function(){return pa<na.length?{done:!1,value:na[pa++]}:{done:!0}}};$jscomp.arrayIterator=function(na){return{next:$jscomp.arrayIteratorImpl(na)}};$jscomp.makeIterator=function(na){var pa="undefined"!=typeof Symbol&&Symbol.iterator&&na[Symbol.iterator];return pa?pa.call(na):$jscomp.arrayIterator(na)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(na){function pa(){this.batch_=null}function ya(ma){return ma instanceof ua?ma:new ua(function(za,Ma){za(ma)})}if(na&&!$jscomp.FORCE_POLYFILL_PROMISE)return na;pa.prototype.asyncExecute=function(ma){if(null==this.batch_){this.batch_=[];var za=this;this.asyncExecuteFunction(function(){za.executeBatch_()})}this.batch_.push(ma)};var La=$jscomp.global.setTimeout;pa.prototype.asyncExecuteFunction=function(ma){La(ma,0)};pa.prototype.executeBatch_=function(){for(;this.batch_&&
this.batch_.length;){var ma=this.batch_;this.batch_=[];for(var za=0;za<ma.length;++za){var Ma=ma[za];ma[za]=null;try{Ma()}catch(Ua){this.asyncThrow_(Ua)}}}this.batch_=null};pa.prototype.asyncThrow_=function(ma){this.asyncExecuteFunction(function(){throw ma;})};var ua=function(ma){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var za=this.createResolveAndReject_();try{ma(za.resolve,za.reject)}catch(Ma){za.reject(Ma)}};ua.prototype.createResolveAndReject_=function(){function ma(Ua){return function(db){Ma||
(Ma=!0,Ua.call(za,db))}}var za=this,Ma=!1;return{resolve:ma(this.resolveTo_),reject:ma(this.reject_)}};ua.prototype.resolveTo_=function(ma){if(ma===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(ma instanceof ua)this.settleSameAsPromise_(ma);else{a:switch(typeof ma){case "object":var za=null!=ma;break a;case "function":za=!0;break a;default:za=!1}za?this.resolveToNonPromiseObj_(ma):this.fulfill_(ma)}};ua.prototype.resolveToNonPromiseObj_=function(ma){var za=void 0;
try{za=ma.then}catch(Ma){this.reject_(Ma);return}"function"==typeof za?this.settleSameAsThenable_(za,ma):this.fulfill_(ma)};ua.prototype.reject_=function(ma){this.settle_(2,ma)};ua.prototype.fulfill_=function(ma){this.settle_(1,ma)};ua.prototype.settle_=function(ma,za){if(0!=this.state_)throw Error("Cannot settle("+ma+", "+za+"): Promise already settled in state"+this.state_);this.state_=ma;this.result_=za;this.executeOnSettledCallbacks_()};ua.prototype.executeOnSettledCallbacks_=function(){if(null!=
this.onSettledCallbacks_){for(var ma=0;ma<this.onSettledCallbacks_.length;++ma)Ab.asyncExecute(this.onSettledCallbacks_[ma]);this.onSettledCallbacks_=null}};var Ab=new pa;ua.prototype.settleSameAsPromise_=function(ma){var za=this.createResolveAndReject_();ma.callWhenSettled_(za.resolve,za.reject)};ua.prototype.settleSameAsThenable_=function(ma,za){var Ma=this.createResolveAndReject_();try{ma.call(za,Ma.resolve,Ma.reject)}catch(Ua){Ma.reject(Ua)}};ua.prototype.then=function(ma,za){function Ma(kb,tb){return"function"==
typeof kb?function(Tb){try{Ua(kb(Tb))}catch(Kb){db(Kb)}}:tb}var Ua,db,Hb=new ua(function(kb,tb){Ua=kb;db=tb});this.callWhenSettled_(Ma(ma,Ua),Ma(za,db));return Hb};ua.prototype.catch=function(ma){return this.then(void 0,ma)};ua.prototype.callWhenSettled_=function(ma,za){function Ma(){switch(Ua.state_){case 1:ma(Ua.result_);break;case 2:za(Ua.result_);break;default:throw Error("Unexpected state: "+Ua.state_);}}var Ua=this;null==this.onSettledCallbacks_?Ab.asyncExecute(Ma):this.onSettledCallbacks_.push(Ma)};
ua.resolve=ya;ua.reject=function(ma){return new ua(function(za,Ma){Ma(ma)})};ua.race=function(ma){return new ua(function(za,Ma){for(var Ua=$jscomp.makeIterator(ma),db=Ua.next();!db.done;db=Ua.next())ya(db.value).callWhenSettled_(za,Ma)})};ua.all=function(ma){var za=$jscomp.makeIterator(ma),Ma=za.next();return Ma.done?ya([]):new ua(function(Ua,db){function Hb(Tb){return function(Kb){kb[Tb]=Kb;tb--;0==tb&&Ua(kb)}}var kb=[],tb=0;do kb.push(void 0),tb++,ya(Ma.value).callWhenSettled_(Hb(kb.length-1),db),
Ma=za.next();while(!Ma.done)})};return ua},"es6","es3");$jscomp.polyfill("Math.log2",function(na){return na?na:function(pa){return Math.log(pa)/Math.LN2}},"es6","es3");$jscomp.polyfill("Promise.prototype.finally",function(na){return na?na:function(pa){return this.then(function(ya){return Promise.resolve(pa()).then(function(){return ya})},function(ya){return Promise.resolve(pa()).then(function(){throw ya;})})}},"es9","es3");
$jscomp.polyfill("Math.sign",function(na){return na?na:function(pa){pa=Number(pa);return 0===pa||isNaN(pa)?pa:0<pa?1:-1}},"es6","es3");
var JeelizVTOWidget=function(){function na(){Qa.mode=eb.realtime;Qa.isRT=!0;qa.adjust=document.getElementById("JeelizVTOWidgetAdjust");if(qa.adjust){qa.adjustNotice=document.getElementById("JeelizVTOWidgetAdjustNotice");qa.adjustExit=document.getElementById("JeelizVTOWidgetAdjustExit");qa.changeModelContainer=document.getElementById("JeelizVTOWidgetChangeModelContainer");qa.buttonResizeCanvas=document.getElementById("buttonResizeCanvas");var X=qa.adjust;X&&X.addEventListener("click",kb,!1);(X=qa.adjustExit)&&
X.addEventListener("click",tb,!1);[qa.adjust,qa.changeModelContainer,qa.buttonResizeCanvas].forEach(ya)}Lb.enabled&&Oa.do_instantDetection(Lb.interval,Lb.callback);Ub&&(Ub(!0),Ub=null)}function pa(){var X=document.createElement("style");X.setAttribute("type","text/css");X.innerHTML="._jeelizVTOForceHide { display: none!important }._jeelizVTOForceShow { display: revert!important }";var wa=document.getElementsByTagName("head");1<=wa.length?wa[0].appendChild(X):document.body.appendChild(X)}function ya(X){X&&
(X.classList.remove("_jeelizVTOForceHide"),"none"===window.getComputedStyle(X).display&&X.classList.add("_jeelizVTOForceShow"))}function La(X){X&&(X.classList.add("_jeelizVTOForceHide"),X.classList.remove("_jeelizVTOForceShow"))}function ua(X,wa){if(X)for(var Ka in wa)X.style[Ka]=wa[Ka]}function Ab(X){if(X)return X.clientWidth}function ma(X){if(X)return X.clientHeight}function za(X){return new Promise(function(wa,Ka){var Fa=new XMLHttpRequest;Fa.open("GET",X,!0);Fa.onreadystatechange=function(){if(4===
Fa.readyState)if(200===Fa.status||0===Fa.status)try{var gb=JSON.parse(Fa.responseText);wa(gb)}catch(Sa){Ka("INVALID JSON")}else Ka("HTTP ERROR "+Fa.status)};Fa.send()})}function Ma(X){Qa.isRT=!1;db(X||"NO_ERROR_LABEL")}function Ua(){db("INVALID_SKU")}function db(X){sc.error?sc.error(X):console.log("ERROR:",X)}function Hb(){bc=Ab(qa.container);cc=ma(qa.container);console.log("INFO in JeelizVTOWidget.resize: _width ="+bc.toString()+" _height ="+cc.toString()+" oFactor = "+(1).toString());dc=Math.round(1*
bc);ec=Math.round(1*cc);ua(qa.cv,{width:bc.toString()+"px",height:cc.toString()+"px"});qa.cv.width=dc;qa.cv.height=ec;Oa&&(Qa.mode===eb.notLoaded?Oa.set_size(dc,ec,!1):Oa.resize(dc,ec,!1))}function kb(){[qa.adjust,qa.changeModelContainer,qa.buttonResizeCanvas].forEach(La);Qa.mode=eb.adjust;[qa.adjustNotice,qa.adjustExit].forEach(ya);qa.cv.style.cursor="move";Oa.switch_modeInteractor("movePinch");fc("ADJUST_START")}function tb(){[qa.adjustNotice,qa.adjustExit].forEach(La);[qa.adjust,qa.changeModelContainer,
qa.buttonResizeCanvas].forEach(ya);qa.cv.style.cursor="auto";Qa.mode=Qa.realtime;Oa.switch_modeInteractor("idle");fc("ADJUST_END")}function Tb(){if(!qa.trackIframe){var X=gc.appstaticURL+"jeewidget/";qa.trackIframe=document.createElement("iframe");qa.trackIframe.width="10";qa.trackIframe.height="10";qa.trackIframe.src=X+"trackIframe.html";ua(qa.trackIframe,{position:"absolute",zIndex:-1,bottom:"0px",right:"0px"});qa.container.appendChild(qa.trackIframe)}}function Kb(X,wa,Ka){Oa.load_model(wa.mod+
".json",wa.mats,function(){Qa.mode=eb.realtime;Ka&&Ka();ub.toggle_loading(!1);if(qa.trackIframe){var Fa=location.href.split("?").shift().split("://").pop();Fa=Fa.split("/").shift();Fa=Fa.split("www.").pop();try{qa.trackIframe.contentWindow.postMessage({action:"COUNTTRYONSESSION",domain:Fa,sku:X},"*")}catch(gb){}}},X)}function fc(X){(X=Bc[X])&&X()}var Oa=function(){function X(a,c){return a[0]*(1-c)+a[1]*c}function wa(a,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.withCredentials=!1;d.onreadystatechange=
function(){4!==d.readyState||200!==d.status&&0!==d.status||c(d.responseText)};d.send()}function Ka(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=Ka(a[d],c);return a}function Fa(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1}function gb(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";
case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}function Sa(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function Fb(a,c,d){var e=1,l=0;for(d=c+d-1;d>=c;--d)l+=e*Sa(a,d),e*=2;return l}function Ca(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,
d=new Uint8Array(c),e=0;e<c;++e)d[e]=a.charCodeAt(e);return d}function Za(a){return"string"===typeof a?JSON.parse(a):a}function nb(a){return"undefined"===typeof Za(a).nb?ob(a):vb(a)}function vb(a){var c=Za(a);a=c.nb;if(0===a)return new Uint8Array(c.nb);var d=c.n;c=Ca(c);for(var e=new Uint32Array(d),l=0;l<d;++l)e[l]=Fb(c,l*a,a);return e}function ob(a){var c=Za(a);a=c.ne;var d=c.nf,e=c.n;c=Ca(c);for(var l=new Float32Array(e),p=new Float32Array(d),B=a+d+1,q=0;q<e;++q){var v=B*q,t=0===Sa(c,v)?1:-1,y=
Fb(c,v+1,a);v=v+1+a;for(var G=p.length,z=0,x=v;x<v+G;++x)p[z]=Sa(c,x),++z;for(G=v=0;G<d;++G)v+=p[G]*Math.pow(2,-G-1);l[q]=0===v&&0===y?0:t*(1+v)*Math.pow(2,1+y-Math.pow(2,a-1))}return l}function hc(a){var c=null,d=null,e=null,l=0,p=this;this.m=function(B){this.Gn(B.zd);e.Jk({Tf:B.Tf,Qf:B.Qf})};this.Al=function(B){return c[B]};this.Gn=function(B){var q=null;l=B.length;c=B.map(function(v,t){v=Object.assign({},v,{index:t,parent:p,Kd:q,im:t===l-1});return q=0===t?Sc.instance(v):Tc.instance(v)});d=c[0];
e=c[l-1];c.forEach(function(v,t){0!==t&&v.Tm()})};this.wa=function(B){B.h(0);var q=B;c.forEach(function(v){q=v.wa(q,!1)});return q};this.Eh=function(){return d.L()};this.Ze=function(){return e.Dl()};this.Ah=function(){return e.Ah()};this.v=function(){c&&(c.forEach(function(B){B.v()}),e=d=c=null,l=0)};"undefined"!==typeof a&&this.m(a)}function Bb(a,c){a[c]=!0;a.setAttribute(c,"true")}function Mb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Vb(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]}function Wb(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function Xb(a){if(!a)return a;var c=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&
(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&Yb(c,a.deviceId);return c}function Yb(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)}function ic(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a}function jc(a){function c(z){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(x,H){return Math.abs(x-z)-Math.abs(H-z)})}function d(z){var x=Xb(a);
z=z(x);l.push(z);e(z)}function e(z){if(z.video&&z.video.facingMode&&z.video.facingMode.exact){var x=z.video.facingMode.exact;z=Xb(z);delete z.video.facingMode.exact;z.video.facingMode.ideal=x;l.push(z)}}var l=[];if(!a||!a.video)return l;e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=c(a.video.width.ideal).slice(0,3),B=c(a.video.height.ideal).slice(0,3),q={},v=0;for(q.gb=void 0;v<p.length;q={gb:q.gb},++v){q.gb=p[v];var t={},y=0;for(t.fb=void 0;y<B.length;t=
{fb:t.fb},++y)if(t.fb=B[y],q.gb!==a.video.width.ideal||t.fb!==a.video.height.ideal){var G=Math.max(q.gb,t.fb)/Math.min(q.gb,t.fb);G<4/3-.1||G>16/9+.1||d(function(z,x){return function(H){H.video.width.ideal=z.gb;H.video.height.ideal=x.fb;return H}}(q,t))}}}d(function(z){return ic(z)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(z){delete z.video.width.ideal;delete z.video.height.ideal;return z}),d(function(z){delete z.video.width;delete z.video.height;return z}));
a.video.facingMode&&(d(function(z){delete z.video.facingMode;return z}),a.video.width&&a.video.height&&d(function(z){ic(z);delete z.video.facingMode;return z}));l.push({audio:a.audio,video:!0});return l}function Zb(a){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(e){c=window.innerHeight>window.innerWidth}if(c&&a&&a.video){c=a.video.width;var d=a.video.height;c&&d&&c.ideal&&d.ideal&&c.ideal>d.ideal&&(a.video.height=c,a.video.width=d)}}function Ib(a){a.volume=0;Bb(a,"muted");
if(Wb()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;Bb(a,"muted")},5)}}function kc(a){var c=Aa.element,d=Aa.bh;return null===c?Promise.resolve():new Promise(function(e,l){if(c.srcObject&&c.srcObject.getVideoTracks){var p=c.srcObject.getVideoTracks();1!==p.length?l("INVALID_TRACKNUMBER"):(p=
p[0],a?Cc(c,e,l,d):(p.stop(),e()))}else l("BAD_IMPLEMENTATION")})}function Dc(a,c,d,e){function l(B){p||(p=!0,d(B))}var p=!1;navigator.mediaDevices.getUserMedia(e).then(function(B){function q(){setTimeout(function(){if(a.currentTime){var t=a.videoWidth,y=a.videoHeight;if(0===t||0===y)l("VIDEO_NULLSIZE");else{t&&(a.style.width=t.toString()+"px");y&&(a.style.height=y.toString()+"px");var G={Ek:null,og:null,Em:null};try{var z=B.getVideoTracks()[0];z&&(G.Em=z,G.Ek=z.getCapabilities(),G.og=z.getSettings())}catch(x){}Wb()||
Mb()?a.parentNode&&null!==a.parentNode?(p||c(a,B,G),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),Ib(a),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";Ib(a);setTimeout(function(){a.play();p||c(a,B,G)},100)},80)):p||c(a,B,G)}}else l("VIDEO_NOTSTARTED")},700)}function v(){a.removeEventListener("loadeddata",v,!1);var t=a.play();Ib(a);"undefined"===typeof t?q():t.then(function(){q()}).catch(function(){l("VIDEO_PLAYPROMISEREJECTED")})}
"undefined"!==typeof a.srcObject?a.srcObject=B:(a.src=window.URL.createObjectURL(B),a.videoStream=B);Ib(a);a.addEventListener("loadeddata",v,!1)}).catch(function(B){l(B)})}function Cc(a,c,d,e){if(a)if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){if(e&&e.video){if(Mb()){var l=Vb();0!==l[0]&&(12>l[0]||12===l[0]&&2>l[1])&&Zb(e)}e.video.width&&e.video.width.ideal&&(a.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(a.style.height=e.video.height.ideal+"px")}Bb(a,
"autoplay");Bb(a,"playsinline");e&&e.audio?a.volume=0:Bb(a,"muted");Dc(a,c,function(){function p(q){if(0===q.length)d("INVALID_FALLBACKCONSTRAINTS");else{var v=q.shift();Dc(a,c,function(){p(q)},v)}}var B=jc(e);p(B)},e)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}function Uc(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&
d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}function Vc(){function a(){var D=lc.Re;Nb=D*L.width;Ob=D*L.height}function c(){++A;2===A&&(t(),x(),H(),Ea.lj(),d(),S.Rc.forEach(function(D){D()}),S.Rc.splice(0),U.model&&!S.isBusy&&Ea.ji(U.model))}function d(){S.load_model=function(D,O,fa){if(S.isBusy)return!1;S.isBusy=!0;if(U.model)S.set_model(D,function(){S.set_materials(O,function(){S.isBusy=!1;fa&&fa()})},
function(){S.isBusy=!1});else{var ia=L.aa+L.ua+L.Hf+"/",Ha=O.map(function(fb){return ia+fb});U.model={url:L.aa+L.ua+L.Lf+"/"+D,Dc:Ha,Db:!1,Cb:!1};Ea.ji(U.model,function(){S.isBusy=!1;fa&&fa()})}return!0};S.set_offset=function(D){w=D;Ea.$d()};S.set_scale=function(D){M=D;Ea.ae()};S.set_rx=function(D){N=D;Ea.xj()};S.switch_shadow=sa.tg;S.switch_bgBlur=sa.sg;S.set_zoom=sa.gg;S.is_viewer3D=function(){return Y===Q.Ea};S.switch_viewer3D=function(D,O){if(Y===Q.fc||Y===Q.hc||Y===Q.W&&!D||Y===Q.Ea&&D||ka)return!1;
if(Y===Q.ya)return Ia!==Q.Ea||D?Ia===Q.W&&D?(Ia=Q.Ea,sa.sa(W.yb),sa.Ya(1),O&&O(),!0):!1:(Ia=Q.W,sa.sa(W.cb),sa.Ya(0),O&&O(),!0);var fa=0,ia=-1,Ha=0;Y===Q.W?(Y=Q.fc,ia=L.Co):Y===Q.Ea&&(Y=Q.hc,ia=L.Fo);var fb=tc.We();oa=setInterval(function(){var wb=tc.We();fa+=(wb-fb)/ia;1<=fa&&(fa=1,Y===Q.fc?(Y=Q.Ea,sa.sa(W.yb)):(Y=Q.W,sa.sa(W.cb)),O&&O(),clearInterval(oa),oa=null);var xb=Y===Q.hc||Y===Q.W?1-L.Ao(fa):L.zo(fa);sa.Ya(xb);Y!==Q.hc&&Y!==Q.fc||0!==Ha++%2||(sa.sa(W.Kf),W.Kf.Nn(xb));fb=wb},.016);return!0};
S.capture_image=function(D,O,fa,ia){la=D;ka=!0;"undefined"===typeof isAllocate&&(fa=!1);(ia="undefined"===typeof ia?!1:ia)&&sa.Ud(!1);v();Ba=function(){sa.Ii(0);b.flush();var Ha=ab.Ch(fa);O(Ha);ia&&sa.Ud(!0)}};S.capture_detection=function(D,O){la=D;ka=!0;var fa=null===K.zb?K.xb:K.Oc;Ba=function(){var ia=Ec.instance({Fe:R.Mc.clone(),pi:bb.Ih(),oi:bb.Gh(),background:fa.clone(),Ua:ta.hb.Ol().clone(),Gf:Xa});O(ia)}};S.process_offlineRendering=function(D,O,fa,ia,Ha){function fb(){if(2===++wb){V.Ua||(V.Ua=
$b.instance({}));D.Fh()&&(V.Ua.$i(D.Fh()),sa.sa(V.Ua));V.Je.set();e();V.Je=!1;Ea.ln(ia?function(){ab.ob().parentNode.removeChild(S.Ab)}:!1);var xb=ab.Ch(!1);setTimeout(function(){Ha(xb)},1)}}Ea.on();ia&&(S.Jj.drawImage(ab.ob(),0,0),ab.ob().parentNode.insertBefore(S.Ab,ab.ob()),S.Ab.setAttribute("class","jeefitMask"));V.Je=D;var wb=0;S.set_model(O,function(){fb();S.set_materials(fa,function(){setTimeout(fb,1)})})};S.serialize_detection=function(D){return D.Hc()};S.unserialize_detection=function(D,
O,fa){return Ec.Nc(D,O,fa)};S.do_instantDetection=function(D,O){Fc.m(R.Mc);Fc.start(D,O)};S.relieve_DOM=function(D,O){if(n.Rb)return!1;p(O||160);r=!1;u&&clearTimeout(u);u=setTimeout(function(){p(L.za);u=!1;q()},D);return!0};S.switch_slow=function(D,O){if(n.Rb)return!1;"undefined"===typeof O&&(O=L.Qj);u&&(p(L.za),q(),clearTimeout(u),u=!1);D?r=!1:q();p(D?O:L.za);return!0};S.switch_deepSleep=function(D){if(Da===D)return!1;Da=!1;S.switch_sleep(D);Da=D;return!0};S.switch_sleep=function(D,O){function fa(){S.isBusy=
!1;D?(Ia=Y,Y=Q.ya):(Y=Ia,e())}if(n.Rb||Da||S.isBusy)return O?Promise.reject():null;if(D&&Y===Q.ya||!D&&Y!==Q.ya)return O?Promise.resolve(!1):!1;oa&&(clearInterval(oa),oa=null);Y===Q.hc?(Y=Q.W,sa.sa(W.cb),sa.Ya(0)):Y===Q.fc&&(Y=Q.Ea,sa.sa(W.yb),sa.Ya(1));yb.stop();var ia=null;S.isBusy=!0;O?ia=kc(!D).then(fa):fa();return O?ia:!0};S.set_modelStandalone=function(D,O){sa.Vd(!1);uc.instance({url:D.model,Dc:D.materials,Db:!1,Cb:!1,R:function(fa){hb=[0,0,0];lb=1;pb=f=h=0;qb=L.Bc;S.ready&&Ea.be();O&&O();l(fa);
Ea.qg();sa.Vd(!0)}})};S.start_rendering=Ea.qg;S.update_material=function(D,O){bb&&bb.no(D,O)};S.set_model=function(D,O,fa){bb&&bb.replace("http"===D.substring(0,4).toLowerCase()?D:L.aa+L.ua+L.Lf+"/"+D,function(){O&&O(bb.Ik())},fa)};S.set_tweaker=function(D,O){function fa(ia){S.Qg(ia);O&&O()}"string"===typeof D?wa(L.aa+L.ua+L.fo+"/"+D,fa):fa(D)};S.Qg=function(D){D&&(D.preOffset&&(hb=D.preOffset),D.preScale&&(lb=D.preScale),D.rx&&(h=D.rx),D.beginBendZ&&(f=D.beginBendZ),D.bendStrength&&(pb=D.bendStrength),
D.maskBranchStartEnd&&(qb=D.maskBranchStartEnd),S.ready&&Ea.be())};S.set_materials=function(D,O){if(bb){var fa=L.aa+L.ua+L.Hf+"/";D=D.map(function(ia){var Ha=ia;"string"===typeof ia&&(Ha=fa+ia,Ha=Ha.replace(/([^:])\/\//,"$1/"));return Ha});bb.hg(D,O)}}}function e(){Cb.reset();yb.stop();B(0)}function l(D){bb&&(sa.fn(bb),bb.remove());sa.Mj(D);bb=D}function p(D){J=D;yb.update({za:J})}function B(D){ba=-1;ka?ba=la:V.isEnabled?ba=V.ti:r?(v(),ba=Y===Q.W?Cb.T():1):(ba=L.Pc[0],v());va.fa();for(var O=0;O<ba;++O)da.set("s53"),
K.qf.M(),K.xb.h(0),R.Ec.h(1),Z.l(!1,!1),m.wa(K.qf);ka?(Ba(),ka=!1,b.flush(),yb.ag(B)):(sa.animate(D),K.Xf&&ea-W.gi>W.mj&&L.Vb&&Y===Q.W&&(va.fa(),W.gi=ea,W.Id.M(),da.set("s61"),K.Xf.h(0),Z.l(!1,!1),ta.hb.zj(Aa.ka,W.Id,W.Td),va.$()),V.isEnabled||(r&&(Cb.qj(),O=Cb.Bh(1),P=X(L.Oj,O),L.Vb&&Y===Q.W&&(W.mj=X(L.ii,O),W.Td=X(L.wm,O),W.Td=Math.min(W.Td,.5))),ea=D,Y!==Q.ya&&yb.ag(B)))}function q(){ea=tc.We();r=!0}function v(){var D=Aa.element.currentTime-Na;0>D&&(Na=Aa.element.currentTime);1E3*D<L.uo||(Aa.ka.refresh(),
Na+=D,Aa.gd=D,ja=!0,va.fa(),da.set("s0"),R.Yf.M(),R.Ec.sk(0),Z.l(!1,!0),da.set("s51"),K.xb.M(),Aa.ka.h(0),Z.l(!1,!1),null!==K.zb&&(da.set("s52"),K.Oc.o(),K.xb.h(0),K.zb.h(1),Z.l(!1,!1)))}function t(){K.Bj=aa.instance({isPot:!0,isLinear:!0,isFloat:!1,url:L.aa+L.ua+L.vo});var D={isPot:!1,isLinear:!0,isFloat:!1,width:Nb,height:Ob};K.xb=aa.instance(D);K.Oc=aa.instance(D);n.nj.push(K.xb,K.Oc);K.qf=aa.instance({isPot:!0,isFloat:!1,width:m.Eh()});L.Bd&&(ha=aa.instance({isPot:!1,isFloat:!1,isLinear:!0,url:(L.Ff||
-1!==L.Ef.indexOf("//")?"":L.aa+L.ua)+L.Ef}))}function y(){function D(){return{width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0])}}var O={width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0])};R.Ec=Gc.instance(D());R.Yf=aa.instance(D());R.Mc=aa.instance(D());R.Hd=Gc.instance(D());R.Le=aa.instance(O);O={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0])};R.Gg=aa.instance(O);R.de=aa.instance(O);W.Id=aa.instance({width:1,
height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0])})}function G(D){K.Xf=D;if(ja){ja=!1;da.set("s59");R.Gg.M();R.de.h(2);var O=X(L.uk,Cb.Bh(.5));da.G("u63",O);R.Yf.h(1);da.G("u64",1E3*Aa.gd);Z.l(!1,!1);da.set("s60");R.de.o();R.Gg.h(0);Z.l(!1,!1)}D.h(0);R.Ec.Wi(1);b.viewport(0,0,1,1);da.set("s54");da.mg("u43",Hc.get(0));Z.l(!1,!1);da.set("s55");b.viewport(1,0,2,1);Z.l(!1,!1);R.Le.M();da.set("s56");da.N("u54",L.re[0]*P,L.re[1]);R.Ec.h(0);R.Hd.h(1);Z.l(!1,!1);da.set("s57");R.Hd.Wi(1);R.Le.h(0);
R.de.h(2);R.Ec.h(3);Z.l(!1,!1);da.set("s58");R.Hd.h(0);R.Mc.o();Z.l(!1,!1)}function z(){var D=L.aa,O=L.ke.split("://").shift();if("http"===O||"https"===O)D="";D+=L.ke;"json"!==D.split(".").pop()&&(D+=L.neuralNetworkPath);wa(D,function(fa){fa=JSON.parse(fa);if(fa.exportData){var ia=fa.exportData;E.Wa=E.Wa||ia.rotationEulerAnglesFactors;E.uc=E.uc||ia.deformScaleXFactor;E.qa=E.qa||ia.translationScalingFactors;E.ph=ia.dyOffset||0;E.nh=ia.dsOffset||0;E.Yh=ia.isLThetaSplitCosSin||!1}m=new hc({zd:fa.layers,
Tf:"gpuRawAvg",Qf:G});c()})}function x(){a();C.kb[0]=1;C.kb[1]=Nb/Ob;Hc.m({Gd:L.scanOverlapFactors,si:L.scanNScaleLevels,ta:Nb,jf:Ob,Oi:L.scanScale0Factor,qa:E.qa,bg:!0});ra=L.width>L.height?[L.width/L.height,1]:[1,L.height/L.width];n.Ha=!0}function H(){da.j("s53",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u37",value:1},{type:"2f",name:"u38",value:C.kb},{type:"1f",name:"u39",value:E.uc},{type:"1f",name:"u41",value:E.ph},{type:"1f",name:"u40",value:E.nh}]);da.j("s54",[{type:"1i",name:"u42",value:0},
{type:"1i",name:"u37",value:1},{type:"1f",name:"u47",value:L.co},{type:"1f",name:"u48",value:L.Rk},{type:"3f",name:"u44",value:[E.qa[0]*C.kb[0],E.qa[1]*C.kb[1],E.qa[2]]},{type:"3f",name:"u45",value:[L.ic[0][0],L.ic[1][0],L.ic[2][0]]},{type:"3f",name:"u46",value:[L.ic[0][1],L.ic[1][1],L.ic[2][1]]}]);da.j("s55",[{type:"1i",name:"u42",value:0},{type:"1i",name:"u37",value:1},{type:"2f",name:"u51",value:L.Wm},{type:"3f",name:"u49",value:E.Wa},{type:"3f",name:"u50",value:L.pj},{type:"1f",name:"u52",value:L.nl}]);
da.j("s56",[{type:"1i",name:"u37",value:0},{type:"1i",name:"u53",value:1},{type:"2f",name:"u54",value:L.re},{type:"1f",name:"u55",value:L.mn},{type:"1f",name:"u56",value:L.Vm}]);da.j("s57",[{type:"1i",name:"u53",value:1},{type:"1i",name:"u57",value:0},{type:"1i",name:"u58",value:2},{type:"1i",name:"u59",value:3},{type:"2f",name:"u38",value:C.kb},{type:"1f",name:"u61",value:m.Eh()},{type:"2f",name:"u60",value:L.jn}]);da.j("s58",[{type:"1i",name:"u37",value:0},{type:"1f",name:"u62",value:L.pn}]);da.j("s59",
[{type:"1i",name:"u42",value:0},{type:"1i",name:"u37",value:1},{type:"1i",name:"u58",value:2},{type:"3f",name:"u49",value:E.Wa},{type:"3f",name:"u50",value:L.pj}]);da.j("s60",[{type:"1i",name:"u58",value:0},{type:"2f",name:"u66",value:L.eo},{type:"2f",name:"u67",value:L.nn}]);da.j("s61",[{type:"1i",name:"u42",value:0}]);da.j("s52",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u68",value:1}])}var h,f,C={kb:[-1,-1]},I=null,k=[.5,0,0,.5],n={bb:null,Rb:!1,Ha:!1,nj:[]},g=[0,L.Jd[1],L.Jd[2]],E={Wa:[-L.Wa[0],
-L.Wa[1],L.Wa[2]],uc:L.uc,qa:L.qa,ph:0,nh:0,Yh:!1},J=L.za,u=null,m=null;a();var w=[0,0,0],M=1,N=0,K={xb:null,Oc:null,qf:null,Bj:null,Xf:null,zb:null},R={Yf:null,Mc:null,Hd:null,Le:null,Gg:null,de:null},ea=0,ja=!1,W={cb:null,yb:null,Kf:null,gi:0,mj:L.ii[1],Td:.1,Id:null},A=0,T=!1,r=!0,P=1,ba=-1,Q={ya:-1,W:0,Ea:1,fc:2,hc:3},Y=Q.W,oa=null,Ia=Q.W,Da=!1,ka=!1,la=1,Ba=!1,V={isEnabled:!1,Je:null,Ua:null,ti:0},ha=null,ra=-1,Ga=!1,Ja=!1,rb=!1,Wa=[0,0,0],Ta=1,Va,ib,mc,hb=[0,0,0],lb=1,pb=f=h=0,qb=L.Bc,Gb=[0,
0,0],Xa={scale:1,offsetX:0,offsetY:0},Na=0,Ea={m:function(){da.qe([{id:"s51",name:"_",s:"attribute vec2 a0;uniform mat2 u36;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u36*a0;}",I:["a0"],P:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u36"],precision:"lowp"},{id:"s53",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",s:"attribute vec2 a0;uniform sampler2D u37;uniform vec2 u38;uniform float u39,u40,u41;const vec2 h=vec2(.16,.5),i=vec2(.5,.5),j=vec2(.84,.5),q=vec2(.5,.5);varying vec2 vv0;void main(){vec4 b=texture2D(u37,h);vec2 c=b.gb,a=b.a*u38;vec4 l=texture2D(u37,i);float m=l.y;vec2 n=vec2(mix(1.,1./cos(m),u39),1.);a*=n,a*=1.+u40;vec2 o=a0*.5;float d=texture2D(u37,j).r,e=cos(d),f=sin(d);mat2 g=mat2(e,f,-f,e);vec2 p=g*o;c+=vec2(-.5,-.5)*a*(g*vec2(0.,u41)),vv0=c+p*a,gl_Position=vec4(a0,0.,1.);}",
I:["a0"],P:[2],i:"u1 u37 u38 u39 u40 u41".split(" "),precision:"lowp"},{id:"s54",name:"_",s:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u42,u37;uniform vec3 u43,u44,u45,u46;uniform float u47,u48;const vec4 e=vec4(.25,.25,.25,.25);const vec2 f=vec2(.16,.5),g=vec2(.5,.5),h=vec2(.83,.5);const vec3 i=vec3(1.,1.,1.);void main(){vec4 j=texture2D(u42,vec2(.625,.625)),k=texture2D(u42,vec2(.875,.625));float l=dot(j-k,e);bool m=l>u48;vec4 a=texture2D(u37,f);m?a.r=2.:a.r>u47?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u43);else{float n=dot(e,texture2D(u42,vec2(.875,.875))),o=dot(e,texture2D(u42,vec2(.125,.625))),p=dot(e,texture2D(u42,vec2(.375,.625))),b=texture2D(u37,h).r,c=cos(b),d=sin(b);vec2 q=mat2(c,d,-d,c)*vec2(n,o);float r=texture2D(u37,g).a;vec3 s=mix(u45,u46,r*i);a.r*=step(1.9,a.r),a.gba+=vec3(q,p)*u44*s*a.a;}gl_FragColor=a;}",
i:"u42 u37 u43 u47 u44 u48 u45 u46".split(" ")},{id:"s55",name:"_",g:"uniform sampler2D u42,u37;uniform vec3 u49,u50;uniform vec2 u51;uniform float u52;const vec4 v=vec4(1.,1.,1.,1.),f=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);const vec2 g=vec2(.16,.5),h=vec2(.5,.5),i=vec2(.84,.5);varying vec2 vv0;void main(){float k=step(vv0.x,.5);vec4 l=texture2D(u37,g);if(l.r<1.9){gl_FragColor=f;return;}float m=dot(texture2D(u42,vec2(.125,.125)),e),a=smoothstep(u51.x,u51.y,m);vec4 n=texture2D(u37,h);float o=n.a;a=mix(a,o,.3);float p=dot(e,texture2D(u42,vec2(.125,.875))),q=dot(e,texture2D(u42,vec2(.375,.875))),r=dot(e,texture2D(u42,vec2(.625,.875)));vec3 s=vec3(p,q,r),b=u50+s*u49;float c=texture2D(u37,i).r,d=b.z*u52;c+=d,b.z-=d;vec4 t=vec4(b,a),u=vec4(c,0.,0.,0.);gl_FragColor=mix(u,t,k);}",
i:"u42 u37 u51 u49 u50 u52".split(" ")},{id:"s56",name:"_",g:"uniform sampler2D u37,u53;uniform vec2 u54;uniform float u55,u56;const vec4 f=vec4(1.,1.,1.,1.),h=vec4(1.,0.,0.,0.),i=vec4(0.,0.,0.,1.);const vec2 g=vec2(.5,.5);varying vec2 vv0;void main(){vec4 c=texture2D(u37,vv0),d=texture2D(u53,vv0),o=texture2D(u37,g),j=texture2D(u53,g);float k=pow(j.a,u56),l=mix(u54.x,u54.y,1.-k),a=step(.34,vv0.x)*step(vv0.x,.66);vec4 m=mix(h,i,a),b=max(l*f,m);b*=mix(f,u55*vec4(1.,1.,1.,0.)+vec4(0.,0.,0.,1.),a);vec4 n=c-d;gl_FragColor=n*b;}",
i:["u37","u53","u54","u55","u56"],precision:"highp"},{id:"s57",name:"_",g:"uniform sampler2D u53,u57,u58,u59;uniform vec2 u38,u60;uniform float u61;const vec4 u=vec4(1.,1.,1.,1.);const vec2 g=vec2(.25,.5),h=vec2(.75,.5),f=vec2(.16,.5),i=vec2(.5,.5);varying vec2 vv0;void main(){float j=step(.33,vv0.x)*step(vv0.x,.66),v=step(.66,vv0.x);vec4 k=texture2D(u59,i);float a=k.a;a*=texture2D(u58,g).a,a*=texture2D(u58,h).a;vec4 l=texture2D(u53,vv0),m=texture2D(u57,vv0),b=l+m;b.a=mix(b.a,a,j);vec4 c=texture2D(u53,f),n=texture2D(u59,f);vec2 o=c.gb,p=n.gb;float q=c.a;vec2 d=u61*abs(o-p)/(u38*q);float r=max(d.x,d.y),s=smoothstep(u60.x,u60.y,r);vec4 t=texture2D(u59,vv0);gl_FragColor=mix(b,t,s);}",
i:"u53 u57 u58 u59 u38 u61 u60".split(" "),precision:"highp"},{id:"s58",name:"_",g:"uniform sampler2D u37;uniform float u62;const vec4 g=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u37,vv0);float b=step(vv0.x,.33),c=texture2D(u37,f).g;a.a+=b*a.a*u62*abs(sin(c)),gl_FragColor=a;}",i:["u37","u62"],precision:"highp"},{id:"s59",name:"_",g:"uniform sampler2D u37,u58,u42;uniform vec3 u49,u50;uniform float u63,u64;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(1.,1.,1.);const vec2 h=vec2(.5,.5);const vec3 i=vec3(1.,1.,4.);varying vec2 vv0;void main(){vec4 c=texture2D(u37,h);float d=step(vv0.x,.5),a=1.-d;vec4 j=texture2D(u58,vv0);float t=c.a;vec2 k=mix(vec2(.875,.875),vec2(.125,.875),a),l=mix(vec2(.125,.625),vec2(.375,.875),a),m=mix(vec2(.375,.625),vec2(.625,.875),a);float n=dot(e,texture2D(u42,k)),o=dot(e,texture2D(u42,l)),p=dot(e,texture2D(u42,m));vec3 q=mix(i,u49,a),b=q*vec3(n,o,p),r=c.rgb;b=mix(b,u50+b-r,a)/u64;vec4 s=mix(vec4(b,0.),j,vec4(u63*g,0.));gl_FragColor=s;}",
i:"u37 u58 u42 u63 u64 u49 u50".split(" "),precision:"highp"},{id:"s60",name:"_",g:"uniform sampler2D u58;uniform vec2 u66,u67;const vec4 h=vec4(.25,.25,.25,.25);varying vec2 vv0;void main(){float a=step(.5,vv0.x),c=mix(u66.x,u67.x,a),d=mix(u66.y,u67.y,a);vec3 b=texture2D(u58,vv0).rgb;float f=length(b),g=1.-smoothstep(c,d,f);gl_FragColor=vec4(b,g);}",i:["u58","u66","u67"],precision:"highp"},{id:"s61",name:"_",s:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:E.Yh?"uniform sampler2D u42;const vec4 e=vec4(.25,.25,.25,.25);const float f=3.1415,g=1e-7;void main(){float b=dot(texture2D(u42,vec2(.875,.375)),e),c=dot(texture2D(u42,vec2(.375,.125)),e),d=f/2.*dot(texture2D(u42,vec2(.625,.375)),e),a=dot(texture2D(u42,vec2(.125,.375)),e),h=dot(texture2D(u42,vec2(.375,.375)),e);a+=(step(0.,a)-.5)*g;float i=atan(h,a);gl_FragColor=vec4(i,b,c,d);}":
"uniform sampler2D u42;const vec4 e=vec4(.25,.25,.25,.25);const float f=3.1415;void main(){float a=dot(texture2D(u42,vec2(.375,.375)),e),b=dot(texture2D(u42,vec2(.625,.375)),e),c=f/2.*dot(texture2D(u42,vec2(.875,.375)),e),d=.75*f*dot(texture2D(u42,vec2(.125,.375)),e);gl_FragColor=vec4(d,a,b,c);}",i:["u42"]},{id:"s52",name:"_",g:"uniform sampler2D u1,u68;varying vec2 vv0;vec4 i(vec4 a,sampler2D g){mediump float b=a.b*63.;mediump vec2 c;c.y=floor(floor(b)/8.),c.x=floor(b)-c.y*8.;mediump vec2 d;d.y=floor(ceil(b)/8.),d.x=ceil(b)-d.y*8.;highp vec2 e;e.x=c.x*.125+9.765625e-4+.123047*a.r,e.y=c.y*.125+9.765625e-4+.123047*a.g;highp vec2 f;f.x=d.x*.125+9.765625e-4+.123047*a.r,f.y=d.y*.125+9.765625e-4+.123047*a.g;lowp vec4 j=texture2D(g,e),k=texture2D(g,f),l=mix(j,k,fract(b));return l;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=i(a,u68);}",
i:["u1","u68"]}]);y();z();yb.m({Xh:!1,za:J});Cb.m({Nf:0,n:L.Pc[1]-L.Pc[0]+1,hi:L.Pc[0]});S.set_videoRotation=function(D){Ya.rotate=D;S.ready&&(cb.ng(Aa.element.videoWidth,Aa.element.videoHeight),cb.ug())};S.set_viewRotation=function(){};S.set_LUT=function(D){return new Promise(function(O){D?aa.instance({url:D,isFloat:!1,isFlipY:!1,R:function(fa){K.zb=fa;Ea.Lc();O()}}):(K.zb=null,Ea.Lc(),O())})};S.resize=function(D,O,fa){function ia(){yb.stop();n.bb&&(clearTimeout(n.bb),n.bb=null);if(!n.Rb)if(L.width===
Ha&&L.height===fb)e();else if(Y!==Q.W&&Y!==Q.Ea)n.bb=setTimeout(ia,L.Mi);else{var wb="undefined"===typeof sb?!1:sb.get_mode(),xb=Y;Y=Q.ya;ka=n.Rb=!0;Ba=function(){ka=!1;n.Rb=!1;q();p(L.za);u&&clearTimeout(u);u=!1;Y=xb};L.width=Ha;L.height=fb;x();H();n.nj.forEach(function(Wc){Wc.resize(Ha,fb)});ca.resize(Nb,Ob);Ea.Lc();cb.ng(Aa.element.videoWidth?Aa.element.videoWidth:Aa.element.width,Aa.element.videoHeight?Aa.element.videoHeight:Aa.element.height);cb.ug();cb.lj();e();Y===Q.Ea&&(Y=Q.W,S.switch_viewer3D(!0,
!1));wb&&sb.switch_mode(wb)}}if(S.ready){n.bb&&(clearTimeout(n.bb),n.bb=null);yb.stop();fa=fa?lc.Re:1;var Ha=D*fa,fb=O*fa;n.bb=setTimeout(ia,L.Mi)}}},v:function(){yb.v();return new Promise(function(D){S.switch_sleep(!0,!0).finally(function(){m&&m.v();ca.v();ab.v();b&&(b=null);m=null;L.Ff=!1;bb=null;r=!0;P=1;ba=-1;Y=Q.W;oa=null;Ia=Q.W;Object.assign(Aa,Ic);Object.assign(L,Jc);D()}).catch(function(O){throw Error(O);})})},Lc:function(){sa.Ui(R.Mc,null===K.zb?K.xb:K.Oc,W.Id,K.Bj)},Cl:function(){return Xa},
aj:function(D){Xa=D},$d:function(){Gb[0]=w[0]-Xa.offsetX;Gb[1]=w[1]+Xa.offsetY;Gb[2]=w[2];sa.vn(g,hb,Gb)},ae:function(){sa.wn(M*L.Rm,lb,Xa.scale)},xj:function(){sa.xn(N+h)},ko:function(){sa.tn(L.Wc+f,L.Fb+pb)},mo:function(){sa.un(qb)},be:function(){Ea.$d();Ea.ae();Ea.xj();Ea.ko();Ea.mo()},on:function(){yb.stop();oa&&(clearInterval(oa),oa=null);V.isEnabled=!0;V.ti=0;Ga=sa.Bl();Ja=bb.Ih();rb=bb.Gh();Ta=lb;Wa=hb;Va=qb;ib=f;mc=pb;ka=!1;sa.Ud(!1)},ln:function(D){function O(){2===++fa&&(V.isEnabled=!1,
lb=Ta,hb=Wa,qb=Va,f=ib,pb=mc,Ea.be(),sa.sa(Ga),e(),D&&D())}var fa=0;Y===Q.fc?Y=Q.Ea:Y===Q.hc&&(Y=Q.W);sa.Ya(Y===Q.W?0:1);bb.replace(Ja,O);bb.hg(rb,O);Ea.Lc();sa.Ud(!0)},lj:function(){var D=Math.tan(Aa.Lb/2);sa.Ti({Te:L.Te/D,qn:D,Um:Aa.Di,Ca:L.Ca,Mf:L.Mf,Ej:C.kb,Ij:L.yo,wc:L.wc,hf:L.hf,ff:L.ff,gf:L.gf,Bc:qb,se:L.se,Ee:L.Ee,$f:L.$f,cc:L.cc,Tn:L.gj,Un:L.hj,Sd:L.Sd,dc:L.dc,ad:L.ad,Ie:L.Ie,He:L.He,Ge:L.Ge,ve:L.ve,ue:L.aa+L.ua+L.ue,Wc:L.Wc+f,Fb:L.Fb+pb,df:L.df,Lg:L.Lg,Kg:L.Kg,ge:L.ge,Eo:L.Do,fe:Aa.fe,Bd:L.Bd,
ym:ha,Ad:L.Ad,Cd:L.Cd,Df:L.Df,xm:ra,vg:L.vg})},Fk:function(){var D=Ya.je,O=Ya.ie,fa=1/Math.tan(Aa.Lb/2),ia=ab.Y()/ab.L();Aa.Di=[fa,0,0,0,0,fa/ia,0,0,0,0,-(O+D)/(O-D),-1,0,0,-2*D*O/(O-D),0];Aa.fe=1/Math.tan(L.Bo*Math.PI/360)/fa},ng:function(D,O){I=[.5,.5];D=O/D;O=ab.Y()/ab.L();90===Math.abs(Ya.rotate)&&(D=1/D);D>O?I[1]*=O/D:I[0]*=D/O;k[0]=0;k[1]=0;k[2]=0;k[3]=0;switch(Ya.rotate){case 0:k[0]=I[0];k[3]=I[1];break;case 180:k[0]=-I[0];k[3]=-I[1];break;case 90:k[1]=I[0];k[2]=-I[1];break;case -90:k[1]=-I[0],
k[2]=I[1]}Aa.Lb=2*Math.atan(2*I[0]*Math.tan((1<D?Ya.FOVmobile:Ya.FOVdesktop)*Math.PI/180/2));Ea.Fk()},ug:function(){da.j("s51",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u36",value:k}])},mf:function(D,O){Ea.Yl(D,O);Ea.m();if(!Ea.Vl())return S.jb&&S.jb("GL_INCOMPATIBLE","Cannot init JEELIZVTO"),!1;Ea.Qh();return!0},Yl:function(D,O){S.Bb=document.createElement("canvas");S.Ab=document.createElement("canvas");S.Ab.width=L.width;S.Ab.height=L.height;S.Jj=S.Ab.getContext("2d");S.replace_video=function(fa){Aa.element=
fa;Aa.Bg.ia=Aa.element;return!0};S.nc=S.Bb.getContext("2d");S.capture_background=function(fa,ia){fa="undefined"===typeof fa?D:fa;ia="undefined"===typeof ia?O:ia;S.Bb.width=fa;S.Bb.height=ia;var Ha=fa/ia,fb=0,wb=0;if(D/O>Ha){var xb=O*Ha;Ha=O;fb=Math.round((D-xb)/2)}else xb=D,Ha=D/Ha,wb=Math.round((O-Ha)/2);S.nc.save();S.nc.translate(fa,0);S.nc.scale(-1,1);S.nc.drawImage(Aa.element,fb,wb,xb,Ha,0,0,fa,ia);S.nc.restore();fa=document.createElement("canvas");fa.width=S.Bb.width;fa.height=S.Bb.height;fa.getContext("2d").drawImage(S.Bb,
0,0);return fa}},Qh:function(){window.CanvasListeners&&(sb.init({pa:ab.ob()}),S.init_listeners=Ea.Qh,S.add_listener=sb.add_listener,S.remove_listener=sb.remove_listener,S.animate_swipe=sb.animate_swipe,S.switch_modeInteractor=sb.switch_mode,S.get_modeInteractor=sb.get_mode,sb.add_listener("move",function(D,O){Y===Q.W&&(L.zm&&(Xa.offsetX-=O[0]*L.li,Xa.offsetX=Math.min(Math.max(Xa.offsetX,-L.Dd),L.Dd)),Xa.offsetY-=O[1]*L.li,Xa.offsetY=Math.min(Math.max(Xa.offsetY,-L.Dd),L.Dd),Ea.$d())},!0).add_listener("pinch",
function(D,O){Y===Q.W&&(Xa.scale+=O*L.Am,Xa.scale=Math.min(Math.max(Xa.scale,L.mi[0]),L.mi[1]),Ea.ae())},!0))},Vl:function(){return ca.m({wd:!1,Dk:!1,expand:!1,pa:ab.ob(),Mb:ab,onload:function(){W.yb=$b.instance({Eb:L.aa+L.ua+$a.wo,pc:L.aa+L.ua+$a.xo,oc:$a.Cj,qc:$a.Dj});L.Vb?(W.cb=$b.instance({}),ta.hb.sa(W.cb)):W.cb=W.yb;sa.sa(W.cb);W.Kf=L.Vb?Xc.instance({vm:W.cb,tm:W.yb}):W.yb;c()}})},qg:function(){T||(Ea.Lc(),L.Vb&&(va.reset(),ta.hb.wk(Aa.ka),ta.hb.vk()),S.ready=!0,ea=0,e(),A=0,T=!0,ca.Fg(lc.ml),
Ea.be(),sa.Zn(),S.Sc.forEach(function(D){D()}),S.Sc.splice(0))},ji:function(D,O){D=uc.instance({R:function(){Ea.qg();O&&O()},url:D.url,Dc:D.Dc,Db:D.Db,Cb:D.Cb});l(D)},bo:function(){if(L.Vb){var D=Object.assign({},$a,{Xb:L.aa+L.ua+$a.Xb});ta.hb.ig(D)}}};return Ea}function Pb(a){return 3===arguments.length?this.lb(arguments):this.set(a)}function Kc(a,c){c=Math.floor(c);a.r=(c>>16&255)/255;a.X=(c>>8&255)/255;a.b=(c&255)/255}function Yc(a,c){function d(q){void 0!==q&&1>parseFloat(q)&&console.warn("JETHREE.Color: Alpha component of "+
c+" will be ignored.")}var e;if(e=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(c)){var l=e[2];switch(e[1]){case "rgb":case "rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){a.r=Math.min(255,parseInt(e[1],10))/255;a.X=Math.min(255,parseInt(e[2],10))/255;a.b=Math.min(255,parseInt(e[3],10))/255;d(e[5]);return}if(e=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){a.r=Math.min(100,parseInt(e[1],10))/100;a.X=Math.min(100,parseInt(e[2],10))/100;a.b=
Math.min(100,parseInt(e[3],10))/100;d(e[5]);return}break;case "hsl":case "hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(l)){l=parseFloat(e[1])/360;var p=parseInt(e[2],10)/100,B=parseInt(e[3],10)/100;d(e[5]);a.sn(l,p,B);return}}}else if(e=/^#([A-Fa-f0-9]+)$/.exec(c)){e=e[1];l=e.length;if(3===l){a.r=parseInt(e.charAt(0)+e.charAt(0),16)/255;a.X=parseInt(e.charAt(1)+e.charAt(1),16)/255;a.b=parseInt(e.charAt(2)+e.charAt(2),16)/255;return}if(6===l){a.r=parseInt(e.charAt(0)+
e.charAt(1),16)/255;a.X=parseInt(e.charAt(2)+e.charAt(3),16)/255;a.b=parseInt(e.charAt(4)+e.charAt(5),16)/255;return}}c&&0<c.length&&(e=Zc[c],void 0!==e?Kc(a,e):console.warn("JETHREE.Color: Unknown color "+c))}function nc(a,c,d,e){this.B=a||0;this.C=c||0;this.D=d||0;this.O=void 0!==e?e:1}function Lc(a,c,d){var e=c.B,l=c.C,p=c.D;c=c.O;var B=d.B,q=d.C,v=d.D;d=d.O;a.B=e*d+c*B+l*v-p*q;a.C=l*d+c*q+p*B-e*v;a.D=p*d+c*v+e*q-l*B;a.O=c*d-e*B-l*q-p*v;return a}function Qb(a,c){this.x=a||0;this.y=c||0}function Pa(a,
c,d){this.x=a||0;this.y=c||0;this.z=d||0}function Mc(a,c){var d=a.x,e=a.y,l=a.z;a.x=e*c.z-l*c.y;a.y=l*c.x-d*c.z;a.z=d*c.y-e*c.x}function Rb(a,c,d,e){this.B=a||0;this.C=c||0;this.D=d||0;this.Ma=e||Rb.Fj}function vc(a,c){this.min=void 0!==a?a:new Pa(Infinity,Infinity,Infinity);this.max=void 0!==c?c:new Pa(-Infinity,-Infinity,-Infinity)}function oc(a){return(new Pa).Tc(a.min,a.max).Ba(.5)}function $c(a,c){a.min.min(c);a.max.max(c)}function Sb(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,
0,0,0,1]);0<arguments.length&&console.error("JETHREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Nc(a,c,d){var e=c.elements,l=d.elements;d=a.elements;c=e[0];var p=e[4],B=e[8],q=e[12],v=e[1],t=e[5],y=e[9],G=e[13],z=e[2],x=e[6],H=e[10],h=e[14],f=e[3],C=e[7],I=e[11];e=e[15];var k=l[0],n=l[4],g=l[8],E=l[12],J=l[1],u=l[5],m=l[9],w=l[13],M=l[2],N=l[6],K=l[10],R=l[14],ea=l[3],ja=l[7],W=l[11];l=l[15];d[0]=c*k+p*J+B*M+q*ea;d[4]=c*n+p*u+B*N+q*ja;d[8]=c*g+p*m+B*K+q*W;d[12]=
c*E+p*w+B*R+q*l;d[1]=v*k+t*J+y*M+G*ea;d[5]=v*n+t*u+y*N+G*ja;d[9]=v*g+t*m+y*K+G*W;d[13]=v*E+t*w+y*R+G*l;d[2]=z*k+x*J+H*M+h*ea;d[6]=z*n+x*u+H*N+h*ja;d[10]=z*g+x*m+H*K+h*W;d[14]=z*E+x*w+H*R+h*l;d[3]=f*k+C*J+I*M+e*ea;d[7]=f*n+C*u+I*N+e*ja;d[11]=f*g+C*m+I*K+e*W;d[15]=f*E+C*w+I*R+e*l;return a}function wc(a,c,d,e,l,p){this.a=a;this.b=c;this.c=d;this.Ka=e instanceof Pa?e:new Pa;this.ee=Array.isArray(e)?e:[];this.color=l instanceof Pb?l:new Pb;this.Ig=Array.isArray(l)?l:[];this.Wb=void 0!==p?p:0}function ad(a,
c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);var l=e.withCredentials=!1;e.onreadystatechange=function(){404!==e.status||l||(l=!0,d&&d(404));if(4===e.readyState&&200===e.status){var p=null;try{p=JSON.parse(e.responseText)}catch(B){d&&d(-1)}c&&p&&c(p)}};e.onerror=function(){d&&d(0)};e.send()}function xc(a,c,d){"object"===typeof a?c(a):ad(a,c,d)}function bd(a,c){for(var d=new Pa,e=new Pa,l=0,p=c.length;l<p;l++){var B=c[l],q=a[B.a],v=a[B.b];d.ab(a[B.c],v);e.ab(q,v);Mc(d,e);0!==d.wf()&&(d.normalize(),
B.Ka.J(d))}}function cd(a,c){for(var d=Array(a.length),e=0,l=a.length;e<l;++e)d[e]=new Pa;e=new Pa;l=new Pa;for(var p=0,B=c.length;p<B;++p){var q=c[p],v=a[q.a],t=a[q.b];e.ab(a[q.c],t);l.ab(v,t);Mc(e,l);d[q.a].add(e);d[q.b].add(e);d[q.c].add(e)}e=0;for(a=a.length;e<a;++e)d[e].normalize();a=0;for(e=c.length;a<e;++a)l=c[a],p=l.ee,3===p.length?(p[0].J(d[l.a]),p[1].J(d[l.b]),p[2].J(d[l.c])):(p[0]=d[l.a].clone(),p[1]=d[l.b].clone(),p[2]=d[l.c].clone());return d}function dd(a,c,d,e){function l(E){n.J(c[E]);
g.J(n);var J=q[E];I.J(J);I.sub(n.Ba(n.cd(J))).normalize();var u=g.x,m=g.y,w=g.z,M=J.x,N=J.y;J=J.z;k.x=m*J-w*N;k.y=w*M-u*J;k.z=u*N-m*M;u=0>k.cd(v[E])?-1:1;B[4*E]=I.x;B[4*E+1]=I.y;B[4*E+2]=I.z;B[4*E+3]=u}for(var p=a.length,B=new Float32Array(4*p),q=Array(p),v=Array(p),t=0;t<p;t++)q[t]=new Pa,v[t]=new Pa;var y=new Pa,G=new Pa,z=new Pa,x=new Qb,H=new Qb,h=new Qb,f=new Pa,C=new Pa;e.forEach(function(E){var J=E.a,u=E.b;E=E.c;y.J(a[J]);G.J(a[u]);z.J(a[E]);x.J(d[J]);H.J(d[u]);h.J(d[E]);var m=G.x-y.x,w=z.x-
y.x,M=G.y-y.y,N=z.y-y.y,K=G.z-y.z,R=z.z-y.z,ea=H.x-x.x,ja=h.x-x.x,W=H.y-x.y,A=h.y-x.y,T=1/(ea*A-ja*W);f.set((A*m-W*w)*T,(A*M-W*N)*T,(A*K-W*R)*T);C.set((ea*w-ja*m)*T,(ea*N-ja*M)*T,(ea*R-ja*K)*T);q[J].add(f);q[u].add(f);q[E].add(f);v[J].add(C);v[u].add(C);v[E].add(C)});var I=new Pa,k=new Pa,n=new Pa,g=new Pa;e.forEach(function(E){l(E.a);l(E.b);l(E.c)});return B}function Oc(a,c,d,e){return Math.sqrt((a-d)*(a-d)+(c-e)*(c-e))}var U={fh:!0,cp:!1,ep:!1,Qk:!1,eh:!1,bp:!1,Ja:!1,Xm:!1,wd:!1,Lp:!1,aa:"",Dm:"",
jk:700,ik:200,gh:!1,qo:!1,ro:!1,po:!1,Rj:3,Ib:!1,Rg:!0,Eb:"images/backgrounds/interior2.jpg",pc:"images/backgrounds/interior_light.jpg",lk:[256,256,512,512],oc:2.1,qc:8,kk:[64,128,256,256],bm:[60,96,160,250],am:[8,12,18,40],Fc:2.2,Uf:1,we:300,Vg:500,xe:50,xk:0,yk:0,So:45,Uo:1,To:1E3,Wg:20,Go:10,Ho:10,Io:5,Qm:.1,xi:20,Ai:100,Bi:100,Pm:-Math.PI/3,Om:Math.PI/3,zi:0,oj:0,gd:[40,32,16,16],Pj:[0,.87,.92,.9],Lm:2,Hm:100,da:!1,Sj:16,Tj:.4,Vj:[.72,.73,.72,.74],ek:1.2,bk:[.5,.5,.5,1],gk:140,fk:280,hk:1.2,Wj:20,
Xj:40,dk:[6,9,9,12],ak:[.03,.02,.02,.018],$j:[.35,.35,.4,.5],Yj:[.2,.2,.2,.2],Uj:[.1,.15,.15,.15],ck:[200,200,150,120],Zj:[1,2,3,5],Vn:1.1,bq:[.25,.5,1,2],cq:256,aq:256,$p:200,Wn:[40,80,200,500],Xn:[35,45,80,120],Kk:!0,Lk:"CCW"},Pc={},da=function(){function a(u,m,w){m=u.createShader(m);u.shaderSource(m,w);u.compileShader(m);return u.getShaderParameter(m,u.COMPILE_STATUS)?m:!1}function c(u,m,w){m=a(u,u.VERTEX_SHADER,m);w=a(u,u.FRAGMENT_SHADER,w);u===b&&q.push(m,w);var M=u.createProgram();u.attachShader(M,
m);u.attachShader(M,w);u.linkProgram(M);return M}function d(u){return["float","sampler2D","int"].map(function(m){return"precision "+u+" "+m+";\n"}).join("")}function e(u,m){m.ba=m.ba?!0:!1;if(!m.ba){m.s=m.s||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}";m.I=m.I||["a0"];m.P=m.P||[2];m.precision=m.precision||z;m.id=y++;void 0!==m.Pi&&(m.Pi.forEach(function(N,K){m.g=m.g.replace(N,m.Da[K])}),m.Pi.splice(0));m.Jg=0;m.P.forEach(function(N){m.Jg+=
4*N});var w=d(m.precision);m.na=c(u,w+m.s,w+m.g);m.A={};m.i.forEach(function(N){m.A[N]=u.getUniformLocation(m.na,N)});m.attributes={};m.va=[];m.I.forEach(function(N){var K=u.getAttribLocation(m.na,N);m.attributes[N]=K;m.va.push(K)});if(m.u){u.useProgram(m.na);t=m;v=m.id;for(var M in m.u)u.uniform1i(m.A[M],m.u[M])}m.Ha=!0}}function l(u){mb.dj(J);v!==u.id&&(J.H(),v=u.id,t=u,b.useProgram(u.na),u.va.forEach(function(m){0!==m&&b.enableVertexAttribArray(m)}))}function p(u,m,w){e(u,m,w);u.useProgram(m.na);
u.enableVertexAttribArray(m.attributes.a0);v=-1;return t=m}function B(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],u:{u1:0}}}var q=[],v=-1,t=null,y=0,G=!1,z="highp",x=["u1"],H=["u0"],h={u1:0},f={u0:0},C={u1:0,u2:1},I={u3:0},k={s0:B(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:x,u:h,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
i:["u1","u2"],u:C},s3:{g:"uniform sampler2D u1;uniform vec2 u4,u5;varying vec2 vv0;void main(){vec2 a=vv0*u4+u5;gl_FragColor=texture2D(u1,a);}",i:["u1","u4","u5"],u:h,ba:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:x,u:h},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],u:C},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",
i:x,u:h},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:x,u:h},s8:{g:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",i:["u0","u4"],u:f},s9:{g:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",i:["u0","u4"],u:f},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
i:x,u:h},s11:{g:"uniform sampler2D u1,u6;uniform float u7;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u6,vv0);gl_FragColor=mix(b,a,u7*f);}",i:["u1","u6","u7"],u:{u1:0,u6:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u8)+texture2D(u1,vv0+u8*vec2(1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,-1.))+texture2D(u1,vv0+u8*vec2(-1.,1.)));}",i:["u1","u8"],u:h},s13:{g:"uniform sampler2D u1;uniform vec4 u9;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u9);gl_FragColor=j(a);}",
i:["u1","u9"],u:h},s14:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:H,u:f,ba:!0},s15:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:H,u:f},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:H,u:f},
s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:H,u:f},s18:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:H,u:f},s19:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",i:H,u:f,ba:!0},s20:{g:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
i:["u0","u10","u11"],u:{u0:0,u10:1},ba:!0},s21:{g:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",i:["u1","u12"],u:h},s22:{g:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u13","u14","u15"],u:{u14:0,u13:1,
u15:2},ba:!0},s23:{g:"uniform float u16,u17;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 c=fract(vv0*u16),a=vv0;float b=u16*u17;a=(.5+floor(b*vv0))/b;vec4 d=texture2D(u13,a),f=texture2D(u14,c);gl_FragColor=d*f;}",i:["u14","u13","u16","u17"],u:{u14:0,u13:1}},s24:{g:"uniform float u16,u17;uniform sampler2D u13,u14,u18,u19,u20,u21;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u16),d=vv0;float h=u16*u17;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u13,d),m=texture2D(u14,c),a=texture2D(u21,d);a=floor(.5+a*255.);vec4 n=texture2D(u18,c),o=texture2D(u19,c),p=texture2D(u20,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:"u13 u14 u16 u17 u21 u18 u19 u20".split(" "),u:{u14:0,u13:1,u21:3,u18:4,u19:5,u20:6},ba:!0},s25:{g:"uniform sampler2D u13,u14,u22;uniform float u16,u23,u24,u17;varying vec2 vv0;const vec2 j=vec2(1.,1.),k=vec2(0.,0.);void main(){vec2 b=floor(u23*vv0),c=u23*vv0-b;float d=u16/u23;vec2 f=floor(c*d),g=c*d-f,h=(b+g)/u23;float l=u23*u17/u16;vec2 m=l*f,a=(m+g*u24)/u17;a+=.25/u17;vec2 i=step(a,j)*step(k,a);vec4 n=texture2D(u13,h),o=texture2D(u14,a),p=n*o,q=texture2D(u22,h);gl_FragColor=(p*u24*u24+q)*i.x*i.y;}",
i:"u13 u14 u16 u23 u24 u17 u22".split(" "),u:{u14:0,u13:1,u22:2}},s26:{g:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",i:["u13","u14"],u:{u14:0,u13:1},ba:!0},s27:{g:"uniform sampler2D u1,u22;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u22,vv0)+u25*texture2D(u1,vv0);}",i:["u1","u22","u25"],u:{u1:0,u22:1}},s28:{g:"uniform sampler2D u1,u22;uniform float u25;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u22,vv0)+u25*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u1","u22","u25"],u:{u1:0,u22:1},ba:!0},s29:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",i:x,u:h,precision:"lowp"},s30:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",
i:["u1","u26"],u:h,precision:"lowp"},s31:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",i:["u1","u26"],u:h,precision:"lowp"},s32:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u27"],u:C,ba:!0},s33:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u27"],u:C,ba:!0},s34:{g:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u8*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*h),d=texture2D(u3,a+u8*i),j=texture2D(u3,a+u8),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u3","u8"],u:I},s35:{g:"uniform sampler2D u3;uniform vec2 u8;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u8*k),d=texture2D(u3,a+u8*l),g=texture2D(u3,a+u8),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u8*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u8*m),d=f(a+u8*2.),g=f(a+u8*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u3","u8"],u:I,ba:!0},
s36:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],u:h,precision:"lowp",ba:!0},s37:{g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u8)+2002./e*texture2D(u1,vv0-2.*u8)+3003./e*texture2D(u1,vv0-u8)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u8)+2002./e*texture2D(u1,vv0+2.*u8)+1001./e*texture2D(u1,vv0+3.*u8);gl_FragColor=a;}",i:["u8","u1"],u:h,precision:"lowp",
ba:!0},s38:{g:"uniform sampler2D u1,u10,u28;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u10,vv0),b=texture2D(u28,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u10","u28"],u:{u1:0,u10:1,u28:2},ba:!0}},n={s39:{g:"uniform float u16,u29;uniform sampler2D u13,u14,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u22,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u29*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u16","u13","u14","u22","u29"],Da:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{g:"uniform float u16,u29,u17;uniform sampler2D u13,u14,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u22,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u17;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u29*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u16 u17 u13 u14 u22 u29".split(" "),Da:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},g=null,E=null,J={Ub:function(){return G},m:function(){if(!G){g=Ka(k,2);E=Ka(n,2);z="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var u in g)e(b,g[u],u);da.set("s0");b.enableVertexAttribArray(0);G=!0}},qe:function(u){u.forEach(function(m){J.oa(m)})},oa:function(u){g[u.id]=u;e(b,u,u.id)},Zl:function(u,
m,w){m||(m=u);g[m]=Object.create(E[u]);g[m].hm=!0;E[u].Da&&E[u].Da.forEach(function(M,N){g[m].g=g[m].g.replace(new RegExp(M,"g"),w[N])});e(b,g[m],m)},set:function(u){var m=g[u];m.ba&&(m.ba=!1,e(b,m,u));l(m)},ub:function(u){return p(u,B(),"s41")},Od:function(u){return p(u,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:z},"s42")},ll:function(u){return"undefined"===typeof g[u]?!1:g[u].Ha},H:function(){-1!==v&&(v=-1,t.va.forEach(function(u){0!==u&&b.disableVertexAttribArray(u)}))},Qd:function(){var u=
0;t.va.forEach(function(m,w){w=t.P[w];b.vertexAttribPointer(m,w,b.FLOAT,!1,t.Jg,u);u+=4*w})},kl:function(){b.enableVertexAttribArray(0)},$b:function(){J.ac(b)},ac:function(u){u.vertexAttribPointer(t.va[0],2,u.FLOAT,!1,8,0)},Pd:function(u,m){b.uniform1i(t.A[u],m)},G:function(u,m){b.uniform1f(t.A[u],m)},N:function(u,m,w){b.uniform2f(t.A[u],m,w)},ej:function(u,m){b.uniform2fv(t.A[u],m)},mg:function(u,m){b.uniform3fv(t.A[u],m)},lg:function(u,m,w,M){b.uniform3f(t.A[u],m,w,M)},Pn:function(u,m,w,M,N){b.uniform4f(t.A[u],
m,w,M,N)},xa:function(u,m){b.uniform4fv(t.A[u],m)},Qn:function(u,m){b.uniformMatrix2fv(t.A[u],!1,m)},Rn:function(u,m){b.uniformMatrix3fv(t.A[u],!1,m)},Jc:function(u,m){b.uniformMatrix4fv(t.A[u],!1,m)},j:function(u,m){J.set(u);m.forEach(function(w){switch(w.type){case "4f":b.uniform4fv(t.A[w.name],w.value);break;case "3f":b.uniform3fv(t.A[w.name],w.value);break;case "2f":b.uniform2fv(t.A[w.name],w.value);break;case "1f":b.uniform1f(t.A[w.name],w.value);break;case "1i":b.uniform1i(t.A[w.name],w.value);
break;case "mat2":b.uniformMatrix2fv(t.A[w.name],!1,w.value);break;case "mat3":b.uniformMatrix3fv(t.A[w.name],!1,w.value);break;case "mat4":b.uniformMatrix4fv(t.A[w.name],!1,w.value)}})},sp:function(){return"lowp"},v:function(){J.H();b.disableVertexAttribArray(0);for(var u in g){var m=g[u];m.Ha&&(m.Ha=!1,b.deleteProgram(m.na));m.hm&&delete g[u]}q.forEach(function(w){b.deleteShader(w)});q.splice(0);y=0;G=!1;t=null;v=-1}};return J}(),b=null,ab=function(){function a(x){console.log("ERROR in ContextFF: ",
x);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(x){function H(){Db.v();xa.reset();f.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var h=document.createElement("canvas");h.setAttribute("width",5);h.setAttribute("height",5);var f=null;try{f=h.getContext("webgl2",x)}catch(C){return!1}if(!f)return!1;e(f);xa.qh(f);x=xa.Ke(f);if(!x.Qa&&!x.Sa)return H(),!1;x=Db.Xg(f,x);H();return x?!0:!1}function e(x){x.clearColor(0,0,0,0);
x.disable(x.DEPTH_TEST);x.disable(x.BLEND);x.disable(x.DITHER);x.disable(x.STENCIL_TEST);x.disable(x.CULL_FACE);x.GENERATE_MIPMAP_HINT&&x.hint(x.GENERATE_MIPMAP_HINT,x.FASTEST);x.disable(x.SAMPLE_ALPHA_TO_COVERAGE);x.disable(x.SAMPLE_COVERAGE);x.depthFunc(x.LEQUAL);x.clearDepth(1)}var l=null,p=null,B=null,q=null,v=!0,t=null,y=null,G=[],z={L:function(){return l.width},Y:function(){return l.height},ob:function(){return l},pl:function(){return b},ja:function(){return v},flush:function(){b.flush()},Ap:function(){va.fa();
aa.reset();Z.reset();da.H();da.kl();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);Z.Zc();da.$b()},ul:function(){t||(t=new Uint8Array(l.width*l.height*4));b.readPixels(0,0,l.width,l.height,b.RGBA,b.UNSIGNED_BYTE,t);return t},np:function(){return l.toDataURL("image/jpeg")},op:function(){va.$();p||(p=document.createElement("canvas"),B=p.getContext("2d"));p.width=l.width;p.height=l.height;for(var x=z.ul(),H=B.createImageData(p.width,p.height),h=p.width,f=p.height,C=H.data,I=0;I<f;++I)for(var k=f-I-1,n=0;n<
h;++n){var g=4*(I*h+n),E=4*(k*h+n);C[g]=x[E];C[g+1]=x[E+1];C[g+2]=x[E+2];C[g+3]=x[E+3]}B.putImageData(H,0,0);return p.toDataURL("image/png")},Ch:function(x){!p&&x&&(p=document.createElement("canvas"),B=p.getContext("2d"));var H=x?p:document.createElement("canvas");H.width=l.width;H.height=l.height;(x?B:H.getContext("2d")).drawImage(l,0,0);return H},m:function(x){x=Object.assign({Ra:null,Pf:null,pa:null,De:null,width:512,height:512,premultipliedAlpha:!1,em:!0,antialias:!1,debug:!1,ap:!1},x);x.Ra?(b=
x.Ra,l=x.Ra.canvas):x.De&&!x.pa?l=document.getElementById(x.De):x.pa&&(l=x.pa);l||(l=document.createElement("canvas"));l.width=x.width;l.height=x.height;if(b)v=b instanceof WebGL2RenderingContext;else{v=!0;var H={antialias:x.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:x.premultipliedAlpha,stencil:!1,depth:x.em,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(H.antialias=!1);var h=
d(H);h||!H.antialias||c()||(H.antialias=!1,h=d(H));h&&(b=l.getContext("webgl2",H));b?v=!0:((b=l.getContext("webgl",H))||(b=l.getContext("experimental-webgl",H)),v=!1)}if(!b)return a("WebGL1 and 2 are not enabled");x.Pf&&l.addEventListener&&(q=b.getExtension("WEBGL_lose_context"))&&(y=x.Pf,l.addEventListener("webglcontextlost",y,!1));if(!xa.m())return a("Not enough GL capabilities");e(b);da.m();Z.m();Db.Xg(b,xa.rl());G.forEach(function(f){f(b)});G.splice(0);return!0},Ro:function(){return new Promise(function(x){b?
x(b):G.push(x)})},v:function(){b&&(xa.v(),da.v(),Db.v());q&&y&&(l.removeEventListener("webglcontextlost",y,!1),q=y=null);b=t=B=p=l=null;G.splice(0)}};return z}(),mb=function(){function a(){null===c&&("undefined"!==typeof da?c=da:"undefined"!==typeof F&&(c=F))}var c=null;return{reset:function(){c=null},dj:function(d){c!==d&&(c&&c.H(),c=d)},Ub:function(){return c.Ub()},$b:function(){return c.$b()},ac:function(d){return c.ac(d)},Qd:function(){return c.Qd()},H:function(){return c.H()},set:function(d){a();
return c.set(d)},ub:function(d){a();return c.ub(d)},Od:function(d){a();return c.Od(d)}}}(),aa=function(){function a(w){b.bindTexture(b.TEXTURE_2D,w)}function c(w){var M=new Uint16Array(w.length);w.forEach(function(N,K){E[0]=N;var R=J[0];var ea=R>>16&32768;N=R>>12&2047;var ja=R>>23&255;R=103>ja?ea:142<ja?ea|31744|((255==ja?0:1)&&R&8388607):113>ja?(N|=2048,ea|(N>>114-ja)+(N>>113-ja&1)):(ea|ja-112<<10|N>>1)+(N&1);M[K]=R});return M}function d(){if(null!==u.kf)return u.kf;var w=e(c([.5,.5,.5,.5]),!0);
return null===w?!0:u.kf=w}function e(w,M){if(!mb.Ub()||!x)return null;var N=null,K=Math.sqrt(w.length/4);try{var R=b.getError();if("FUCKING_BIG_ERROR"===R)return!1;N=m.instance({isFloat:!1,S:M,array:w,width:K});R=b.getError();if(R!==b.NO_ERROR)return!1}catch(ea){return!1}va.$();b.viewport(0,0,K,K);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);mb.set("s0");N.Na(0);Z.l(!0,!0);w=4*K*K;M=new Uint8Array(w);b.readPixels(0,0,K,K,b.RGBA,b.UNSIGNED_BYTE,M);K=!0;for(R=0;R<w;++R)K=K&&3>Math.abs(M[R]-127);
N.remove();va.fa();return K}var l=0,p=null,B=0,q=null,v=null,t=null,y=null,G=null,z=null,x=!1,H=[],h={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,ia:null,Kh:null,fm:!1,S:!1,R:null,F:4,If:0},f=!1,C=null,I=null,k=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],n=!1,g=!1,E=new Float32Array(1),J=new Int32Array(E.buffer),u={kf:null,lf:null},m={m:function(){x||(G=[b.RGBA,null,
b.RGBA,b.RGBA],z=[b.RGBA,null,b.RGBA,b.RGBA],p=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],n="undefined"!==typeof ca,g="undefined"!==typeof xa,q=[-1,-1,-1,-1,-1,-1,-1,-1],y=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],x=!0)},Wl:function(){if(!v){for(var w=new Float32Array(16384),M=0;16384>M;++M)w[M]=2*Math.random()-1;v={random:m.instance({isFloat:!0,isPot:!0,array:w,width:64}),sj:m.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}m.lo()},
Jh:function(){return v.sj},lo:function(){y[1]=xa.Xe(b)},Kn:function(){z=G=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Ji:function(w){da.set("s1");va.$();var M=w.L(),N=w.Y();b.viewport(0,0,M,N);w.h(0);Z.l(!1,!1)},Mp:function(w,M){m.Ji(w);b.readPixels(0,0,w.L(),w.Y(),b.RGBA,b.UNSIGNED_BYTE,M)},Np:function(w,M){m.Ji(w);return xa.Zf(0,0,w.L(),w.Y(),M)},xh:function(w,M,N,K,R,ea,ja){w.activeTexture(w.TEXTURE0);var W=w.createTexture();w.bindTexture(w.TEXTURE_2D,W);R=R instanceof Float32Array?R:new Float32Array(R);w.texParameteri(w.TEXTURE_2D,
w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE);w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE);w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.NEAREST);w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.NEAREST);w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,ea);w.texImage2D(w.TEXTURE_2D,0,w.RGBA,N,K,0,w.RGBA,w.FLOAT,R);w.bindTexture(w.TEXTURE_2D,null);w.pixelStorei(w.UNPACK_FLIP_Y_WEBGL,!1);ja&&(va.fa(),da.ub(w));w.viewport(0,0,N,K);w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,
M,0);w.bindTexture(w.TEXTURE_2D,W);ja?Z.l(!0,!0):Z.Kb(w);w.deleteTexture(W);x&&(q[0]=-1,t=null,l=0)},pe:function(w){w!==l&&(b.activeTexture(p[w]),l=w)},instance:function(w){function M(){ka=void 0!==A.ia.videoWidth?A.ia.videoWidth:A.ia.width;la=void 0!==A.ia.videoHeight?A.ia.videoHeight:A.ia.height}function N(D){var O=b.getError();if("FUCKING_BIG_ERROR"===O)return!1;b.texImage2D(b.TEXTURE_2D,0,Wa,Ta,Va,D);O=b.getError();O!==b.NO_ERROR&&Ta!==b.RGBA&&(Ta=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,Wa,Ta,Va,D));
return!0}function K(){if(!V){a(oa);ib&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,ib);A.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,A.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,A.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));A.isAnisotropicFiltering&&"undefined"!==typeof U&&b.texParameterf(b.TEXTURE_2D,ca.vl().TEXTURE_MAX_ANISOTROPY_EXT,
U.Rj);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,A.isLinear?b.LINEAR:b.NEAREST);A.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,A.isMipmap&&!hb?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,A.isMipmap&&!hb?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);Ta=G[A.F-1];Wa=z[A.F-1];Va=y[r];if(xa.ja()){var D=xa.xl();Ta===b.RGBA&&Va===b.FLOAT?A.isMipmap||A.isLinear?Wa=Db.zl(b):xa.ea()?D&&(Wa=D):Wa=b.RGBA16F||b.RGBA:Ta===b.RGB&&Va===b.FLOAT&&D&&(Wa=D,Ta=b.RGBA)}if(A.S&&
!A.isFloat||A.isFloat&&A.isMipmap&&Db.om())Wa=xa.yl(),Va=xa.Xe(b);A.If&&(pb=A.If);A.isSrgb&&4===A.F&&(Ta=ca.Nl());if(A.ia)N(A.ia);else if(A.url)N(Ia);else if(Da){D=Da;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,Wa,ka,la,0,Ta,Va,D),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,Wa,ka,la,0,Ta,Va,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,ka,la,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(fb){b.texImage2D(b.TEXTURE_2D,0,Wa,ka,la,0,Ta,Va,null)}A.isKeepArray||
(Da=null)}else D=b.getError(),"FUCKING_BIG_ERROR"!==D&&(b.texImage2D(b.TEXTURE_2D,0,Wa,ka,la,0,Ta,Va,null),D=b.getError(),D!==b.NO_ERROR&&(Ta=b.RGBA,A.S&&Va!==b.FLOAT&&(Va=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,Wa,ka,la,0,Ta,Va,null))));if(A.isMipmap)if(!hb&&Na)Na.nd(),qb=!0;else if(hb){D=Math.log2(Math.min(ka,la));lb=Array(1+D);lb[0]=oa;for(var O=1;O<=D;++O){var fa=Math.pow(2,O),ia=ka/fa;fa=la/fa;var Ha=b.createTexture();a(Ha);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,Wa,ia,fa,0,Ta,Va,null);a(null);lb[O]=Ha}qb=!0}a(null);q[l]=-1;ib&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ba=!0;A.R&&Na&&(A.R(Na),A.R=null)}}function R(){for(var D=ka*la,O=2*D,fa=3*D,ia=0;ia<D;++ia)ra[0][ia]=rb[ia],ra[1][ia]=rb[ia+D],ra[2][ia]=rb[ia+O],ra[3][ia]=rb[ia+fa]}function ea(){var D=ka*la*4;Ga=[new Uint8Array(D),new Uint8Array(D),new Uint8Array(D),new Uint8Array(D)];ra=[new Float32Array(Ga[0].buffer),new Float32Array(Ga[1].buffer),
new Float32Array(Ga[2].buffer),new Float32Array(Ga[3].buffer)];Ja=new Uint8Array(4*D);rb=new Float32Array(Ja.buffer);ha=!0}function ja(){W=new Uint8Array(ka*la*4);Xa=new Float32Array(W.buffer);Gb=!0}var W,A=Object.assign({},h,w),T=B++;null===A.isFlipY&&(A.isFlipY=A.url?!0:!1);A.data&&(A.array="string"===typeof A.data?nb(A.data):A.isFloat?new Float32Array(A.data):new Uint8Array(A.data),A.isFlipY=!1);var r=0,P=A.ia?!0:!1,ba=null,Q=null,Y=!1;A.S=A.S||A.isFloat;A.S&&(r=1);!A.fm&&A.isFloat&&g&&!xa.ea()&&
(A.isFloat=!1);A.isFloat&&(r=2);A.isAnisotropicFiltering&&n&&!ca.nm()&&(A.isAnisotropicFiltering=!1);var oa=A.Kh||b.createTexture(),Ia=null,Da=!1,ka=0,la=0,Ba=!1,V=!1,ha=!1,ra=null,Ga=null,Ja=null,rb=null,Wa=null,Ta=null,Va=null,ib=A.isFlipY,mc=(w=A.S&&A.isMipmap)&&Db.Ak(),hb=w&&mc?!0:!1,lb=null,pb=-1,qb=!1,Gb=!1,Xa=W=null;A.width&&(ka=A.width,la=A.height?A.height:ka);var Na={get:function(){return oa},L:function(){return ka},Y:function(){return la},Pl:function(){return A.url},ci:function(){return A.isFloat},
di:function(){return A.S},Fp:function(){return A.isLinear},nd:function(){b.generateMipmap(b.TEXTURE_2D)},rk:function(D,O){hb?(D||(D=Na.Hh()),m.pe(O),a(lb[D]),q[O]=-1):Na.h(O)},Hh:function(){-1===pb&&(pb=Math.log(ka)/Math.log(2));return pb},ol:function(D){if(hb){D||(D=Na.Hh());da.set("s12");m.pe(0);for(var O=ka,fa=la,ia=1;ia<=D;++ia)O/=2,fa/=2,da.N("u8",.25/O,.25/fa),b.viewport(0,0,O,fa),a(lb[ia-1]),b.framebufferTexture2D(va.rd(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,lb[ia],0),Z.l(!1,1===ia);q[0]=-1}else Na.nd()},
Zp:function(D){(P=!(Array.isArray(D)||D.constructor===Float32Array||D.constructor===Uint8Array))?(Da=null,A.ia=D,M()):Da=D},h:function(D){if(!Ba)return!1;m.pe(D);if(q[D]===T)return!1;a(oa);q[D]=T;return!0},Na:function(D){b.activeTexture(p[D]);l=D;a(oa);q[D]=T},o:function(){t=Na;b.framebufferTexture2D(va.rd(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,oa,0)},M:function(){t=Na;b.viewport(0,0,ka,la);b.framebufferTexture2D(va.rd(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,oa,0)},Zd:m.Zd,Dn:function(D,O){ka=D;la=O},resize:function(D,
O){Na.Dn(D,O);K()},clone:function(D){D=m.instance({width:ka,height:la,S:A.S,isFloat:A.isFloat,isLinear:A.isLinear,isMirrorY:A.isMirrorY,isFlipY:D?!ib:ib,isPot:A.isPot});mb.set("s0");va.fa();D.o();b.viewport(0,0,ka,la);Na.h(0);Z.l(!0,!0);return D},Kc:function(){b.viewport(0,0,ka,la)},remove:function(){b.deleteTexture(oa);V=!0;H.splice(H.indexOf(Na),1);Na=null},refresh:function(){Na.Na(0);ib&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);P?b.texImage2D(b.TEXTURE_2D,0,Wa,Ta,Va,A.ia):b.texImage2D(b.TEXTURE_2D,
0,Wa,ka,la,0,Ta,Va,Da);ib&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Hi:function(){ha||ea();b.readPixels(0,0,ka,4*la,b.RGBA,b.UNSIGNED_BYTE,Ja);R();return ra},$m:function(){ha||ea();return xa.Zf(0,0,ka,4*la,Ja).then(function(){R();return ra})},bn:function(){Gb||ja();b.readPixels(0,0,ka,la,b.RGBA,b.UNSIGNED_BYTE,W);return Xa},an:function(){Gb||ja();return xa.Zf(0,0,ka,la,W)},kh:function(D){va.$();da.set("s13");Na.h(0);if(D)b.viewport(0,0,ka,la),da.Pn("u9",.25,.25,.25,.25),Z.l(!1,!0);else for(D=0;4>
D;++D)b.viewport(0,la*D,ka,la),da.xa("u9",k[D]),Z.l(!1,0===D)},Eg:function(D){var O;if(O=Va===y[0])null!==u.lf?O=u.lf:(O=e(new Uint8Array([127,127,127,127]),!1),O=null===O?!0:u.lf=O),O=!O;a(oa);ib&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);O?(Y||(ba=document.createElement("canvas"),ba.width=ka,ba.height=la,Q=ba.getContext("2d"),Q.createImageData(ka,la),Y=!0),null.data.set(D),Q.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,0,Wa,Ta,Va,ba)):b.texImage2D(b.TEXTURE_2D,0,Wa,ka,la,0,Ta,Va,D);q[l]=T;ib&&
b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},lq:function(D,O){a(oa);O&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,Wa,Ta,Va,D);q[l]=T;O&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Hc:function(D,O){var fa=ka*la,ia=4*fa;D=A.S?D?"RGBE":"JSON":"RGBA";O&&(D=O);O=xa.ja()&&!1;var Ha=null;switch(D){case "RGBE":Ha="s43";break;case "JSON":Ha=O?"s0":"s13";break;case "RGBA":case "RGBAARRAY":Ha="s7"}ha||("RGBA"===D||"RGBE"===D||"RGBAARRAY"===D?(Ga=new Uint8Array(ia),ha=!0):"JSON"!==D||O||ea());
va.$();da.set(Ha);Na.h(0);ia=null;if("RGBA"===D||"RGBE"===D||"RGBAARRAY"===D){b.viewport(0,0,ka,la);Z.l(!0,!0);b.readPixels(0,0,ka,la,b.RGBA,b.UNSIGNED_BYTE,Ga);if("RGBAARRAY"===D)return{data:Ga};f||(C=document.createElement("canvas"),I=C.getContext("2d"),f=!0);C.width=ka;C.height=la;fa=I.createImageData(ka,la);fa.data.set(Ga);I.putImageData(fa,0,0);ia=C.toDataURL("image/png")}else if("JSON"===D)if(O)ia=new Float32Array(fa),b.viewport(0,0,ka,la),Z.l(!0,!0),b.readPixels(0,0,ka,la,b.RGBA,b.FLOAT,ia);
else{for(ia=0;4>ia;++ia)b.viewport(0,la*ia,ka,la),da.xa("u9",k[ia]),Z.l(!ia,!ia);Na.Hi();ia=Array(fa);for(O=0;O<fa;++O)ia[4*O]=ra[0][O],ia[4*O+1]=ra[1][O],ia[4*O+2]=ra[2][O],ia[4*O+3]=ra[3][O]}return{format:D,data:ia,width:ka,height:la,isMirrorY:A.isMirrorY,isFlipY:"RGBA"===D?A.isFlipY:!A.isFlipY}}};A.isMipmap&&!hb&&Ba&&!qb&&(Na.nd(),qb=!0);if(A.url)a(oa),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Ia=new Image,Ia.$o="Anonymous",Ia.crossOrigin="Anonymous",Ia.src=A.url,Ia.onload=
function(){ka=Ia.width;la=Ia.height;K()};else if(A.ia){var Ea=function(){M();ka?K():setTimeout(Ea,1)};Ea()}else A.array?(A.S&&!A.isFloat?A.array instanceof Uint16Array?(Da=A.array,K()):d()?(Da=c(A.array),K()):(K(),m.xh(b,oa,Na.L(),Na.Y(),A.array,ib,!0)):(Da=A.isFloat?A.array instanceof Float32Array?A.array:new Float32Array(A.array):A.array instanceof Uint8Array?A.array:new Uint8Array(A.array),K()),A.isKeepArray||(Da&&Da!==A.array&&(Da=null),delete A.array)):A.Kh?Ba=!0:K();Na.wp=Na.L;A.R&&Ba&&(A.R(Na),
A.R=null);H.push(Na);return Na},$:function(w){w!==l&&(b.activeTexture(p[w]),l=w);q[w]=-1;a(null)},tk:function(w){v.random.h(w)},Zd:function(){t=null;b.framebufferTexture2D(va.rd(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==l&&b.activeTexture(p[0]);for(var w=0;w<p.length;++w)q[w]=-1;l=-1},Qp:function(){l=-1},uj:function(){for(var w=0;w<p.length;++w)m.$(w)},K:function(){v&&(v.random.remove(),v.sj.remove())},Nc:function(w,M){if("RGBA"===w.format||"RGBE"===w.format){var N=new Image;
N.src=w.data;N.onload=function(){m.instance({isMirrorY:w.isMirrorY,isFlipY:w.isFlipY,isFloat:!1,ia:N,R:function(K){if("RGBA"===w.format)M(K);else{var R=w.width,ea=w.height,ja=m.instance({isMirrorY:w.isMirrorY,isFloat:!0,width:R,height:ea,isFlipY:w.isFlipY});va.fa();b.viewport(0,0,R,ea);da.set("s44");ja.o();K.h(0);Z.l(!0,!0);m.$(0);M(ja);xa.flush();setTimeout(K.remove,50)}}})}}else"JSON"===w.format?M(m.instance({isFloat:!0,isFlipY:w.isFlipY,width:w.width,height:w.height,array:new Float32Array(w.data)})):
M(!1)},Gk:c,v:function(){t&&(va.fa(),m.Zd(),va.$());m.uj();H.slice(0).forEach(function(w){w.remove()});H.splice(0);x=!1;B=0;"undefined"!==typeof Db&&Db.v();v=null}};return m}(),Gc={instance:function(a){var c=[aa.instance(a),aa.instance(a)],d=[c[1],c[0]],e=d,l={Wi:function(p){e[1].o();e[0].h(p);l.ij()},yn:function(p){e[1].M();e[0].h(p);l.ij()},ij:function(){e=e===c?d:c},refresh:function(){e[0].refresh();e[1].refresh()},h:function(p){e[0].h(p)},Na:function(p){e[0].Na(p)},sk:function(p){e[1].h(p)},rp:function(){return e[0]},
up:function(){return e[1]},Eg:function(p){e[0].Eg(p);e[1].Eg(p)},remove:function(){e[0].remove();e[1].remove();e=null},sync:function(){l.yn(0);da.set("s0");Z.l(!1,!1)}};return l}},Z=function(){function a(v){var t={ha:null,U:null};t.ha=v.createBuffer();v.bindBuffer(v.ARRAY_BUFFER,t.ha);v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),v.STATIC_DRAW);t.U=v.createBuffer();v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,t.U);v.bufferData(v.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),v.STATIC_DRAW);
return t}var c=null,d=0,e=!1,l=[],p=-2,B=-2,q={reset:function(){B=p=-2},m:function(){e||(c=a(b),q.Zc(),e=!0)},instance:function(v){var t=d++,y=v.U?v.U.length:0,G="undefined"===typeof v.mode?b.STATIC_DRAW:v.mode,z=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,z);b.bufferData(b.ARRAY_BUFFER,v.ha instanceof Float32Array?v.ha:new Float32Array(v.ha),G);p=t;var x=null,H=null,h=null;if(v.U){x=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,x);var f=null;65536>v.U.length?(f=Uint16Array,H=b.UNSIGNED_SHORT,
h=2):(f=Uint32Array,H=b.UNSIGNED_INT,h=4);f=v.U instanceof f?v.U:new f(v.U);b.bufferData(b.ELEMENT_ARRAY_BUFFER,f,G);B=t}var C={rc:function(I){p!==t&&(b.bindBuffer(b.ARRAY_BUFFER,z),p=t);I&&mb.Qd()},pk:function(){B!==t&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,x),B=t)},bind:function(I){C.rc(I);C.pk()},V:function(){b.drawElements(b.TRIANGLES,y,H,0)},Ga:function(I,k){b.drawElements(b.TRIANGLES,I,H,k*h)},remove:function(){b.deleteBuffer(z);v.U&&b.deleteBuffer(x);C=null}};l.push(C);return C},Zc:function(){-1!==
p&&(b.bindBuffer(b.ARRAY_BUFFER,c.ha),p=-1);-1!==B&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.U),B=-1)},l:function(v,t){v&&Z.Zc();t&&mb.$b();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},Kb:function(v){v=v||b;var t=a(v);v.bindBuffer(v.ARRAY_BUFFER,t.ha);v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,t.U);mb.ac(v);v.clear(v.COLOR_BUFFER_BIT);v.drawElements(v.TRIANGLES,3,v.UNSIGNED_SHORT,0);v.flush();v.bindBuffer(v.ARRAY_BUFFER,null);v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,null);v.deleteBuffer(t.ha);v.deleteBuffer(t.U);
q.reset();e&&(q.Zc(),mb.$b())},K:function(){var v=b,t=c;v.deleteBuffer(t.ha);v.deleteBuffer(t.U)},v:function(){q.K();l.forEach(function(v){v.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);q.reset();e=!1;l.splice(0);d=0}};return q}(),va=function(){var a=null,c=null,d=null,e=!1,l=[],p={ma:-2,wh:1},B={Ub:function(){return e},m:function(){if(!e){a=b.createFramebuffer();var q=xa.ja();c=q&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=q&&b.READ_FRAMEBUFFER?
b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},wl:function(){return c},Dh:function(){return d},rd:function(){return b.FRAMEBUFFER},vp:function(){return p},kp:function(){return a},instance:function(q){void 0===q.xc&&(q.xc=!1);var v=q.ka?q.ka:null,t=q.width,y=void 0!==q.height?q.height:q.width,G=a,z=null,x=!1,H=!1,h=0;v&&(t=t?t:v.L(),y=y?y:v.Y());var f={Qi:function(){x||(G=b.createFramebuffer(),x=!0,h=p.wh++)},Uc:function(){f.Qi();f.o();z=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,z);b.renderbufferStorage(b.RENDERBUFFER,
b.DEPTH_COMPONENT16,t,y);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,z);b.clearDepth(1)},bind:function(C,I){h!==p.ma&&(b.bindFramebuffer(c,G),p.ma=h);v&&v.o();I&&b.viewport(0,0,t,y);C&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Sg:function(){h!==p.ma&&(b.bindFramebuffer(c,G),p.ma=h)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},ze:function(){b.clear(b.COLOR_BUFFER_BIT)},Zg:function(){b.clear(b.DEPTH_BUFFER_BIT)},Kc:function(){b.viewport(0,0,t,y)},o:function(){h!==
p.ma&&(b.bindFramebuffer(c,G),p.ma=h)},rtt:function(C){v=C;p.ma!==h&&(b.bindFramebuffer(b.FRAMEBUFFER,G),p.ma=h);C.o()},$:function(){b.bindFramebuffer(c,null);p.ma=-1},resize:function(C,I){t=C;y=I;z&&(b.bindRenderbuffer(b.RENDERBUFFER,z),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,t,y))},remove:function(){G===a||H||(b.bindFramebuffer(c,G),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),z&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,
null),b.deleteFramebuffer(G),z&&b.deleteRenderbuffer(z));H=!0}};q.xc&&f.Uc();l.push(f);return f},$:function(){b.bindFramebuffer(c,null);p.ma=-1},jq:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);xa.fj();p.ma=-1},reset:function(){p.ma=-2},fa:function(){0!==p.ma&&(b.bindFramebuffer(c,a),p.ma=0)},clear:function(){xa.fj();b.clear(b.COLOR_BUFFER_BIT)},v:function(){B.$();l.forEach(function(q){q.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);B.reset();e=!1;l.splice(0);
p.wh=1}};return B}(),xa=function(){function a(){q="undefined"===typeof ab?ca:ab;v=!0}function c(k,n){for(var g=0;g<k.length;++g){var E=n.getExtension(k[g]);if(E)return E}return null}function d(){null!==f.Yd&&(clearTimeout(f.Yd),f.Yd=null);f.Pb=!1}function e(k){if(0===f.rb.length){f.Aa=b.PIXEL_PACK_BUFFER;f.rb.splice(0);f.sd.splice(0);for(var n=0;n<f.tc;++n)f.rb.push(b.createBuffer()),f.sd.push(-1);f.Oa=0;f.Of=0}b.bindBuffer(f.Aa,f.rb[f.Oa]);k.byteLength!==f.sd[f.Oa]&&(b.bufferData(f.Aa,k.byteLength,
b.STREAM_READ),f.sd[f.Oa]=k.byteLength);f.Bp=!0}function l(){b.bindBuffer(f.Aa,null)}function p(){f.Nb.forEach(function(k){b.deleteSync(k)});f.Nb.splice(0)}function B(){f.Oa=(f.Oa+1)%f.tc;++f.Of}var q=null,v=!1,t={Vh:!1,xg:null,yg:null,$h:!1,lm:!1,zg:null,ai:!1,Ag:null,Wh:!1,Ae:null,cm:!1,Be:null,dm:!1},y=null,G={Qa:!0,Sa:!0,Se:!0,Gi:!1},z=null,x=!0,H=null,h=null,f={Hk:1,tc:-1,Oa:0,Of:0,Pb:!1,rb:[],Nb:[],sd:[],Aa:null,Yd:null},C="undefined"===typeof window?{}:window,I={m:function(){if(v)return!0;
I.reset();v||a();var k=b;if(!y.Vh){y.xg=I.th(k);C.GL_EXT_FLOAT=y.xg;y.$h=y.xg?!0:!1;if(y.$h||I.ja())y.yg=I.uh(k),y.lm=y.yg?!0:!1,C.GL_EXT_FLOATLINEAR=y.yg;y.Vh=!0}if(!y.Wh){y.zg=I.jd(k);y.zg&&(y.ai=!0,C.GL_EXT_HALFFLOAT=y.zg);if(y.ai||I.ja())y.Ag=I.vh(k),C.GL_EXT_HALFFLOATLINEAR=y.Ag;y.Dp=y.Ag?!0:!1;y.Wh=!0}y.Ae=I.rh(k);y.cm=y.Ae?!0:!1;C.GL_EXT_COLORBUFFERFLOAT=y.Ae;y.Be=I.sh(k);y.dm=y.Be?!0:!1;C.GL_EXT_COLORBUFFERHALFFLOAT=y.Be;va.m();aa.m();if(!I.Tk())return!1;Z.m();aa.Wl();return!0},reset:function(){y=
Object.assign({},t);z=Object.assign({},G)},L:function(){v||a();return q.L()},Y:function(){v||a();return q.Y()},ja:function(){v||a();return q.ja()},qh:function(k){I.rh(k);I.sh(k);I.th(k);I.uh(k);I.jd(k);I.vh(k)},rh:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),sh:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),th:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),
uh:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),jd:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),vh:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Xe:function(k){var n=I.jd(k);return n&&n.HALF_FLOAT_OES?n.HALF_FLOAT_OES:k.HALF_FLOAT||k.FLOAT},xl:function(){return h||b.RGBA32F||b.RGBA},yl:function(){return H||
b.RGBA16F||b.RGBA},rl:function(){return z},ea:function(){return z.Qa},Vo:function(){return z.Sa},zk:function(){return z.Se},Ck:function(){return z.Gi&&x},rj:function(k){x=k;!k&&f.Pb&&(p(),b.bindBuffer(f.Aa,null),f.Pb=!1)},Gp:function(){return f.Pb},Wd:function(k,n,g){function E(){k.bindTexture(k.TEXTURE_2D,null);k.bindFramebuffer(J,null);k.deleteTexture(w);k.deleteFramebuffer(m)}var J=k.FRAMEBUFFER,u=k.NEAREST,m=k.createFramebuffer();k.bindFramebuffer(J,m);var w=k.createTexture();k.activeTexture(k.TEXTURE0);
k.bindTexture(k.TEXTURE_2D,w);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,u);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,u);k.texImage2D(k.TEXTURE_2D,0,n,3,3,0,k.RGBA,g,null);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,w,0);if(k.checkFramebufferStatus(k.READ_FRAMEBUFFER||k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)return E(),
!1;mb.Od(k);k.clearColor(0,0,0,0);k.viewport(0,0,3,3);k.disable(k.DEPTH_TEST);k.clear(k.COLOR_BUFFER_BIT);Z.Kb(k);k.bindFramebuffer(J,null);mb.ub(k);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,w);Z.Kb(k);n=new Uint8Array(36);k.readPixels(0,0,3,3,k.RGBA,k.UNSIGNED_BYTE,n);E();for(g=0;36>g;++g)if(3!==g%4&&3<Math.abs(n[g]-127))return!1;return!0},Ke:function(k){var n={Qa:!1,Sa:!1};k.disable(k.BLEND);k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT);k.RGBA32F&&I.Wd(k,k.RGBA32F,k.FLOAT)&&(n.Qa=
!0,h=k.RGBA32F);!n.Qa&&I.Wd(k,k.RGBA,k.FLOAT)&&(n.Qa=!0,h=k.RGBA);var g=I.Xe(k);H=null;k.RGBA16F&&I.Wd(k,k.RGBA16F,g)&&(n.Sa=!0,H=k.RGBA16F);!n.Sa&&I.Wd(k,k.RGBA,g)&&(n.Sa=!0,H=k.RGBA);return n},Vk:function(){var k=va.instance({width:2});k.Qi();var n=aa.instance({width:2,isFloat:!0,F:3});k.o();n.o();I.flush();b.checkFramebufferStatus(va.Dh())!==b.FRAMEBUFFER_COMPLETE?(aa.Kn(),z.Se=!1):z.Se=!0;k.remove();n.remove()},Wk:function(){var k=!1;I.ja()&&(k="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(n){return"undefined"!==
typeof b[n]}));z.Gi=k},Tk:function(){var k=I.Ke(b);Object.assign(z,k);if(!z.Qa&&!z.Sa)return!1;I.Vk();I.Wk();return!0},cn:function(k,n,g,E,J){b.readPixels(k,n,g,E,b.RGBA,b.UNSIGNED_BYTE,J);return Promise.resolve(J,!1)},Zf:function(k,n,g,E,J,u,m){if(!I.Ck())return I.cn(k,n,g,E,J);f.tc=m||f.Hk;e(J);b.readPixels(k,n,g,E,b.RGBA,b.UNSIGNED_BYTE,0);f.Nb[f.Oa]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);I.flush();var w=!1;return new Promise(function(M,N){function K(){if(!f.Pb)return d(),l(),B(),N(),!1;var R=
(f.Oa+1)%f.tc;switch(b.clientWaitSync(f.Nb[R],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(f.Nb[R]),f.Nb[R]=null,b.bindBuffer(f.Aa,f.rb[R]),b.getBufferSubData(f.Aa,0,J),l(),B(),M(J,w),!0}f.Yd=setTimeout(K,0);return!1}d();f.Of+1<f.tc?(l(),B(),M(J,!1)):(f.Pb=!0,K()||!u||w||(w=!0,u()))})},fj:function(){b.viewport(0,0,I.L(),I.Y())},flush:function(){b.flush()},v:function(){d();p();aa.v();va.v();Z.v();f.rb.forEach(function(k){b.deleteBuffer(k)});f.rb.splice(0);mb.reset();
v=!1}};return I}(),Db=function(){function a(g,E,J,u){f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,u?f.NEAREST_MIPMAP_NEAREST:f.LINEAR);var m=null;if(null!==J)try{m=f.getError();if("FUCKING_BIG_ERROR"===m)return!1;f.texImage2D(f.TEXTURE_2D,0,g,4,4,0,f.RGBA,E,J);m=f.getError();if(m!==f.NO_ERROR)return!1}catch(w){return!1}u&&f.generateMipmap(f.TEXTURE_2D);f.clear(f.COLOR_BUFFER_BIT);Z.Kb(f);m=f.getError();if("FUCKING_BIG_ERROR"===m)return!1;f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,y);m=f.getError();
m===f.INVALID_OPERATION&&"undefined"!==typeof f.PIXEL_PACK_BUFFER&&(f.bindBuffer(f.PIXEL_PACK_BUFFER,null),f.readPixels(0,0,2,2,f.RGBA,f.UNSIGNED_BYTE,y),m=f.getError());if(m!==f.NO_ERROR)return!1;J=!0;for(u=0;16>u;++u)J=J&&4>Math.abs(y[u]-127);J&&(v.Ci=E,v.Th=g);return J}function c(g,E){return C.Qa&&a(g,f.FLOAT,new Float32Array(G),E)?(q=B.Pg,!0):!1}function d(g,E,J){if(!C.Sa)return!1;var u=aa.Gk(G),m=xa.jd(f);if(m&&m.HALF_FLOAT_OES&&a(g,m.HALF_FLOAT_OES,u,E)||f.HALF_FLOAT&&a(g,f.HALF_FLOAT,u,E))return q=
B.mc,!0;u=new Float32Array(G);if(a(g,f.FLOAT,u,E))return q=B.mc,!0;f.bindTexture(f.TEXTURE_2D,J);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,2,2,0,f.RGBA,f.UNSIGNED_BYTE,null);f.bindFramebuffer(v.dd,n);aa.xh(f,J,2,2,u,!1,!1);f.bindFramebuffer(v.dd,null);f.bindTexture(f.TEXTURE_2D,J);return a(g,null,null,E)?(q=B.mc,!0):!1}function e(g,E,J){t=!0;if(d(g,!0,J)||c(E,!0))return!0;t=!1;return d(g,!1,J)||c(E,!1)?!0:!1}function l(g){if(q===B.H){f=g||b;q=B.RGBA8;t=!0;xa.qh(f);C||(C=xa.Ke(f));va.reset();n=f.createFramebuffer();
v.dd=f.DRAW_FRAMEBUFFER||f.FRAMEBUFFER;f.bindFramebuffer(v.dd,null);f.clearColor(0,0,0,0);f.viewport(0,0,2,2);da.H();I=da.ub(f);g=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,g);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);k=g;var E=g=f.RGBA,J=f.RGBA16F,u=f.RGBA32F;u&&(g=u);J&&(E=J);if((J||u)&&e(E,g,k))return p(),!0;g=E=f.RGBA;if(e(E,g,k))return p(),
!0;q=B.RGBA8;p();return!1}}function p(){f.deleteProgram(I.na);f.deleteTexture(k);k=I=null}for(var B={H:-1,Pg:3,mc:2,RGBA8:0},q=B.H,v={Ci:null,Th:null,dd:null},t=!0,y=new Uint8Array(16),G=Array(64),z=0;4>z;++z)for(var x=0;4>x;++x){var H=0===(x+z)%2?1:0,h=4*z+x;G[4*h]=H;G[4*h+1]=H;G[4*h+2]=H;G[4*h+3]=H}var f=null,C=null,I=null,k=null,n=null;return{Ak:function(g){l(g);return t},Xg:function(g,E){q===B.H&&(typeof("undefined"!==E)&&(C=E),l(g));return q!==B.RGBA8},Ep:function(g){l(g);return q===B.Pg},om:function(g){l(g);
return q===B.mc},qp:function(g){l(g);return v.Ci},zl:function(g){l(g);return v.Th},v:function(){f=null;t=!0;q=B.H;C=null}}}(),Sc={instance:function(a){var c=null,d=!1,e=!1,l=null,p=!1,B=!1,q=null,v="undefined"===typeof a.preprocessing?!1:a.preprocessing,t="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,L&&void 0!==L.aa&&(a.mask=L.aa+a.mask),c=aa.instance({isFloat:!1,url:a.mask}));var y=!1;a.customInputShader&&(y="s45",da.oa({name:"_",id:y,g:a.customInputShader,kq:["uSource"],
precision:"lowp"}),da.j(y,[{type:"1i",name:"_",value:0}]));switch(v){case "sobel":q="s32";p=!0;break;case "meanNormalization":q="s33";p=!0;break;case "grayScale":q="s29";p=!1;break;case "grayScaleTilt":q="s30";B=!0;p=!1;break;case "rgbGrayTilt":q="s31";B=!0;p=!1;break;case "copy":q=y?y:"s0";break;case "inputLightRegulation":q=y?y:"s29";l=ed.instance({Sh:t,wi:a.size,ri:a.nBlurPass,xd:!1});e=!0;break;case "inputMix0":q="none";l=fd.instance({ta:t,Aj:a.varianceMin,Tg:a.blurKernelSizePx,gain:a.gain||1,
xd:!1});e=!0;break;case "direct":case "none":q="abort";break;default:q="s4"}B&&da.j(q,[{name:"u26",type:"1f",value:a.tilt}]);d&&(q+="Mask");var G=aa.instance({isFloat:!1,isPot:!1,width:a.size}),z={L:function(){return t},Ye:function(){return z.L()},Dl:function(){return e?l.Ze():G},wa:function(x){va.fa();"abort"!==q&&("none"!==q&&(da.set(q),p&&da.G("u27",1/a.size),G.M(),d&&c.h(1),Z.l(!1,!1),G.h(0),x=G),e&&l.process(x))},v:function(){G.remove();d&&c.remove()}};return z}},Tc={instance:function(a){function c(E){l.forEach(function(J,
u){p[u][0]=E[0][J];p[u][1]=E[1][J];p[u][2]=E[2][J];p[u][3]=E[3][J]});return p}a.normalize=a.normalize||!1;var d={input:null,bias:null,pf:null,Va:null,Fd:null,Rf:null,Sf:null},e=null,l=[],p=[],B=!1,q=null,v=!0,t=-1,y=a.isReorganize?a.isReorganize:!1,G=a.kernelsCount?!0:!1,z=a.isShiftRGBA?!0:!1,x={isEnabled:!1};a.im?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Kd.Ye(),v=!1):"full"===a.connectivityUp&&(a.sparsity=a.Kd.Ye());var H={elu:"s16",elu01:"s17",relu:"s15",arctan:"s18",arctan2:"s19",
sigmoid:"s14",copy:"s0"}[a.activation],h=a.sparsity*a.sparsity,f=!1,C=a.size,I="";if(a.maxPooling){switch(a.maxPooling.size){case 2:I="s34";break;case 4:I="s35"}f=!0;C/=a.maxPooling.size;d.Rf=aa.instance({isFloat:!0,isPot:!1,width:C})}var k=-1,n=null;v&&(d.Va=aa.instance({isFloat:!0,isPot:!1,width:a.size}));d.bias=aa.instance(a.bias);var g={L:function(){return a.size},Ye:function(){return C},Ah:function(){return a.classesCount},qk:function(E){e.h(E)},Tm:function(){a.remap&&a.remap.isEnabled&&(x={isEnabled:!0,
Cm:aa.instance(a.remap.maskTexture),zd:a.remap.layers.map(function(E){return a.parent.Al(E)}),depth:a.remap.depth})},Ln:function(){switch(a.connectivityUp){case "direct":n=gd.instance(a.connectivity);break;case "square":n=hd.instance(a.connectivity);break;case "squareFast":n=id.instance(a.connectivity,a.activation);break;case "full":n=jd.instance(a.connectivity);break;case "conv":t=a.kernelsCount,n=kd.instance(a.connectivity),y&&(d.Fd=aa.instance({width:C,isFloat:!0,isFlipY:!1,isPot:!1}))}if(n.ec){var E=
a.size*a.sparsity;k=Math.log(E/a.size)/Math.log(2);d.input=aa.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:E,If:k});d.pf=aa.instance({isFloat:!0,isPot:!0,width:a.size})}},wa:function(E,J){e=E;n.ec?(d.input.M(),G&&d.bias.h(2),n.wa(x),d.input.h(0),d.input.ol(k),d.pf.M(),G?da.set("s0"):(da.set(z?"s28":"s27"),da.G("u25",h),d.bias.h(1)),d.input.rk(k,0),Z.l(!1,!1),da.set(H),d.Va.o(),d.pf.h(0),Z.l(!1,!1)):(d.Va.M(),d.bias.h(1),n.wa());if(v)return f?(d.Rf.M(),d.Va.h(0),da.set(I),da.N("u8",1/a.size,1/a.size),
Z.l(!1,!1),J=d.Rf):J=d.Va,J.h(0),y&&(d.Fd.o(),da.set("s21"),da.N("u12",t,C/t),Z.l(!1,!1),J=d.Fd,d.Fd.h(0)),J;var u=d.Va;a.normalize&&(da.set("gpuRawAvg"===B?"s9":"s8"),da.G("u4",1/a.size),d.Sf.M(),d.Va.h(0),Z.l(!1,!1),u=d.Sf);E=null;switch(B){case "cpuRGBA2Float":u.kh(!1);J?E=g.Ym(u).then(q):(u=g.Zm(u),q(u));break;case "cpuMeanFloat":u.kh(!0);if(J)E=u.an().then(q);else{u=u.bn();for(var m=0;m<u.length;++m);q(u)}break;case "gpuRawAvg":case "gpuRaw":u.h(0);case "none":null!==q&&q(u)}J&&null===E&&(E=
Promise.resolve());return E},Jk:function(E){E&&(B=E.Tf||"none",q=E.Qf||null);d.Va=aa.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});E="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var J=0,u=0,m=0;J<E;++J)l.push(u+(a.size-1-m)*a.size),p.push([-1,-1,-1,-1]),++u,u===a.size&&(u=0,++m);a.normalize&&(d.Sf=aa.instance({isFloat:!0,isPot:!0,width:a.size}))},Ym:function(E){return E.$m().then(c)},Zm:function(E){E=E.Hi();c(E);return p},v:function(){for(var E in d){var J=
d[E];J&&J.remove()}n&&(n.v(),n=null)}};a.Kd&&g.Ln(a.Kd);return g}},gd={instance:function(a){var c=aa.instance(a.weights);return{ec:!0,qd:function(){return 1},v:function(){c.remove()},Ql:function(){return c},wa:function(){da.set("s26");c.h(1);Z.l(!1,!1)}}}},jd={instance:function(a){var c=a.fromLayerSize,d=aa.instance(a.weights);return{ec:!0,qd:function(){return c},v:function(){d.remove()},wa:function(e){if(e.isEnabled){da.set("s24");e.Cm.h(3);for(var l=Math.min(e.zd.length,e.depth),p=0;p<l;++p)e.zd[p].qk(4+
p)}else da.set("s23");da.G("u16",a.toLayerSize);da.G("u17",a.fromLayerSize);d.h(1);Z.l(!1,!1)}}}},hd={instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,l=e*d,p=l/c,B=c/d,q=0,v=0,t=0,y=Array(e*d*e*d*4),G=Array(e*d*e*d*4),z=Array(c*c),x=0;x<z.length;++x)z[x]=0;x=Math.floor(e/2);for(var H=.5/d,h=.5/c,f=.5/l,C=0;C<d;++C)for(var I=Math.round(C*B),k=0;k<d;++k){var n=Math.round(k*B),g=C/d,E=k/d;g+=H;E+=H;for(var J=0;J<e;++J){var u=I+J-x;0>u&&(u+=c);u>=c&&(u-=c);for(var m=0;m<
e;++m){var w=q/l,M=v/l,N=n+m-x;0>N&&(N+=c);N>=c&&(N-=c);var K=u/c,R=N/c;M=1-M-1/l;K+=h;R+=h;w+=f;M+=f;var ea=C*e+J,ja=k*e+m;ja=d*e-ja-1;ea=ja*d*e+ea;y[4*ea]=w;y[4*ea+1]=M;y[4*ea+2]=K;y[4*ea+3]=R;R=z[N*c+u]++;ea=R%p;K=u*p+ea;N=N*p+(R-ea)/p;N=c*p-1-N;N=N*c*p+K;G[4*N]=w;G[4*N+1]=M;G[4*N+2]=g;G[4*N+3]=E;++q>=l&&(q=0,++v);++t}}}z=null;var W=aa.instance(a.weights);delete a.weights.data;var A=aa.instance({width:l,isFloat:!0,array:new Float32Array(G),isPot:!0});G=null;var T=aa.instance({width:l,isFloat:!0,
array:new Float32Array(y),isPot:!0});y=null;return{ec:!0,qd:function(){return p},v:function(){A.remove();T.remove();W.remove()},wa:function(){da.set("s22");W.h(1);T.h(2);Z.l(!1,!1)}}}},kd={instance:function(a){var c=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,l=aa.instance(a.weights);return{ec:!0,qd:function(){return e},yp:function(){return d},Ql:function(){return l},v:function(){l.remove()},wa:function(){da.set("s25");da.G("u23",c);da.G("u24",d);da.G("u16",a.toLayerSize);da.G("u17",
a.fromLayerSize);l.h(1);Z.l(!1,!1)}}}},id={instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,l=a.toSparsity,p=a.stride?a.stride:1,B=l*e/d,q=e<d,v=d/e,t=aa.instance(a.weights),y="s46"+[d.toString(),e.toString(),l.toString(),p.toString(),c].join("_");da.ll(y)||(a=gb(c),e=[{type:"1f",name:"u16",value:e},{type:"1f",name:"u29",value:p}],q&&e.push({type:"1f",name:"u17",value:d}),d=[(q?B:l).toFixed(1),a],q&&d.push(v.toFixed(1)),da.Zl(q?"s40":"s39",y,d),da.j(y,e.concat([{type:"1i",name:"u14",value:0},
{type:"1i",name:"u22",value:1},{type:"1i",name:"u13",value:3}])));return{ec:!1,qd:function(){return B},v:function(){t.remove()},wa:function(){da.set(y);t.h(3);Z.l(!1,!1)}}}},ed={instance:function(a){var c=a.ri?a.ri:3,d=a.Sh?a.Sh:64,e=a.wi?a.wi:64,l=a.xd?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=aa.instance(a),B=aa.instance(a),q=aa.instance(a),v=aa.instance(a),t=aa.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),y=1/d;return{process:function(G){da.set("s36");v.o();Z.l(l,!1);da.set("s37");
for(var z=0;z<c;++z)p.o(),da.N("u8",y,0),Z.l(l,!1),q.o(),v.h(0),Z.l(l,!1),B.o(),p.h(0),da.N("u8",0,y),Z.l(l,!1),v.o(),q.h(0),Z.l(l,!1),z!==c-1&&B.h(0);da.set("s38");t.o();G.h(0);B.h(1);v.h(2);Z.l(l,!1);t.h(0)},Ze:function(){return t}}}},fd={instance:function(a){function c(y){return aa.instance({isFloat:y,width:d.ta,isPot:!1,isFlipY:!1})}var d=Object.assign({Aj:.1,Tg:9,ta:128,gain:1,xd:!1},a),e=c(!1),l=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],B=c(!0),q=[e,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u30;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u30*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.Tg-1)/2).toFixed(2)).replace("2.2222",(1/d.ta).toFixed(6));var v="uniform sampler2D u31,u32,u33,u34;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u31,vv0).rgb;float c=texture2D(u32,vv0).r,d=texture2D(u33,vv0).r,i=texture2D(u34,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(j-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.Aj.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),t={u1:0};da.qe([{id:"s48",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",u:t,i:["u1"],precision:"lowp"},{id:"s49",name:"_",g:a,u:t,i:["u1","u30"],precision:"lowp"},{id:"s50",name:"_",g:v,u:{u31:0,u32:1,u33:2,u34:3},i:["u31","u32","u33","u34"],precision:"highp"}]);return{process:function(){da.set("s48");e.M();Z.l(d.xd,!1);da.set("s49");for(var y=0;3>y;++y)da.N("u30",1,0),l[y].o(),
q[y].h(0),Z.l(!1,!1),da.N("u30",0,1),p[y].o(),l[y].h(0),Z.l(!1,!1);da.set("s50");B.o();e.h(0);p[0].h(1);p[1].h(2);p[2].h(3);Z.l(!1,!1);B.h(0)},Ze:function(){return B}}}},Cb=function(){function a(h,f,C,I,k,n,g){if(!x)if(g===n.length)k();else{switch(n[g]){case "A":C();break;case "D":h();break;case "S":f().then(function(E,J){H.qj();a(h,f,C,J?null:I,k,n,++g)}).catch(function(E){console.log("An error occurred in the WebAR loop: ",E);k()});return;case "R":I&&I()}a(h,f,C,I,k,n,++g)}}var c={n:5,Nf:1,hi:0,
md:[35,49],hd:[2,200],k:.7,jo:200,Nm:.05},d=-1,e=null,l=-1,p=-1,B=0,q=-1,v=-1,t=0,y=0,G=c.hd[1],z=Math.log(2),x=!0,H={T:function(){switch(d){case -1:return-1;case 0:return v+e.hi;case 1:return t}},Bh:function(h){return Math.pow(Math.min(Math.max(q,0),e.n-1)/(e.n-1),h||1)},m:function(h){e=Object.assign({},c,h);q=v=e.Nf;d=0;H.reset()},qj:function(h){h=("undefined"===typeof h?Date.now():h)||0;var f=Math.min(Math.max(h-y,e.hd[0]),e.hd[1]);G=f;y=h;var C=-1===l?0:e.k;l=Math.min(Math.max(1E3/f,5),120)*(1-
C)+l*C;h-p>e.jo&&5<++B&&(f=e.k,q=q*(1-f)+(l<e.md[0]?v-1:l>e.md[1]?v+1:v)*f,Math.abs(q-v)>1-e.Nm&&(f=Math.min(Math.max(Math.round(q),0),e.n-1),f!==v&&(q=v=f,l=(e.md[1]-e.md[0])/2)),p=h)},ag:function(h,f,C,I,k,n){x=!1;a(h,f,C,I,k,n,0)},stop:function(){x=!0},Fn:function(h){t=h;d=1},io:function(){d=0;H.reset()},reset:function(){G=c.hd[1];p=l=-1;B=0},fq:function(h,f,C){C=Math.exp(-z*G/C);return(1-C)*h+C*f},pp:function(){return G}};return H}(),Hc=function(){function a(G,z){var x=G[0]-.5;G=G[1]-.5;var H=
z[0]-.5;z=z[1]-.5;return x*x+G*G-(H*H+z*z)}var c={si:4,Gd:[1.5,1.5,2],qa:[.1,.1,.1],Oi:1,ta:-1,jf:-1,ao:2,Km:1,bg:!0,jl:.8},d=null,e=[],l=[],p=[],B=[0],q=[.5,.5,1],v=null,t=0,y=[0,0,0];return{m:function(G){d=Object.assign({},c,G);e.splice(0);l.splice(0);p.splice(0);t=0;G=d.Gd[0]*d.qa[0];var z=d.Gd[1]*d.qa[1],x=1/(1+d.Gd[2]*d.qa[2]),H=d.Oi*Math.min(d.ta,d.jf),h=H/d.ta;H/=d.jf;var f=.5*d.jl;f*=f;for(var C=0;C<d.si;++C){var I=[];l.push(I);var k=Math.pow(x,C),n=h*k,g=H*k;k=n*d.Km;p.push(k);var E=n*G,
J=g*z;n/=2;g/=2;for(var u=1+(1-n-n)/E,m=1+(1-g-g)/J,w=0;w<m;++w)for(var M=g+w*J,N=M-.5,K=0;K<u;++K){var R=n+K*E,ea=R-.5;ea*ea+N*N>f||(R=[R,M,k],e.push(R),I.push(R))}d.bg&&I.sort(a);v=e}d.bg&&e.sort(a)},get:function(G){var z=v.length;if(0===z)return q;for(;G>=B.length;)B.push(0);B[G]>=z&&(B[G]=0);var x=v[Math.floor(B[G])%z];B[G]=(B[G]+1/d.ao)%z;if(0===t)return x;y[0]=x[0];y[1]=x[1];y[2]=t;return y},Yp:function(G){t=G;if(0===t)v=e;else{for(var z=Infinity,x=-1,H=p.length,h=0;h<H;++h){var f=G-p[h];f*=
f;f<z&&(z=f,x=h)}v=l[x]}},reset:function(){for(var G=e.length/B.length,z=0;z<B.length;++z)B[z]=Math.floor(z*G);t=0;v=e}}}(),yb=function(){function a(){d(h+x.Jf);f.port.postMessage("DONE")}function c(){n.Vc=0===x.za?I(d):I(e)}function d(m){k.Sb&&null!==H&&(m-=h,m=Math.min(Math.max(m,x.oh[0]),x.oh[1]),h+=m,p(),g.isEnabled&&g.yc&&k.Ia&&h-g.uf>x.Og&&(t(),g.uf=h),H(h))}function e(m){k.Sb&&(n.timeout=setTimeout(d.bind(null,m),x.za))}function l(){H=null;k.Sb=!1;p()}function p(){n.Vc&&(window.cancelAnimationFrame(n.Vc),
n.Vc=null);n.timeout&&(window.clearTimeout(n.timeout),n.timeout=null)}function B(m){m&&!k.Ia?(k.Ia=!0,C&&Cb.io(),f.port.postMessage("STOP"),xa.rj(!0),c()):!m&&k.Ia&&(k.Ia=!1,C&&Cb.Fn(1),xa.rj(!1),f.port.postMessage("START"))}function q(m){m.target.hidden?J():E()}function v(m,w,M){w=m.createShader(w);m.shaderSource(w,M);m.compileShader(w);return w}function t(){g.yc=!1;var m=g.Ra,w=g.td,M=g.ud,N=g.Aa;m.uniform1f(g.Lh,Math.random());g.Tb?w.beginQueryEXT(N,M):m.beginQuery(N,M);m.drawElements(m.POINTS,
1,m.UNSIGNED_SHORT,0);g.Tb?w.endQueryEXT(N):m.endQuery(N);xa.flush();G().then(function(K){0===K||isNaN(K)?(g.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",K)):(K=x.Gj*x.Ng*1E3/K,g.ce=(g.ce+1)%x.lc,g.vf[g.ce]=K,++g.fi>x.lc&&(g.yd.set(g.vf),g.yd.sort(function(R,ea){return R-ea}),K=g.yd[Math.floor(x.lc/2)],g.ld=Math.max(g.ld,K),x.Mg(K/g.ld)),g.yc=!0)}).catch(function(){g.yc=!0})}function y(m){var w=g.Ra,M=g.td,N=g.ud;N=g.Tb?M.jp(N,
M.QUERY_RESULT_AVAILABLE_EXT):w.getQueryParameter(N,w.QUERY_RESULT_AVAILABLE);w=w.getParameter(M.GPU_DISJOINT_EXT);N?m(!w):setTimeout(y.bind(null,m),.1)}function G(){return new Promise(function(m,w){y(function(M){if(M){M=g.Ra;var N=g.td,K=g.ud;M=g.Tb?N.getQueryObjectEXT(K,N.QUERY_RESULT_EXT):M.getQueryParameter(K,M.QUERY_RESULT);m(M)}else w()})})}var z={Xh:!0,oh:[1,200],Jf:20,za:0,Ng:50,Gj:240,Og:3E3,lc:3,Mg:null},x=null,H=null,h=0,f=null,C=!1,I=null,k={Ha:!1,Ia:!0,tf:!1,sf:!1,rf:!1,Sb:!1},n={Vc:null,
timeout:null},g={isEnabled:!1,yc:!1,Ra:null,td:null,ud:null,Aa:null,Lh:null,Tb:!0,uf:0,fi:0,vf:null,yd:null,ce:0,ld:0},E=B.bind(null,!0),J=B.bind(null,!1),u={m:function(m){x=Object.assign(z,m);Object.assign(k,{Ia:!0,Ha:!0,Sb:!1});I=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==x.Mg){m=document.createElement("canvas");m.setAttribute("width","1");m.setAttribute("height","1");var w={antialias:!1};m=m.getContext("webgl2",w)||m.getContext("webgl",w);if(w=m.getExtension("EXT_disjoint_timer_query")||
m.getExtension("EXT_disjoint_timer_query_webgl2")){g.Ra=m;g.td=w;g.isEnabled=!0;g.Tb=w.beginQueryEXT?!0:!1;var M=v(m,m.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),N=v(m,m.FRAGMENT_SHADER,"precision lowp float;uniform float u35;void main(){vec4 a=u35*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",x.Ng.toString())),K=m.createProgram();m.attachShader(K,M);m.attachShader(K,N);m.linkProgram(K);M=m.getAttribLocation(K,"a0");g.Lh=m.getUniformLocation(K,
"u35");m.useProgram(K);m.enableVertexAttribArray(M);K=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,K);m.bufferData(m.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),m.STATIC_DRAW);m.vertexAttribPointer(M,4,m.FLOAT,!1,16,0);K=m.createBuffer();m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,K);m.bufferData(m.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),m.STATIC_DRAW);m.disable(m.DEPTH_TEST);m.disable(m.DITHER);m.disable(m.STENCIL_TEST);m.viewport(0,0,1,1);K=g.Tb?w.createQueryEXT():m.createQuery();g.ud=K;g.Aa=w.TIME_ELAPSED_EXT||
m.TIME_ELAPSED;g.uf=-x.Og;g.vf=new Float32Array(x.lc);g.yd=new Float32Array(x.lc);g.ld=0;g.ce=0;g.fi=0;g.yc=!0}}if(x.Xh){m=!1;try{if("undefined"===typeof SharedWorker){var R=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
x.Jf.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),ea=new Worker(R);ea.addEventListener("message",a);f={Fi:ea,port:ea};k.tf=!0}else{var ja=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
x.Jf.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),W=new SharedWorker(ja);W.port.start();W.port.addEventListener("message",a);f={Fi:W,port:W.port};k.sf=!0}m=!0}catch(A){}m&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",q):(window.addEventListener("blur",J),window.addEventListener("focus",E)),window.addEventListener("pagehide",
J),window.addEventListener("pageshow",E),k.rf=!0)}C="undefined"!==typeof Cb},v:function(){l();k.rf&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",q):(window.removeEventListener("blur",J),window.removeEventListener("focus",E)),window.removeEventListener("pagehide",J),window.removeEventListener("pageshow",E),k.rf=!1);k.sf?(f.port.close(),k.sf=!1):k.tf&&(f.Fi.terminate(),k.tf=!1);Object.assign(k,{Ia:!0,Ha:!1,Sb:!1});H=null},Jp:function(){return k.Ia},update:function(m){Object.assign(x,
m)},ag:function(m){k.Ha||u.m({});p();k.Sb=!0;H=m;k.Ia&&c()},stop:l};return u}(),tc={We:function(){return Date.now()},mp:function(){return performance.now()}},sb=function(){function a(V){switch(E){case g.movePinch:var ha=-V.deltaY;0===J&&h("pinch",-1,.001*ha,null)}V.deltaY;V.preventDefault()}function c(V){if(-1!==J)switch(E){case g.swipe:if(1!==J)break;v();y(V,m);var ha=m[0]-u[0];l(ha);V=ha/(20*I.offsetWidth/100);h("swipeMove",Math.min(Math.max(V,-1),1),V,null);break;case g.movePinch:if(2===J||3===
J){y(V,m);ha=m[0]-u[0];var ra=m[1]-u[1];2===J?(Q+=Math.sqrt(ha*ha+ra*ra),10>Q?(u[0]=m[0],u[1]=m[1]):(Ia||(Ia=!0,h("moveStart",null,null,null)),Y[0]=ha,Y[1]=ra,M[0]=ha-w[0],M[1]=ra-w[1],h("move",Y,M,null),w[0]=Y[0],w[1]=Y[1])):3===J&&(V=t(V)/oa,h("pinch",V,V-Da,null),Da=V)}}}function d(V){if(-1!==J)switch(E){case g.swipe:if(1!==J)break;v();y(V,m);V=m[0]-u[0];var ha=0>V;(V=20<100*Math.abs(V)/I.offsetWidth)&&ha?h("swipeLeft",N,null,null):V&&!ha&&h("swipeRight",N,null,null);var ra=function(){setTimeout(function(){q();
J=0;h("swipeEnd",null,null,null)},202)};V?(V=function(){var Ga=(ha?-1:1)*I.width,Ja=(ha?1:-1)*Ga/I.width;N.style.transitionDuration=(400).toString()+"ms";N.style.left=(W[0]+Ga).toString()+"px";N.style.top=W[1].toString()+"px";N.style.transform="rotate( "+Ja.toString()+"rad )";ra()},ja?V():A=V):(N.style.transitionDuration=(200).toString()+"ms",N.style.opacity="0",N.style.left=W[0].toString()+"px",N.style.top=W[1].toString()+"px",N.style.transform="",ra());J=-1;break;case g.movePinch:if(2===J||3===
J)J===J.move?h("moveEnd",null,null,null):3===J&&h("pinchEnd",null,null,null),J=0}}function e(V){V.preventDefault();if(-1!==J)switch(E){case g.swipe:if(0!==J)break;v();J=1;T=setTimeout(function(){q();T=null;1===J&&(J=0,h("swipeEnd",null,null,null))},1E3);p();h("swipeStart",null,null,null);h("swipeGetCanvas",N,R,K);y(V,u);break;case g.movePinch:0!==J?2!==J||Ia||void 0===V.changedTouches&&void 0===V.touches||(oa=t(V),20<oa&&(J=3,Da=1,h("pinchStart",null,null,null))):3!==J&&(Ia=!1,y(V,u),w[0]=0,w[1]=
0,J=2,Q=0)}}function l(V){var ha=0>V;N.style.left=W[0]+V+"px";N.style.transformOrigin=ha?P:r;N.style.transform="rotate( "+((ha?1:-1)*V/I.width).toString()+"rad )"}function p(){ja=!1;var V=I.getBoundingClientRect();W[0]=V.left;W[1]=V.top;N.width=Math.round(I.width/4);N.height=Math.round(I.height/4);K.width=N.width;K.height=N.height;N.style.width=I.offsetWidth+"px";N.style.height=I.offsetHeight+"px";N.style.left=W[0]+"px";N.style.top=W[1]+"px";setTimeout(B,0)}function B(){R.drawImage(I,0,0,N.width,
N.height);ea.drawImage(N,0,0);ja=!0;document.body.appendChild(N);A&&(A(),A=!1)}function q(){N.style.transitionDuration="0ms";N.style.opacity="1";N.style.transform="";ja&&(document.body.removeChild(N),ja=!1)}function v(){T&&(window.clearTimeout(T),T=null)}function t(V){G(V,ka,0);G(V,la,1);return Math.sqrt(ka[0]*ka[0]+la[0]*la[0])}function y(V,ha){void 0!==V.changedTouches||void 0!==V.touches?G(V,ha,0):(ha[0]=V.pageX,ha[1]=V.pageY)}function G(V,ha,ra){V.touches.length>ra?(ha[0]=V.touches[ra].pageX,
ha[1]=V.touches[ra].pageY):(ha[0]=V.changedTouches[ra].pageX,ha[1]=V.changedTouches[ra].pageY)}function z(){n.forEach(function(V){I.removeEventListener(V.type,V.mb,!1)});return n.splice(0,n.length)}function x(V){V.forEach(function(ha){H(ha.type,ha.mb)})}function H(V,ha){I.removeEventListener(V,ha,!1);N.removeEventListener(V,ha,!1);I.addEventListener(V,ha,!1);N.addEventListener(V,ha,!1);0===n.filter(function(ra){return ra.type===V&&ra.mb===ha}).length&&n.push({type:V,mb:ha})}function h(V,ha,ra,Ga){k[V].forEach(function(Ja){Ja.mb(ha,
ra,Ga)})}function f(V){return V[0]+"% "+(100-V[1]).toString()+"%"}var C=!1,I=null,k={swipeStart:[],swipeEnd:[],swipeLeft:[],swipeRight:[],swipeMove:[],swipeGetCanvas:[],pinch:[],pinchStart:[],pinchEnd:[],move:[],moveStart:[],moveEnd:[]},n=[],g={idle:0,swipe:1,movePinch:2},E=g.idle,J=0,u=[0,0],m=[0,0],w=[0,0],M=[0,0],N=document.createElement("canvas"),K=document.createElement("canvas"),R=N.getContext("2d"),ea=K.getContext("2d");N.style.position="fixed";N.style.zIndex="800";N.style.cursor="move";N.style.pointerEvents=
"none";N.className="swipeImage";N.setAttribute("draggable",!1);var ja=!1,W=[0,0],A=null,T=null,r=f([50,100]),P=f([50,0]),ba=null,Q=0,Y=[0,0],oa=0,Ia=!1,Da=1,ka=[0,0],la=[0,0],Ba={init:function(V){if(C)Ba.switch_canvas(V.pa);else return I=V.pa,H("mousedown",e),H("mouseup",d),H("mouseout",d),H("mousemove",c),H("mousemove",c),H("wheel",a),H("touchstart",e),H("touchend",d),H("touchmove",c),C=!0,Ba},switch_canvas:function(V){if(!C)Ba.init({pa:V});else if(I!==V){var ha=z();I=V;x(ha);for(var ra in k)for(V=
k[ra],ha=V.length-1;0<=ha;--ha)V[ha].en&&V.splice(ha,1)}},get_mode:function(){for(var V in g)if(g[V]===E)return V;return!1},switch_mode:function(V){C&&"undefined"!==typeof g[V]&&(V=g[V],E!==V&&(v(),E=V,J=0))},add_listener:function(V,ha,ra){k[V].push({mb:ha,en:"undefined"===typeof ra?!1:ra});return Ba},remove_listener:function(V){k[V].splice(0,k[V].length);return Ba},animate_swipe:function(V,ha){ba&&(clearInterval(ba),ba=null);p();var ra=I.width/(ha/1E3)*("left"===V?-1:1),Ga=0,Ja,rb=Date.now();ba=
setInterval(function(){ba&&(Ja=Date.now(),Ga+=(Ja-rb)/1E3*ra,l(Ga),rb=Ja,Math.abs(Ga)>.75*I.width&&ba&&(clearInterval(ba),ba=null,q()))},16)}};return Ba}();window.CanvasListeners=sb;var S={VERSION:"3.5.2",Sc:[],Rc:[],me:!1,le:!1,oe:!1,ready:!1,isBusy:!1},Ya={idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,FOVdesktop:60,rotate:0,FOVmobile:45,je:10,ie:8E3},Jc={Lf:"models3D",Hf:"materials",fo:"tweakers",neuralNetworkPath:"built/jeefitNNC_57_0.json",neuralNetworkVersion:"57_0",
aa:"",ua:"",ke:"",za:0,Qj:20,width:1024,height:1024,Mm:[2,3.5],Mi:300,Pc:[1,6],scanOverlapFactors:[2,2,3],scanNScaleLevels:2,scanScale0Factor:.7,qa:[.2,.2,.3],ic:[[.8,.5],[.8,.5],[1,1]],co:30,Rk:1.3,Wm:[.2,.6],Vm:1,eo:[.01,.035],nn:[.003,.007],vg:[0,.6],nl:.2,Wa:[.698111,1.047166,.122169],pj:[-.1,0,0],Jd:[0,-62,8],Rm:1.03,Ca:[0,-60,0],Mf:50,uc:.4,Te:73,re:[.02,1],Oj:[4,1],uk:[0,.5],pn:.15,mn:1,jn:[.5,4],uo:20,hp:!1,wc:145,hf:-18,ff:20,gf:3,Bc:[-110,0],cc:1,gj:.4,hj:3,Sd:[0,0,0],dc:[1.1,1],ad:0,Ie:.95,
He:90,Ge:50,Wc:30,Fb:.05,df:!0,Bd:!0,Ef:"images/masks/target.jpg",Ff:!1,Ad:[1/255,175/255,236/255,0],Cd:-.001,Df:3.14,ve:0,ue:"images/masks/burka.png",se:Math.PI-Math.PI/4,Ee:Math.PI/4,$f:[.3,.2,.1],Vb:1,ii:[700,90],wm:[.2,.04],vo:"images/backgrounds/viewer3D.png",Lg:[0,0,0],Kg:[0,15,60],ge:.3,Do:50,zo:Pc?Fa:!1,Ao:Pc?Fa:!1,Co:1E3,Fo:1E3,Bo:40,yo:[0,0,-400],li:.1,Am:.5,mi:[.5,1.5],Dd:30,zm:!0},L=Object.assign({},Jc);U.fh=!0;U.gh=!0;U.eh=!1;U.Ja=!0;var $a={dg:3.5,Xb:"images/debug/picsou.png",Ld:45,
Af:.785,Bf:.3925,Cf:5,yf:2,zf:0,xf:0,wo:"images/backgrounds/bg1.jpg",xo:"images/backgrounds/bg1_light.jpg",Cj:1,Dj:2};L.fx=[4,50];L.Bc=[-110,0];L.gj=.25;L.hj=3;L.Sd=[0,-2,20];L.dc=[.95,1];U.Fc=2.1289;U.Uf=1;$a.dg=2.5858;$a.Af=.4388;$a.Bf=.118;$a.Xb="images/debug/hdri2.png";$a.Ld=180;$a.cg=.8065;$a.Cf=5.3887;$a.yf=.5351;$a.zf=-.3019;$a.xf=0;$a.Cj=3.5288;$a.Dj=6.2168;var Ic={element:null,bh:null,ka:null,Bg:null,deviceId:-1,Lb:-1,gd:0,Di:null,fe:-1},Aa=Object.assign({},Ic),bb=null,Nb=-1,Ob=-1,Qc=L.Mm,
yc=window.devicePixelRatio?window.devicePixelRatio:1;var lc={ml:Math.max(Qc[0],yc)/yc,Re:Math.min(yc,Qc[1])};var cb=null;S.onLoad=function(a){S.ready?a():S.Sc.push(a)};S.onHalfLoad=function(a){S.load_model?a():S.Rc.push(a)};S.onWebcamAsk=function(a){S.me=a};S.onContextLost=function(a){S.le=a};S.onWebcamGet=function(a){S.oe=a};S.get_onHalfLoadCallstack=function(){return S.Rc};S.set_size=function(a,c,d){d=d?lc.Re:1;L.width=a*d;L.height=c*d};S.get_videoDevices=function(a){Uc(a)};S.set_videoDevice=function(a){Aa.deviceId=
a};S.set_videoSizes=function(a,c,d,e,l,p){Ya.idealWidth=a;Ya.idealHeight=c;Ya.minWidth=d;Ya.maxWidth=e;Ya.minHeight=l;Ya.maxHeight=p};S.set_loading=function(a,c,d){a&&(L.Ff=!0,L.Ef=a);"number"===typeof c&&(a=new Pb(c),L.Ad=[a.r,a.X,a.b,0]);"number"===typeof d&&(L.Cd=d)};S.set_settings=function(a,c,d){a&&Object.assign(L,a);c&&Object.assign(Ya,c);d&&Object.assign($a,d)};S.get_size=function(){return{width:L.width,height:L.height}};S.get_cv=function(){return ab.ob()};S.set_NNCPath=function(a){L.ke=a};
S.set_materialsPath=function(a){L.Hf=a};S.set_modelsPath=function(a){L.Lf=a};S.destroy=function(){return cb?cb.v():Promise.resolve()};S.init=function(a,c,d,e){cb=Vc();S.jb=d?function(l,p){d(l,p);S.jb=!1}:function(){};S.Lo=cb;a&&(L.aa=a);c&&S.Sc.push(c);cb.bo();if(!ab.m({De:"jeefitCanvas",pa:e,width:Nb,height:Ob,debug:!1,Pf:function(){S.le&&S.le()},premultipliedAlpha:!0}))return S.jb&&S.jb("GL_INCOMPATIBLE","Cannot init Context"),!1;S.me&&S.me();a={width:{min:Ya.minWidth,max:Ya.maxWidth,ideal:Ya.idealWidth},
height:{min:Ya.minHeight,max:Ya.maxHeight,ideal:Ya.idealHeight},facingMode:{ideal:"user"}};c={video:a,audio:!1};Aa.bh=c;a&&-1!==Aa.deviceId&&Yb(c,Aa.deviceId);Cc(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?document.createElement("video"):!1,function(l){S.oe&&S.oe(l);Aa.element=l;l=Aa.element.videoWidth;var p=Aa.element.videoHeight;Aa.Bg={ia:Aa.element,isPot:!1,isFloat:!1,isFlipY:!0};Aa.ka=aa.instance(Aa.Bg);cb.ng(l,p);cb.mf(l,p)&&cb.ug()},function(l){S.jb&&S.jb("WEBCAM_UNAVAILABLE",
l)},c);return!0};JEELIZVTO=S;var Fc=function(){function a(){va.$();b.viewport(0,0,1,1);da.set("s62");e.h(0);Z.l(!1);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,p);c(0<p[0])}var c=null,d=!1,e=null,l=!1,p=null,B={m:function(q){if(l)return!1;e=q;da.qe([{id:"s62",name:"_",g:"uniform sampler2D u37;const vec2 e=vec2(.16,.5);void main(){vec4 a=texture2D(u37,e);float b=step(1.99,a.r);gl_FragColor=vec4(b,0.,0.,1.);}",i:["u37"],precision:"lowp"}]);da.j("s62",[{type:"1i",name:"u37",value:0}]);p=new Uint8Array(4);
return l=!0},start:function(q,v){B.stop();c=v;d=window.setInterval(a,q)},stop:function(){d&&(window.clearInterval(a),d=!1)}};return B}(),pc=pc||{};Pb.prototype={constructor:Pb,r:1,X:1,b:1,set:function(a){a instanceof Pb?this.J(a):"number"===typeof a?Kc(this,a):"string"===typeof a&&Yc(this,a);return this},sn:function(){function a(c,d,e){0>e&&(e+=1);1<e&&--e;return e<1/6?c+6*(d-c)*e:.5>e?d:e<2/3?c+6*(d-c)*(2/3-e):c}return function(c,d,e){c=pc.Math.ip(c,1);d=pc.Math.ye(d,0,1);e=pc.Math.ye(e,0,1);0===
d?this.r=this.X=this.b=e:(d=.5>=e?e*(1+d):e+d-e*d,e=2*e-d,this.r=a(e,d,c+1/3),this.X=a(e,d,c),this.b=a(e,d,c-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.X,this.b)},J:function(a){this.r=a.r;this.X=a.X;this.b=a.b;return this},add:function(a){this.r+=a.r;this.X+=a.X;this.b+=a.b;return this},multiply:function(a){this.r*=a.r;this.X*=a.X;this.b*=a.b;return this},Ba:function(a){this.r*=a;this.X*=a;this.b*=a;return this},lb:function(a,c){void 0===c&&(c=0);this.r=a[c];this.X=
a[c+1];this.b=a[c+2];return this}};var Zc={};nc.prototype={constructor:nc,get x(){return this.B},set x(a){this.B=a},get y(){return this.C},set y(a){this.C=a},get z(){return this.D},set z(a){this.D=a},get w(){return this.O},set w(a){this.O=a},set:function(a,c,d,e){this.B=a;this.C=c;this.D=d;this.O=e;return this},clone:function(){return new this.constructor(this.B,this.C,this.D,this.O)},J:function(a){this.B=a.x;this.C=a.y;this.D=a.z;this.O=a.w;return this},inverse:function(){this.B*=-1;this.C*=-1;this.D*=
-1;this.normalize();return this},cd:function(a){return this.B*a.B+this.C*a.C+this.D*a.D+this.O*a.O},wf:function(){return this.B*this.B+this.C*this.C+this.D*this.D+this.O*this.O},length:function(){return Math.sqrt(this.B*this.B+this.C*this.C+this.D*this.D+this.O*this.O)},normalize:function(){var a=this.length();0===a?(this.D=this.C=this.B=0,this.O=1):(a=1/a,this.B*=a,this.C*=a,this.D*=a,this.O*=a);return this},multiply:function(a,c){return void 0!==c?(console.warn("JETHREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
Lc(this,a,c)):Lc(this,this,a)},lb:function(a,c){void 0===c&&(c=0);this.B=a[c];this.C=a[c+1];this.D=a[c+2];this.O=a[c+3];return this}};Qb.prototype={constructor:Qb,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,c){this.x=a;this.y=c;return this},Ri:function(a){this.x=a;return this},Si:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y)},J:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
c){if(void 0!==c)return console.warn("JETHREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.Tc(a,c);this.x+=a.x;this.y+=a.y;return this},Tc:function(a,c){this.x=a.x+c.x;this.y=a.y+c.y;return this},sub:function(a,c){if(void 0!==c)return console.warn("JETHREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.ab(a,c);this.x-=a.x;this.y-=a.y;return this},ab:function(a,c){this.x=a.x-c.x;this.y=a.y-c.y;return this},multiply:function(a){this.x*=
a.x;this.y*=a.y;return this},Ba:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},Me:function(a){return this.Ba(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},ye:function(a,c){this.x=Math.max(a.x,Math.min(c.x,this.x));this.y=Math.max(a.y,Math.min(c.y,this.y));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},
ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},cd:function(a){return this.x*a.x+this.y*a.y},wf:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.Me(this.length())},lb:function(a,c){void 0===c&&(c=0);this.x=a[c];this.y=a[c+1];return this}};Pa.prototype={constructor:Pa,set:function(a,c,d){this.x=
a;this.y=c;this.z=d;return this},Ri:function(a){this.x=a;return this},Si:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y,this.z)},J:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,c){if(void 0!==c)return console.warn("JETHREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.Tc(a,c);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},Tc:function(a,c){this.x=a.x+c.x;this.y=a.y+c.y;this.z=a.z+c.z;
return this},sub:function(a,c){if(void 0!==c)return console.warn("JETHREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.ab(a,c);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},ab:function(a,c){this.x=a.x-c.x;this.y=a.y-c.y;this.z=a.z-c.z;return this},multiply:function(a,c){if(void 0!==c)return console.warn("JETHREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.x=a.x*c.x,this.y=a.y*c.y,this.z=a.z*c.z,this;
this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},Ba:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},Me:function(a){return this.Ba(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},ye:function(a,c){this.x=Math.max(a.x,Math.min(c.x,this.x));this.y=Math.max(a.y,Math.min(c.y,this.y));
this.z=Math.max(a.z,Math.min(c.z,this.z));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},cd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},wf:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.Me(this.length())},lb:function(a,c){void 0===c&&(c=0);this.x=a[c];this.y=a[c+1];this.z=a[c+2];return this}};Rb.Fj="XYZ";Rb.prototype={constructor:Rb,get x(){return this.B},set x(a){this.B=a},get y(){return this.C},set y(a){this.C=a},get z(){return this.D},set z(a){this.D=a},get order(){return this.Ma},set order(a){this.Ma=a},set:function(a,c,d,e){this.B=a;this.C=c;this.D=d;this.Ma=e||this.Ma;return this},clone:function(){return new this.constructor(this.B,
this.C,this.D,this.Ma)},J:function(a){this.B=a.B;this.C=a.C;this.D=a.D;this.Ma=a.Ma;return this},lb:function(a){this.B=a[0];this.C=a[1];this.D=a[2];void 0!==a[3]&&(this.Ma=a[3]);return this}};vc.prototype={constructor:vc,set:function(a,c){this.min.J(a);this.max.J(c);return this},clone:function(){return(new this.constructor).J(this)},J:function(a){this.min.J(a.min);this.max.J(a.max);return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},size:function(a){return(a||
new Pa).ab(this.max,this.min)},getParameter:function(a,c){return(c||new Pa).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},translate:function(a){this.min.add(a);this.max.add(a);return this}};Sb.prototype={constructor:Sb,set:function(a,c,d,e,l,p,B,q,v,t,y,G,z,x,H,h){var f=this.elements;f[0]=a;f[4]=c;f[8]=d;f[12]=e;f[1]=l;f[5]=p;f[9]=B;f[13]=q;f[2]=v;f[6]=t;f[10]=y;f[14]=G;f[3]=z;f[7]=x;f[11]=H;f[15]=h;return this},clone:function(){return(new Sb).lb(this.elements)},
J:function(a){this.elements.set(a.elements);return this},multiply:function(a,c){return void 0!==c?(console.warn("JETHREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),Nc(this,a,c)):Nc(this,this,a)},Ba:function(a){var c=this.elements;c[0]*=a;c[4]*=a;c[8]*=a;c[12]*=a;c[1]*=a;c[5]*=a;c[9]*=a;c[13]*=a;c[2]*=a;c[6]*=a;c[10]*=a;c[14]*=a;c[3]*=a;c[7]*=a;c[11]*=a;c[15]*=a;return this},setPosition:function(a){var c=this.elements;c[12]=a.x;c[13]=a.y;c[14]=a.z;
return this},translate:function(){console.error("JETHREE.Matrix4: .translate() has been removed.")},scale:function(a){var c=this.elements,d=a.x,e=a.y;a=a.z;c[0]*=d;c[4]*=e;c[8]*=a;c[1]*=d;c[5]*=e;c[9]*=a;c[2]*=d;c[6]*=e;c[10]*=a;c[3]*=d;c[7]*=e;c[11]*=a;return this},lb:function(a){this.elements.set(a);return this}};wc.prototype={constructor:wc,clone:function(){return(new this.constructor).J(this)},J:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.Ka.J(a.Ka);this.color.J(a.color);this.Wb=a.Wb;for(var c=
0,d=a.ee.length;c<d;c++)this.ee[c]=a.ee[c].clone();c=0;for(d=a.Ig.length;c<d;c++)this.Ig[c]=a.Ig[c].clone();return this}};var F=function(){function a(n,g,E){g=n.createShader(g);n.shaderSource(g,E);n.compileShader(g);return n.getShaderParameter(g,n.COMPILE_STATUS)?g:!1}function c(n,g){ca.ja()&&(g.g=g.g.replace(/gl_FragData\[([0-3])\]/g,"gbuf$1"));g.cf=a(n,n.VERTEX_SHADER,g.s,g.name+" VERTEX");g.bf=a(n,n.FRAGMENT_SHADER,g.g,g.name+" FRAGMENT");var E=n.createProgram();n.attachShader(E,g.cf);n.attachShader(E,
g.bf);n.linkProgram(E);return E}function d(n){n.s="#version 300 es\n"+n.s.replace(/varying/g,"out");n.g="#version 300 es\n"+n.g.replace(/varying/g,"in");n.s=n.s.replace(/texture2D\(/g,"texture(");n.g=n.g.replace(/texture2D\(/g,"texture(");n.ca||(n.g=n.g.replace(/void main/g,"out vec4 FragColor;\nvoid main"),n.g=n.g.replace(/gl_FragColor/g,"FragColor"));var g=0,E=[];n.s=n.s.replace(/attribute ([a-z]+[0-4]*) ([_a-zA-Z,0-9\s]+);/g,function(J,u,m){var w="";m.split(",").forEach(function(M){M=M.trim();
w+="layout(location = "+g+") in "+u+" "+M+";\n";E.push(M);++g});return w});n.Kj=E}function e(n){return["float","sampler2D","int"].map(function(g){return"precision "+n+" "+g+";\n"}).join("")}function l(n,g){if(g.Rh)return!1;var E=ca.ja();U.Cp||E||n.enableVertexAttribArray(0);void 0===g.ca&&(g.ca=!1);g.ca&&(g.Qc=E?3:2);g.id=I++;void 0===g.Qc&&(g.Qc=2);void 0===g.precision&&(g.precision="highp");g.ca&&(g.g=(ca.ja()?"precision highp float;\n          layout(location = 0) out vec4 gbuf0;\n          layout(location = 1) out vec4 gbuf1;\n          layout(location = 2) out vec4 gbuf2;\n          layout(location = 3) out vec4 gbuf3;\n":
"#extension GL_EXT_draw_buffers : require\n")+g.g);void 0===g.s&&(g.s="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");var J=e(g.precision);g.g=J+g.g;g.s=J+g.s;E&&3<=g.Qc&&d(g);g.Da&&g.Da.forEach(function(u){g.s=g.s.replace(u.search,u.replace);g.g=g.g.replace(u.search,u.replace)});g.na=c(n,g);g.A={};g.i.forEach(function(u){g.A[u]=n.getUniformLocation(g.na,u)});g.attributes={};g.va=[];g.Hg=0;void 0===g.I&&(g.I=["a0"]);void 0===
g.P&&(g.P=[2]);g.I.forEach(function(u,m){var w=E&&3<=g.Qc?g.Kj.indexOf(u):n.getAttribLocation(g.na,u);g.attributes[u]=w;g.va.push(w);g.Hg+=4*g.P[m]});g.set=function(){f!==g.id&&(-1!==f&&C.H(),f=g.id,C=g,n.useProgram(g.na),g.va.forEach(function(u){0!==u&&n.enableVertexAttribArray(u)}))};g.H=function(){f=-1;g.va.forEach(function(u){0!==u&&n.disableVertexAttribArray(u)})};g.Rh=!0}function p(n,g){l(n,g);g.set();f=-1;return g}function B(){return{name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:["u1"],precision:"highp"}}function q(){k.j("s91",[{type:"1i",name:"u1",value:0}]);k.j("s92",[{type:"1i",name:"u148",value:0}]);k.j("s93",[{type:"1i",name:"u70",value:0}])}function v(){var n="u37 u138 u139 u140 u141 u38 u74".split(" ").concat(x,H);h.s94={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",s:"attribute vec3 a0;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u144,u145,u140,u141,u147;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,p);vec2 f=u81*e;vec3 c=u81*o;vec2 t=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,q).rgb+vec3(u75,0.,0.),u78,c);float u=mix(texture2D(u37,r).r,0.,u81);a.z+=u;mat3 v=s(a);vec3 w=mix(u138,u79,c);float x=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u77,1.,u81);vec2 j=u76/t;vec3 k=a0;float A=max(0.,-a0.z-u140)*u141;k.x+=A*sign(a0.x)*(1.-u81);vec3 l=v*(k+w)*x+b;vec2 B=j*z;vec3 C=vec3(g*B,-j)+l*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(C,1.)),vv0=l,vv1=smoothstep(u144,u145,a0.z);}",
i:["u144","u145"].concat(n),I:["a0"],precision:"highp"};h.s95={name:"_",g:"uniform sampler2D u1;uniform vec3 u142;uniform float u69;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u142,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u142,b,u69),a.a);gl_FragColor=c;}",s:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u140,u141,u147;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,n);vec2 f=u81*e;vec3 c=u81*m;vec2 r=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,o).rgb+vec3(u75,0.,0.),u78,c);float s=mix(texture2D(u37,p).r,0.,u81);a.z+=s;mat3 t=q(a);vec3 u=mix(u138,u79,c);float v=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u77,1.,u81);vec2 j=u76/r;vec3 k=a0;float y=max(0.,-a0.z-u140)*u141;k.x+=y*sign(a0.x)*(1.-u81);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u142"].concat(G,n),I:["a0","a1"],P:[3,2],precision:"lowp"};h.s96={name:"_",g:"uniform vec3 u142;void main(){gl_FragColor=vec4(u142,0.);}",s:"attribute vec3 a0;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u140,u141,u147;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,m);vec2 f=u81*e;vec3 c=u81*l;vec2 q=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,n).rgb+vec3(u75,0.,0.),u78,c);float r=mix(texture2D(u37,o).r,0.,u81);a.z+=r;mat3 s=p(a);vec3 t=mix(u138,u79,c);float u=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u77,1.,u81);vec2 j=u76/q;vec3 k=a0;float x=max(0.,-a0.z-u140)*u141;k.x+=x*sign(a0.x)*(1.-u81);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(A,1.));}",
i:["u142"].concat(n),P:[3],precision:"lowp"};h.s97={name:"_",g:"uniform vec4 u7;varying vec3 vv0;varying float vv1;void main(){float a=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv1);gl_FragColor=vec4(normalize(vv0),a);}",s:"attribute vec3 a0,a2;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u140,u141,u147;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,p);vec2 f=u81*e;vec3 c=u81*o;vec2 t=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,q).rgb+vec3(u75,0.,0.),u78,c);float u=mix(texture2D(u37,r).r,0.,u81);a.z+=u;mat3 h=s(a);vec3 v=mix(u138,u79,c);float w=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 x=mat2(i,j,-j,i);b.xy=x*b.xy;float y=mix(u77,1.,u81);vec2 k=u76/t;vec3 l=a0;float z=max(0.,-a0.z-u140)*u141;l.x+=z*sign(a0.x)*(1.-u81);vec3 A=h*(l+v)*w+b;vec2 B=k*y;vec3 C=vec3(g*B,-k)+A*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(C,1.)),vv0=h*a2*vec3(1.,-1.,-1.),vv1=a0.y;}",
i:["u7","u74"].concat(n),I:["a0","a2"],precision:"highp"};h.s98={name:"_",g:"uniform sampler2D u148;uniform vec4 u7;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=vec3(0.,0.,-1.),c=normalize(vv1),b=texture2D(u148,vv2).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv1:a;float m=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv3);gl_FragColor=vec4(a,m);}",s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u140,u141,u147;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 F=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,r);vec2 f=u81*e;vec3 c=u81*q;vec2 v=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,s).rgb+vec3(u75,0.,0.),u78,c);float w=mix(texture2D(u37,t).r,0.,u81);a.z+=w;mat3 h=u(a);vec3 x=mix(u138,u79,c);float y=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u77,1.,u81);vec2 k=u76/v;vec3 l=a0;float B=max(0.,-a0.z-u140)*u141;l.x+=B*sign(a0.x)*(1.-u81);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv0=a3,vv2=a1,vv3=a0.y;}",
i:["u7","u74","u148"].concat(n),I:["a3","a0","a2","a1"],P:[4,3,3,2],precision:"highp"};h.s99={name:"_",g:"uniform vec4 u107;uniform float u143;void main(){float b=u143;vec4 a=u107;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",s:"attribute vec3 a0;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u140,u141,u147;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,m);vec2 f=u81*e;vec3 c=u81*l;vec2 q=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,n).rgb+vec3(u75,0.,0.),u78,c);float r=mix(texture2D(u37,o).r,0.,u81);a.z+=r;mat3 s=p(a);vec3 t=mix(u138,u79,c);float u=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u77,1.,u81);vec2 j=u76/q;vec3 k=a0;float x=max(0.,-a0.z-u140)*u141;k.x+=x*sign(a0.x)*(1.-u81);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(A,1.));}",
i:["u107","u143"].concat(n),precision:"lowp"};h.s100={name:"_",g:"uniform sampler2D u70;uniform vec4 u107,u71;uniform float u143;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u143;vec4 a=u107,d=texture2D(u70,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u71*e),c=mix(c,l,u71.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
s:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u140,u141,u147;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,n);vec2 f=u81*e;vec3 c=u81*m;vec2 r=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,o).rgb+vec3(u75,0.,0.),u78,c);float s=mix(texture2D(u37,p).r,0.,u81);a.z+=s;mat3 t=q(a);vec3 u=mix(u138,u79,c);float v=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u77,1.,u81);vec2 j=u76/r;vec3 k=a0;float y=max(0.,-a0.z-u140)*u141;k.x+=y*sign(a0.x)*(1.-u81);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u107","u143"].concat(z,n),I:["a0","a1"],P:[3,2],precision:"lowp"};n=["u131","u119","u132"];h.s101={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",s:"attribute vec3 a0;uniform mat4 u131,u119,u132;varying vec3 vv0;varying float vv1;void main(){vec4 a=u132*vec4(a0,1.);gl_Position=u131*u119*a,vv0=a.xyz,vv1=1.;}",i:n,precision:"highp"};h.s102={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(normalize(vv0),1.);}",s:"attribute vec3 a0,a2;uniform mat4 u131,u119,u132;varying vec3 vv0;varying float vv1;void main(){vec4 a=u132*vec4(a2,0.);gl_Position=u131*u119*u132*vec4(a0,1.),vv0=a.xyz,vv1=a0.y;}",
i:n,I:["a0","a2"],precision:"highp"};h.s92={name:"_",g:"uniform sampler2D u148;uniform vec3 u149;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=normalize(vv1+u149),c=normalize(vv2),b=texture2D(u148,vv3).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv2:a,gl_FragColor=vec4(a,1.);}",s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u131,u119,u132;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;void main(){vec4 b=u132*vec4(a2,0.),a=u132*vec4(a0,1.);gl_Position=u131*u119*a,vv0=a3,vv2=b.xyz,vv3=a1,vv1=a.xyz;}",
i:["u148","u149"].concat(n),I:["a0","a2","a1","a3"],precision:"highp"};h.s91={name:"_",g:"uniform sampler2D u1;uniform vec3 u142;uniform float u69;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u142,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u142,b,u69),a.a);gl_FragColor=c;}",s:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u131,u119,u132;varying vec2 vv0;const vec4 f=vec4(0.,0.,5e-4,0.);void main(){gl_Position=u131*u119*u132*vec4(a0,1.)+f,vv0=a1;}",i:["u142"].concat(G,n),I:["a0","a1"],
Da:[{search:"0.0005",replace:xa.ea()?"0.0005":"0.0"}],precision:"lowp"};h.s103={name:"_",g:"uniform vec4 u107;uniform float u143;void main(){float b=u143;vec4 a=u107;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",s:"attribute vec3 a0;uniform mat4 u131,u119,u132;void main(){gl_Position=u131*u119*u132*vec4(a0,1.);}",i:["u107"].concat(n),precision:"highp"};h.s93={name:"_",g:"uniform sampler2D u70;uniform vec4 u107,u71;uniform float u143;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u143;vec4 a=u107,d=texture2D(u70,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u71*e),c=mix(c,l,u71.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
s:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u131,u119,u132;varying vec2 vv0;void main(){gl_Position=u131*u119*u132*vec4(a0,1.),vv0=a1;}",i:["u107"].concat(z,n),I:["a0","a1"],P:[3,2],precision:"highp"}}function t(){for(var n in h)l(b,h[n])}var y=!1,G=["u1","u69"],z=["u70","u71"],x="u72 u73 u74 u75 u76 u77".split(" "),H="u78 u79 u80 u81 u82 u83".split(" "),h={},f=-1,C=null,I=0,k={oa:function(n,g){h[n]=g;y&&l(b,h[n])},Pp:function(n,g){h[n]=g;g.Rh=!1;l(b,h[n])},Ub:function(){return y},m:function(){h.s0=
B();h.s1={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"lowp"};h.s63={name:"_",g:"uniform sampler2D u1,u6;uniform float u7;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){gl_FragColor=vec4(mix(texture2D(u6,vv0).rgb,texture2D(u1,vv0).rgb,u7*f),1.);}",i:["u1","u6","u7"],precision:"highp"};h.s64={name:"_",g:"uniform sampler2D u1,u6;uniform float u7;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){gl_FragColor=mix(texture2D(u6,vv0),texture2D(u1,vv0),u7*f);}",
i:["u1","u6","u7"],precision:"highp"};h.s12={name:"_",g:"uniform sampler2D u1,u84;uniform vec2 u85;uniform float u86,u87;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 b=texture2D(u84,vv0*u85),c=texture2D(u1,vv0*u85);float a=smoothstep(u86,0.,vv0.y);a+=smoothstep(1.-u86,1.,vv0.y),gl_FragColor=pow(mix(c,b,a*f),u87*f);}",i:["u1","u85","u84","u86","u87"]};h.s65={name:"_",g:"uniform sampler2D u1,u84;uniform vec2 u85;uniform float u86,u87;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),f=exp2(c);vec3 g=clamp(b/f,0.,1.);return vec4(g,(c+128.)/256.);}void main(){vec2 a=vv0*u85;float c=floor(a.x),d=mod(c,2.);a.x=mod(a.x,1.),a.x=mix(a.x,1.-a.x,d);vec3 f=texture2D(u84,a).rgb,g=texture2D(u1,a).rgb;float b=smoothstep(u86,0.,vv0.y);b+=smoothstep(1.-u86,1.,vv0.y);vec3 j=mix(g,f,b*h);vec4 k=i(pow(j,u87*h));gl_FragColor=k;}",
i:["u1","u85","u84","u86","u87"],precision:"highp"};h.s66={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);if(a.a<.5)discard;gl_FragColor=a;}",i:["u1"],precision:"lowp"};h.s67={name:"_",g:"uniform sampler2D u1,u88;uniform vec2 u8;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u8*f).rgb+texture2D(u1,a+u8*g).rgb+texture2D(u1,a+u8*h).rgb+texture2D(u1,a+u8*i).rgb;gl_FragColor=vec4(b/5.,1.);}",
i:["u1","u8"],precision:"lowp"};h.s68={name:"_",g:"uniform sampler2D u1,u88,u37;uniform vec2 u8,u89;varying vec2 vv0;const vec3 k=vec3(1.,1.,1.);const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u8*f).rgb+texture2D(u1,a+u8*g).rgb+texture2D(u1,a+u8*h).rgb+texture2D(u1,a+u8*i).rgb;float c=texture2D(u37,vec2(.5,.5)).a,d=u89.x+pow(c,2.)*(u89.y-u89.x);vec3 j=mix(b/5.,texture2D(u88,a).rgb,d);gl_FragColor=vec4(j,1.);}",
i:["u1","u88","u8","u37","u89"],precision:"lowp"};h.s69={name:"_",g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const vec3 f=vec3(.299,.587,.114);const float m=.007813,n=.125,h=8.;void main(){vec2 x=vv0;vec3 o=texture2D(u1,vv0+vec2(-1.,-1.)*u8).xyz,p=texture2D(u1,vv0+vec2(1.,-1.)*u8).xyz,q=texture2D(u1,vv0+vec2(-1.,1.)*u8).xyz,r=texture2D(u1,vv0+vec2(1.,1.)*u8).xyz,s=texture2D(u1,vv0).xyz;float b=dot(o,f),c=dot(p,f),e=dot(q,f),g=dot(r,f),i=dot(s,f),t=min(i,min(min(b,c),min(e,g))),u=max(i,max(max(b,c),max(e,g)));vec2 a;a.x=-(b+c-(e+g)),a.y=b+e-(c+g);float v=max((b+c+e+g)*(.25*n),m),w=1./(min(abs(a.x),abs(a.y))+v);a=min(vec2(h,h),max(vec2(-h,-h),a*w))*u8;vec3 j=.5*(texture2D(u1,vv0+a*-.166667).rgb+texture2D(u1,vv0+a*.166667).rgb),k=j*.5+.25*(texture2D(u1,vv0+a*-.5).rgb+texture2D(u1,vv0+a*.5).rgb);float l=dot(k,f);gl_FragColor=l<t||l>u?vec4(j,1.):vec4(k,1.);}",
i:["u1","u8"],precision:"lowp"};h.s43={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(0.,0.,0.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=g(max(a,f));}",i:["u1"],precision:"highp"};h.s70={name:"_",g:"uniform sampler2D u90,u91;uniform float u92,u93;varying vec2 vv0;void main(){vec3 a=texture2D(u91,vv0).rgb,b=texture2D(u90,vv0).rgb;gl_FragColor=vec4(b*u93+u92*a,1.);}",
i:["u90","u91","u92","u93"],precision:"highp"};h.s71={name:"_",g:"uniform sampler2D u94,u95;uniform float u87;varying vec2 vv0;const int j=8888;const float e=3.141592;const vec2 k=vec2(0.,0.);const vec3 n=vec3(1.,1.,1.),o=vec3(0.,0.,0.);void main(){float p=e*(vv0.x*2.-1.),q=e/2.*(vv0.y*2.-1.),b,c,r,l,m;vec4 d;vec3 f=o;vec2 g=k,a=k;for(int h=0;h<j;h+=1)a.x=float(h),a.y=floor(a.x/64.),d=texture2D(u95,a/64.),b=e*d.r,c=2.*asin(sqrt(.25+d.g*.25)),l=p+c*cos(b),m=q+c*sin(b),g.x=.5+.5*l/e,g.y=.5+m/e,f+=pow(texture2D(u94,g).rgb,u87*n);f/=float(j),gl_FragColor=vec4(f,1.);}",
i:["u94","u95","u87"],precision:"lowp",Da:[{search:"8888",replace:U.bm[ca.T()]}]};h.s72={name:"_",g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);float b=.031496*texture2D(u1,vv0-3.*u8).a+.110236*texture2D(u1,vv0-2.*u8).a+.220472*texture2D(u1,vv0-u8).a+.275591*a.a+.220472*texture2D(u1,vv0+u8).a+.110236*texture2D(u1,vv0+2.*u8).a+.031496*texture2D(u1,vv0+3.*u8).a;gl_FragColor=vec4(a.rgb,4.*b);}",i:["u1","u8"],precision:"lowp"};h.s73={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=.3*pow(a.a,2.);gl_FragColor=vec4(a.rgb+b*f,1.);}",
i:["u1"],precision:"lowp"};h.s74={name:"_",g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){vec4 a=.031496*texture2D(u1,vv0-3.*u8)+.110236*texture2D(u1,vv0-2.*u8)+.220472*texture2D(u1,vv0-u8)+.275591*texture2D(u1,vv0)+.220472*texture2D(u1,vv0+u8)+.110236*texture2D(u1,vv0+2.*u8)+.031496*texture2D(u1,vv0+3.*u8);gl_FragColor=a;}",i:["u1","u8"],precision:"lowp"};h.s75={name:"_",g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0-3.*u8)+texture2D(u1,vv0-2.*u8)+texture2D(u1,vv0-u8)+texture2D(u1,vv0)+texture2D(u1,vv0+u8)+texture2D(u1,vv0+2.*u8)+texture2D(u1,vv0+3.*u8);gl_FragColor=a/7.;}",
i:["u1","u8"],precision:"lowp"};h.s76={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.);const float e=256.;void main(){vec4 b=g;float c=0.;vec2 d;for(float a=0.;a<e;a+=1.)d=vec2((a+.5)/e,vv0.y),b+=texture2D(u1,d),c+=1.;gl_FragColor=b/c;}",i:["u1"],precision:"highp"};h.s77={name:"_",g:"uniform sampler2D u1,u84;varying vec2 vv0;const vec4 h=vec4(1.,1.,1.,1.);const float f=0.,g=.3;void main(){vec4 b=texture2D(u84,vv0),c=texture2D(u1,vv0);float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=mix(c,b,a*h);}",
i:["u1","u84"],precision:"highp"};h.s78={name:"_",g:"uniform sampler2D u1,u84;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);const float f=0.,g=.3;vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),j=exp2(c);vec3 k=clamp(b/j,0.,1.);return vec4(k,(c+128.)/256.);}void main(){vec3 b=texture2D(u84,vv0).rgb,c=texture2D(u1,vv0).rgb;float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=i(mix(c,b,a*h));}",i:["u1","u84"],precision:"highp"};h.s79=
{name:"_",g:"uniform sampler2D u1,u96,u2,u97;uniform vec4 u98;uniform vec2 u99;uniform float u100,u101,u102,u103;varying vec2 vv0;const vec2 g=vec2(1.,1.),h=vec2(.5,.5);const float e=3.141592;void main(){vec4 d=texture2D(u1,vv0),i=texture2D(u96,vec2(1.-vv0.x,vv0.y));float j=step(texture2D(u97,vec2(.25,.5)).r,1.);vec2 a=vv0*2.-g;float k=texture2D(u2,a*u99*.5+h).r,l=atan(a.x,a.y),m=-(mod(u100,2.*e)-e),b=mod(l-m+e,2.*e)-e,n=smoothstep(0.,u101,b),c=.5+u103*(.5-n);c*=(sign(b)+1.)/2.;vec4 o=i+c*u98*k;gl_FragColor=mix(d,o,j*u102);}",
i:"u1 u2 u97 u96 u98 u100 u101 u102 u99 u103".split(" "),precision:"lowp"};var n="u104 u105 u106 u107 u94 u108 u22 u109 u96 u110 u111 u112 u113 u114 u8".split(" ");U.da&&(h.s80={name:"_",g:"uniform sampler2D u104,u105,u106,u107,u94,u108,u115,u96;uniform vec3 u109,u112;uniform vec2 u8;uniform float u22,u116,u111,u113,u110;varying vec2 vv0;const float j=3.141592;const vec3 u=vec3(0.,0.,0.),v=vec3(.299,.587,.114);const float w=2.;vec3 l(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 x(vec3 a){float b=atan(a.x,a.z),c=acos(-a.y);return vec2(.5-.5*b/j,1.-c/j);}vec2 y(vec3 a,float b){vec2 d=vec2(1.,.5)/pow(2.,b),f=vec2(0.,1.-pow(.5,b));float g=atan(a.x,a.z),h=acos(-a.y),c=.5+.5*g/j,i=h/j,k=pow(2.,b)/u110;c=(1.-k)*c;return f+vec2(c,i)*d;}void main(){vec4 c=texture2D(u104,vv0);vec3 k=texture2D(u96,vec2(1.-vv0.x,vv0.y)).rgb;if(c.a<.01){gl_FragColor=vec4(k,0.);return;}float z=c.a;vec3 A=c.rgb,B=A+u109;vec4 b=texture2D(u107,vv0),m=texture2D(u105,vv0);vec3 d=m.rgb;float f=m.a;vec4 n=texture2D(u106,vv0);vec3 C=n.rgb;float o=b.r,D=b.g,p=floor(b.b*255.),g=floor(p/16.),E=(p-16.*g)/16.;g/=16.;float F=b.a;f=1.-(1.-f)*(1.-n.a);vec2 G=x(-d);vec3 q=(1.-F)*l(texture2D(u108,G)),r=normalize(B),h=u,s=reflect(-r,d);vec2 H=y(s,floor(D*u22));float I=acos(-s.z),J=smoothstep(u111-u113,u111+u113,I);h=mix(l(texture2D(u94,H)),u112,J);float a=o+(E-o)*pow(1.-dot(d,-r),g*16.);a=clamp(a,0.,1.);float t=1.-u116*texture2D(u115,vv0).r;h*=pow(t,2.),q*=t;vec3 i=C*mix(q,h,a),M=mix(k,i,z*(f*(1.-a)+a));float K=dot(i,v),L=max(0.,(K-1.)/(w-1.));gl_FragColor=vec4(i,L);}",
i:n.concat(["u115","u116"]),precision:"highp"});h.s81={name:"_",g:"uniform sampler2D u104,u105,u106,u107,u94,u108,u96;uniform vec3 u109,u112;uniform vec2 u8;uniform float u22,u111,u113,u114,u117,u118,u110;varying vec2 vv0;const float g=3.141592;const vec3 G=vec3(0.),m=vec3(1.),H=vec3(.299,.587,.114);const float I=2.;vec3 q(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 J(vec3 a){float b=atan(a.x,-a.z),c=acos(-a.y);return vec2(.5-.5*b/g,1.-c/g);}vec2 K(vec3 a,float e){float b=pow(2.,e);vec2 f=vec2(1.,.5)/b,h=vec2(0.,1.-1./b);float i=atan(a.x,a.z),j=acos(-a.y),c=.5+.5*i/g,k=j/g,l=.5*b/u110;c=(1.-l)*c;return h+vec2(c,k)*f;}float n(vec3 a,vec3 b){return abs(acos(dot(a,b)));}float o(vec2 a){float b=texture2D(u104,a).a;return step(.01,b);}vec3 p(vec2 a){return texture2D(u96,vec2(1.-a.x,a.y)).rgb;}void main(){vec4 h=texture2D(u104,vv0);if(h.a<.01){gl_FragColor=vec4(p(vv0),0.);return;}float i=h.a;vec3 L=h.rgb,M=L+u109;vec4 c=texture2D(u107,vv0),r=texture2D(u105,vv0);vec3 a=r.rgb;float j=r.a;vec4 k=texture2D(u106,vv0);vec3 e=k.rgb;if(i>1.){gl_FragColor=vec4(mix(p(vv0),e,k.a),1.);return;}e=pow(e,u117*m);float s=c.r,N=c.g,O=c.a,t=floor(c.b*255.),l=floor(t/16.),P=(t-16.*l)/16.;l/=16.,j=1.-(1.-j)*(1.-k.a);vec2 u=vv0+vec2(-1.,0.)*u8,v=vv0+vec2(1.,0.)*u8,w=vv0+vec2(0.,1.)*u8,x=vv0+vec2(0.,-1.)*u8;vec3 Q=texture2D(u105,u).rgb,R=texture2D(u105,v).rgb,S=texture2D(u105,w).rgb,T=texture2D(u105,x).rgb;float U=n(a,Q)*o(u),V=n(a,R)*o(v),W=n(a,S)*o(w),X=n(a,T)*o(x),Y=2.*max(max(U,V),max(W,X)),Z=1.2*clamp(Y/g,0.,1.),_=max(N,Z);vec2 aa=J(a);vec3 ba=q(texture2D(u108,aa)),ca=(1.-O)*ba,y=normalize(M),z=G,A=reflect(-y,a);float da=floor(_*u22);vec2 ea=K(A,da);float fa=acos(-A.z),ga_=smoothstep(u111-u113,u111+u113,fa);vec3 ha=q(texture2D(u94,ea));z=mix(ha,u112,ga_*u114);float b=s+(P-s)*pow(1.+dot(a,y),l*15.);b=clamp(b,0.,1.);vec2 B=vv0;vec3 C=refract(vec3(0.,0.,-1.),a,.666667);float ia=smoothstep(.1,.3,length(C.xy)),D=sqrt(u8.y/u8.x),ja=smoothstep(.3,.8,i);B+=ja*C.xy*vec2(1./D,D)*ia*.03;vec3 ka=e*mix(ca,z,b);float E=i*(j*(1.-b)+b);vec3 f=mix(p(B),pow(ka,m/u117),E);float F=dot(f,H),la=max(0.,(F-1.)/(I-1.));f=mix(F*m,f,mix(1.,u118,E)*m),gl_FragColor=vec4(f,la);}",
i:n.concat(["u117","u118"]),precision:"highp"};U.da&&(h.s82={name:"_",g:"uniform sampler2D u104,u105;uniform mat4 u119;uniform vec2 u120,u8,u121;uniform float u122,u123,u124,u125,u126,u127,u128,u129,u116;varying vec2 vv0;const float PI=3.141593,HALFPI=1.570796,N=8888.8;void main(){vec2 uvt=vv0+u121;vec4 pos=texture2D(u104,uvt);if(pos.a<.01){gl_FragColor=vec4(0.,0.,0.,1.);return;}vec3 co0=pos.rgb;float c=cos(u122),s=sin(u122);vec3 no0=texture2D(u105,uvt).rgb;float zv=(u119*vec4(co0,1.)).z;vec3 co;vec2 scale=u120/abs(zv),uv,duv=u8*vec2(c,s)*scale;vec3 dp,dpn;float dzMax=0.,angleMin=0.,angle;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u104,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u128,u129,length(dp)),angleMin=max(angleMin,angle),dzMax=max(dzMax,sin(angle)*length(dp));float angleMinInv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u104,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u128,u129,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMinInv=max(angleMinInv,angle);duv=u8*vec2(s,c)*scale;float angleMin2=0.;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u104,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u128,u129,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2=max(angleMin2,angle);float angleMin2Inv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u104,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u128,u129,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2Inv=max(angleMin2Inv,angle);float omegaMin=PI/4.*(angleMin+angleMinInv)*(angleMin2+angleMin2Inv),dzFactor=clamp(dzMax/u125,u126,1.),ao=dzFactor*clamp(u124*omegaMin*u127,0.,u116);gl_FragColor=vec4(ao,ao,ao,u123);}",
i:"u104 u105 u124 u123 u122 u8 u130 u125 u126 u127 u128 u129 u119 u120 u116".split(" "),Da:[{search:"8888.8",replace:U.dk[ca.T()].toFixed(1)}],precision:"lowp"},h.s83={name:"_",g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4),j=vec2(-1.9,.9),k=vec2(.9,1.9),l=vec2(-.9,-1.9),m=vec2(1.9,-.9);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u8*f)+texture2D(u1,a+u8*g)+texture2D(u1,a+u8*h)+texture2D(u1,a+u8*i);b+=texture2D(u1,a+u8*j)+texture2D(u1,a+u8*k)+texture2D(u1,a+u8*l)+texture2D(u1,a+u8*m),gl_FragColor=b/9.;}",
i:["u1","u8"],precision:"lowp"});h.s84={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(vv0,1.);}",s:"attribute vec3 a0;uniform mat4 u131,u119,u132;varying vec3 vv0;void main(){vec4 a=u131*u119*u132*vec4(a0,1.);gl_Position=a,vv0=a.xyz/a.w;}",i:["u131","u119","u132"],precision:"lowp"};h.s85={name:"_",g:"uniform sampler2D u133,u108,u95;uniform mat4 u131,u134;uniform vec2 u135;uniform float u136;varying vec2 vv0;const float n=8888.8,o=9999.9,p=25.,v=50.,w=1.2,e=3.141592;const vec4 x=vec4(0.,0.,0.,0.),A=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);vec2 y(vec3 a){float b=atan(a.x,a.z),c=acos(a.y);return vec2(.5-.5*b/e,1.-c/e);}void main(){float d,a,q;vec2 z=vec2(vv0.x,1.-vv0.y),b;vec3 r=vec3(u135*(z-f),0.),B=vec3(u134*vec4(r,1.)),g,s;vec4 t=x,h,c,u;vec3 i;int j;for(float k=0.;k<n;k+=1.){b.x=k,b.y=floor(b.x/64.),c=texture2D(u95,b/64.),d=e*c.r,a=2.*asin(sqrt(.25+c.g*.25)),g=vec3(cos(d)*sin(a),sin(d)*sin(a),-cos(a)),q=p+(.5+.5*c.b)*(v-p),j=0;for(float l=0.;l<=o;l+=1.){u=vec4(r+g*q*pow(l/o,w),1.),h=u131*u,i=h.xyz/h.w;if(texture2D(u133,f+f*i.xy).z<i.z){j=1;break;}}if(j==1)continue;s=vec3(u134*vec4(g,0.)),t+=texture2D(u108,y(s));}gl_FragColor=vec4(u136*t.rgb/n,1.);}",
i:"u133 u108 u95 u131 u134 u135 u136".split(" "),Da:[{search:"8888.8",replace:U.Wn[ca.T()].toFixed(1)},{search:"9999.9",replace:U.Xn[ca.T()].toFixed(1)}],precision:"lowp"};h.s86={name:"_",g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){vec4 a=.285714*texture2D(u1,vv0-u8)+.428571*texture2D(u1,vv0)+.285714*texture2D(u1,vv0+u8);gl_FragColor=a;}",i:["u1","u8"],precision:"lowp"};h.s87={name:"_",g:"uniform sampler2D u1,u137;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
s:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u131,u119;varying vec2 vv0;void main(){vec4 a=u131*u119*vec4(a0,1.);gl_Position=a,vv0=a1;}",i:["u131","u119","u1"],I:["a0","a1"],precision:"lowp"};if(ca.Z()){n="u37 u138 u139 u140 u141 u38 u107 u142 u143 u7 u144 u145 u74".split(" ").concat(x,H);ca.bi()||(h.s88={name:"_",s:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,0.,0.),gl_FragData[2]=vec4(0.,0.,0.,0.),gl_FragData[3]=vec4(0.,0.,0.,0.);}",
i:[],precision:"lowp",ca:!0});h.s89={name:"_",s:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform vec4 color;void main(){gl_FragData[0]=color,gl_FragData[1]=color,gl_FragData[2]=color,gl_FragData[3]=color;}",i:["color"],ca:!0};h.s90NNGLcolor={name:"_",g:"uniform vec4 u107,u7;uniform vec3 u142;uniform float u143;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv3),c=u143;vec4 a=u107;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u142,0.),gl_FragData[3]=a;}",
s:"attribute vec3 a0,a2;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u144,u145,u140,u141,u147;varying vec3 vv0,vv1;varying float vv2,vv3;const vec2 e=vec2(1.);const vec3 r=vec3(1.);const vec2 F=vec2(-1.,1.),s=vec2(.16,.5),t=vec2(.5,.5),u=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 v(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,s);vec2 f=u81*e;vec3 c=u81*r;vec2 w=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,t).rgb+vec3(u75,0.,0.),u78,c);float x=mix(texture2D(u37,u).r,0.,u81);a.z+=x;mat3 h=v(a);vec3 y=mix(u138,u79,c);float z=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 A=mat2(i,j,-j,i);b.xy=A*b.xy;float B=mix(u77,1.,u81);vec2 k=u76/w;vec3 l=a0;float C=max(0.,-a0.z-u140)*u141;l.x+=C*sign(a0.x)*(1.-u81);vec3 m=h*(l+y)*z+b;vec2 D=k*B;vec3 E=vec3(g*D,-k)+m*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv2=smoothstep(u144,u145,a0.z),vv0=m,vv3=a0.y;}",
i:n,I:["a0","a2"],P:[3,3],ca:!0};h.s90NNGLtexture={name:"_",g:"uniform sampler2D u1;uniform vec4 u107,u7;uniform vec3 u142;uniform float u143,u69;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv4),d=u143;vec4 b=u107;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u142,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u142,l,u69),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
s:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u144,u145,u140,u141,u147;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,t);vec2 f=u81*e;vec3 c=u81*s;vec2 x=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,u).rgb+vec3(u75,0.,0.),u78,c);float y=mix(texture2D(u37,v).r,0.,u81);a.z+=y;mat3 h=w(a);vec3 z=mix(u138,u79,c);float A=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u77,1.,u81);vec2 k=u76/x;vec3 l=a0;float D=max(0.,-a0.z-u140)*u141;l.x+=D*sign(a0.x)*(1.-u81);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u144,u145,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:n.concat(G),I:["a0","a2","a1"],P:[3,3,2],ca:!0};h.s90NNGLtextureNormalMap={name:"_",g:"uniform vec4 u107,u7;uniform vec3 u142;uniform sampler2D u1,u148;uniform float u143,u69;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u148,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u143;vec4 c=u107;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u142,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u142,t,u69),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u144,u145,u140,u141,u147;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,u);vec2 f=u81*e;vec3 c=u81*t;vec2 y=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,v).rgb+vec3(u75,0.,0.),u78,c);float z=mix(texture2D(u37,w).r,0.,u81);a.z+=z;mat3 h=x(a);vec3 A=mix(u138,u79,c);float B=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u77,1.,u81);vec2 k=u76/y;vec3 l=a0;float E=max(0.,-a0.z-u140)*u141;l.x+=E*sign(a0.x)*(1.-u81);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u144,u145,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:n.concat(G,["u148"]),I:["a3","a0","a2","a1"],P:[4,3,3,2],ca:!0};h.s90NNGLtextureParamsMap={name:"_",g:"uniform sampler2D u1,u70;uniform vec4 u107,u7,u71;uniform vec3 u142;uniform float u143,u69;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv4),d=u143;vec4 a=u107,e=texture2D(u70,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u71*f),d=mix(d,r,u71.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u142,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u142,u,u69),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
s:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u144,u145,u140,u141,u147;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,t);vec2 f=u81*e;vec3 c=u81*s;vec2 x=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,u).rgb+vec3(u75,0.,0.),u78,c);float y=mix(texture2D(u37,v).r,0.,u81);a.z+=y;mat3 h=w(a);vec3 z=mix(u138,u79,c);float A=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u77,1.,u81);vec2 k=u76/x;vec3 l=a0;float D=max(0.,-a0.z-u140)*u141;l.x+=D*sign(a0.x)*(1.-u81);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u144,u145,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:n.concat(G,z),I:["a0","a2","a1"],P:[3,3,2],ca:!0};h.s90NNGLtextureNormalParamsMap={name:"_",g:"uniform sampler2D u1,u148,u70;uniform vec4 u107,u7,u71;uniform vec3 u142;uniform float u143,u69;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u148,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u143;vec4 a=u107,f=texture2D(u70,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u71*l),e=mix(e,z,u71.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u142,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u142,C,u69),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u146;uniform float u139,u144,u145,u140,u141,u147;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,u);vec2 f=u81*e;vec3 c=u81*t;vec2 y=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,v).rgb+vec3(u75,0.,0.),u78,c);float z=mix(texture2D(u37,w).r,0.,u81);a.z+=z;mat3 h=x(a);vec3 A=mix(u138,u79,c);float B=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u77,1.,u81);vec2 k=u76/y;vec3 l=a0;float E=max(0.,-a0.z-u140)*u141;l.x+=E*sign(a0.x)*(1.-u81);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u144,u145,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:n.concat(G,["u148"],z),I:["a3","a0","a2","a1"],P:[4,3,3,2],ca:!0};n="u131 u119 u132 u107 u142 u143 u7".split(" ");h.s90color={name:"_",g:"uniform vec4 u107,u7;uniform vec3 u142;uniform float u143;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv3),c=u143;vec4 a=u107;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u142,0.),gl_FragData[3]=a;}",s:"attribute vec3 a0,a2;uniform mat4 u131,u119,u132;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){vec4 a=u132*vec4(a0,1.),b=u132*vec4(a2,0.);gl_Position=u131*u119*a,vv0=a.xyz,vv1=b.xyz,vv2=1.,vv3=a0.y;}",
i:n,I:["a0","a2"],ca:!0};h.s90={name:"_",g:"uniform sampler2D u1;uniform vec4 u107,u7;uniform vec3 u142;uniform float u143,u69;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv4),d=u143;vec4 b=u107;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u142,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u142,l,u69),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
s:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u131,u119,u132;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u132*vec4(a0,1.),b=u132*vec4(a2,0.);gl_Position=u131*u119*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:n.concat(G),I:["a0","a2","a1"],ca:!0};var g=["u148","u149"];h.s90NormalMap={name:"_",g:"uniform sampler2D u1,u148;uniform vec4 u107,u7;uniform vec3 u149,u142;uniform float u143,u69;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u148,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u143;vec4 c=u107;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u142,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u142,t,u69),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u131,u119,u132;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u132*vec4(a0,1.),b=u132*vec4(a2,0.);gl_Position=u131*u119*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:n.concat(G,g),I:["a0","a2","a1","a3"],ca:!0};h.s90ParamsMap={name:"_",g:"uniform sampler2D u1,u70;uniform vec4 u107,u7,u71;uniform vec3 u142;uniform float u143,u69;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv4),d=u143;vec4 a=u107,e=texture2D(u70,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u71*f),d=mix(d,r,u71.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u142,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u142,u,u69),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
s:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u131,u119,u132;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u132*vec4(a0,1.),b=u132*vec4(a2,0.);gl_Position=u131*u119*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:n.concat(G,z),I:["a0","a2","a1"],ca:!0};h.s90NormalParamsMap={name:"_",g:"uniform sampler2D u1,u148,u70;uniform vec4 u107,u7,u71;uniform vec3 u149,u142;uniform float u143,u69;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u148,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u143;vec4 a=u107,f=texture2D(u70,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u71*l),e=mix(e,z,u71.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u142,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u142,C,u69),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u131,u119,u132;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u132*vec4(a0,1.),b=u132*vec4(a2,0.);gl_Position=u131*u119*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:n.concat(G,g,z),I:["a0","a2","a1","a3"],ca:!0}}else v();t();n=[{type:"1i",name:"u1",value:0}];k.j("s0",n);k.j("s1",n);k.j("s63",[{type:"1i",name:"u6",value:1}].concat(n));k.j("s64",[{type:"1i",name:"u6",
value:1}].concat(n));k.j("s12",[{type:"1i",name:"u84",value:1}].concat(n));k.j("s65",[{type:"1i",name:"u84",value:1}].concat(n));k.j("s66",n);k.j("s67",n);k.j("s68",[{type:"1i",name:"u88",value:1},{type:"1i",name:"u37",value:2}].concat(n));k.j("s69",n);k.j("s43",n);k.j("s70",[{type:"1i",name:"u90",value:0},{type:"1i",name:"u91",value:1}]);k.j("s71",[{type:"1i",name:"u94",value:0},{type:"1i",name:"u95",value:1}]);k.j("s72",n);k.j("s73",n);k.j("s74",n);k.j("s75",n);k.j("s76",n);k.j("s77",[{type:"1i",
name:"u84",value:1}].concat(n));k.j("s78",[{type:"1i",name:"u84",value:1}].concat(n));U.da&&(k.j("s82",[{type:"1i",name:"u104",value:0},{type:"1i",name:"u105",value:1},{type:"1f",name:"u125",value:U.Sj},{type:"1f",name:"u126",value:U.Tj},{type:"1f",name:"u127",value:U.ek},{type:"1f",name:"u128",value:U.Wj},{type:"1f",name:"u129",value:U.Xj},{type:"1f",name:"u124",value:1},{type:"1f",name:"u116",value:1}]),k.j("s83",n));g=[{type:"1i",name:"u104",value:0},{type:"1i",name:"u105",value:1},{type:"1i",
name:"u106",value:2},{type:"1i",name:"u94",value:3},{type:"1i",name:"u108",value:4},{type:"1i",name:"u107",value:6},{type:"1i",name:"u96",value:7},{type:"1f",name:"u114",value:0},{type:"1f",name:"u111",value:0},{type:"1f",name:"u113",value:0}];U.da&&k.j("s80",g.concat([{type:"1f",name:"u116",value:U.Vj[ca.T()]},{type:"1i",name:"u115",value:5}]));k.j("s81",g.concat([{type:"1f",name:"u117",value:U.Fc},{type:"1f",name:"u118",value:U.Uf}]));k.j("s85",[{type:"1i",name:"u133",value:0},{type:"1i",name:"u108",
value:1},{type:"1i",name:"u95",value:2},{type:"1f",name:"u136",value:U.Vn}]);k.j("s86",n);k.j("s87",n);k.j("s79",[{type:"1i",name:"u2",value:1},{type:"1i",name:"u97",value:2},{type:"1i",name:"u96",value:3},{type:"1f",name:"u102",value:1},{type:"2f",name:"u99",value:[0,0]}].concat(n));ca.Z()?(k.j("s90",n),k.j("s90NormalMap",[{type:"1i",name:"u148",value:1}].concat(n)),k.j("s90ParamsMap",[{type:"1i",name:"u70",value:1}].concat(n)),k.j("s90NormalParamsMap",[{type:"1i",name:"u148",value:1},{type:"1i",
name:"u70",value:2}].concat(n))):q();y=!0},Jn:function(){v();t();q()},pd:function(){return C.id},$e:function(){return x},af:function(){return H},set:function(n){mb.dj(k);h[n].set()},ub:function(n){return p(n,B())},Od:function(n){return p(n,{name:"_",g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"})},Mn:function(n){return p(n,{name:"_",g:"const vec4 d=vec4(.5,.5,.5,.5);void main(){gl_FragData[0]=d,gl_FragData[1]=d,gl_FragData[2]=d,gl_FragData[3]=d;}",i:[],precision:"highp",
ca:!0})},H:function(){-1!==f&&C.H()},Qd:function(){var n=0;C.va.forEach(function(g,E){E=C.P[E];b.vertexAttribPointer(g,E,b.FLOAT,!1,C.Hg,n);n+=4*E})},$b:function(){k.ac(b)},ac:function(n){n.vertexAttribPointer(C.va[0],2,n.FLOAT,!1,8,0)},Tp:function(){b.vertexAttribPointer(C.attributes.a0,3,b.FLOAT,!1,12,0)},La:function(){b.vertexAttribPointer(C.attributes.a0,3,b.FLOAT,!1,32,0)},Xa:function(){b.vertexAttribPointer(C.attributes.a0,3,b.FLOAT,!1,24,0)},Xi:function(){b.vertexAttribPointer(C.attributes.a2,
3,b.FLOAT,!1,32,12)},Yi:function(){b.vertexAttribPointer(C.attributes.a2,3,b.FLOAT,!1,24,12)},Ic:function(){b.vertexAttribPointer(C.attributes.a1,2,b.FLOAT,!1,32,24)},Up:function(){b.vertexAttribPointer(C.attributes.a0,3,b.FLOAT,!1,20,0);b.vertexAttribPointer(C.attributes.a1,2,b.FLOAT,!1,20,12)},zn:function(){b.vertexAttribPointer(C.attributes.a0,3,b.FLOAT,!1,32,0);b.vertexAttribPointer(C.attributes.a2,3,b.FLOAT,!1,32,12);b.vertexAttribPointer(C.attributes.a1,2,b.FLOAT,!1,32,24)},An:function(){b.vertexAttribPointer(C.attributes.a0,
3,b.FLOAT,!1,32,0);b.vertexAttribPointer(C.attributes.a2,3,b.FLOAT,!1,32,12)},Bn:function(){b.vertexAttribPointer(C.attributes.a0,3,b.FLOAT,!1,24,0);b.vertexAttribPointer(C.attributes.a2,3,b.FLOAT,!1,24,12)},Md:function(){b.vertexAttribPointer(C.attributes.a3,4,b.FLOAT,!1,16,0)},Pd:function(n,g){b.uniform1i(C.A[n],g)},G:function(n,g){b.uniform1f(C.A[n],g)},N:function(n,g,E){b.uniform2f(C.A[n],g,E)},ej:function(n,g){b.uniform2fv(C.A[n],g)},lg:function(n,g,E,J){b.uniform3f(C.A[n],g,E,J)},mg:function(n,
g){b.uniform3fv(C.A[n],g)},xa:function(n,g){b.uniform4fv(C.A[n],g)},Qn:function(n,g){b.uniformMatrix2fv(C.A[n],!1,g)},Rn:function(n,g){b.uniformMatrix3fv(C.A[n],!1,g)},Jc:function(n,g){b.uniformMatrix4fv(C.A[n],!1,g)},j:function(n,g){k.set(n);g.forEach(function(E){switch(E.type){case "4f":b.uniform4fv(C.A[E.name],E.value);break;case "3f":b.uniform3fv(C.A[E.name],E.value);break;case "2f":b.uniform2fv(C.A[E.name],E.value);break;case "1f":b.uniform1f(C.A[E.name],E.value);break;case "1i":b.uniform1i(C.A[E.name],
E.value);break;case "mat2":b.uniformMatrix2fv(C.A[E.name],!1,E.value);break;case "mat4":b.uniformMatrix4fv(C.A[E.name],!1,E.value)}})},K:function(){for(var n in h){var g=h[n];b.detachShader(g.na,g.cf);b.detachShader(g.na,g.bf);b.deleteShader(g.cf);b.deleteShader(g.bf);b.deleteProgram(g.na)}},v:function(){b.disableVertexAttribArray(0);k.H();k.K();I=0;y=!1;C=null;f=-1}};return k}(),Ra=function(){var a={},c=[],d=!1,e=0,l=0,p=-1,B=-1,q=-1,v=1,t=null,y=!1,G=null,z=!1,x=!1,H=!1,h=!1,f=!1,C=!1,I=!1,k=!1,
n=null,g=null,E=-1,J=-1,u=null,m=-1,w,M=null,N=null,K=null,R=null,ea=null,ja=null,W=null,A=[{type:"1f",name:"u81",value:0},{type:"1f",name:"u144",value:0},{type:"1f",name:"u145",value:0},{type:"1f",name:"u76",value:1},{type:"1f",name:"u73",value:0},{type:"1f",name:"u83",value:1}],T={m:function(r,P){a.og=r;ca.Dg();zc.Qe();Jb.Qe(r.ge);p=r.Te;B=r.Eo;q=r.Mf;v=r.fe;var ba=[{type:"1f",name:"u76",value:p},{type:"1f",name:"u73",value:q},{type:"1f",name:"u77",value:r.qn},{type:"mat4",name:"u72",value:r.Um},
{type:"2f",name:"u38",value:r.Ej}];r.Cg=ba;var Q=[{type:"3f",name:"u78",value:[0,0,0]},{type:"3f",name:"u79",value:r.Lg},{type:"3f",name:"u80",value:r.Kg},{type:"1f",name:"u81",value:0},{type:"1f",name:"u82",value:r.ge},{type:"1f",name:"u83",value:1}];r.vj=Q;T.Xl(r,P);d||void 0!==r.Ca||(r.Ca=[0,0,120]);k=I=L.df;if(!d&&I){P=1*ca.qb();var Y=1*ca.pb(),oa={isLinear:!0,isPot:!1,width:P,height:Y};n=aa.instance(oa);g=aa.instance(oa);E=1/P;J=1/Y}ba=[{type:"1i",name:"u37",value:1},{type:"3f",name:"u74",value:r.Ca},
{type:"1f",name:"u140",value:r.Wc},{type:"1f",name:"u141",value:r.Fb}].concat(ba,Q);t=r.Bc;Q=[{type:"1f",name:"u144",value:t[0]},{type:"1f",name:"u145",value:t[1]}];ca.Z()?(P=[{type:"1i",name:"u1",value:0}],Y=[{type:"1i",name:"u148",value:2}],F.j("s90NNGLcolor",ba.concat(Q)),F.j("s90NNGLtexture",[].concat(P,ba,Q)),F.j("s90NNGLtextureNormalMap",[].concat(P,Y,ba,Q)),F.j("s90NNGLtextureParamsMap",[{type:"1i",name:"u70",value:2}].concat(P,ba,Q)),F.j("s90NNGLtextureNormalParamsMap",[{type:"1i",name:"u70",
value:3}].concat(P,Y,ba,Q))):(F.j("s94",ba.concat(Q)),F.j("s95",[{type:"1i",name:"u1",value:0}].concat(ba)),F.j("s96",ba),F.j("s97",ba),F.j("s98",ba.concat([{type:"1i",name:"u148",value:0}])),F.j("s99",ba),F.j("s100",ba.concat([{type:"1i",name:"u70",value:0}])));F.j("s68",[{type:"2f",name:"u89",value:r.vg}]);F.j(U.da?"s80":"s81",[{type:"1f",name:"u111",value:r.se},{type:"3f",name:"u112",value:r.$f},{type:"1f",name:"u113",value:r.Ee},{type:"1f",name:"u114",value:1},{type:"3f",name:"u109",value:r.Ij}]);
if(w=r.Bd)u=r.ym,m=r.Cd,F.j("s79",[{type:"4f",name:"u98",value:r.Ad},{type:"1f",name:"u101",value:r.Df},{type:"2f",name:"u99",value:r.xm},{type:"1f",name:"u103",value:Math.sign(m)}]);c.forEach(function(Ia){Ia.Ti(r)});d=!0},Yb:function(r){x&&ta.la.Yb(r);h&&ta.ra.Yb(r)},Xl:function(r,P){void 0!==ta.la&&r.cc&&ca.Z()&&(ta.la.m(r),z=!0,P.push(function(ba){ta.la.Yb(ba);x=!H}));void 0!==ta.ra&&r.ad&&(ta.ra.m(r),P.push(function(ba){ta.ra.Yb(ba);h=!0}));void 0!==ta.kc&&r.ve&&(ta.kc.m(r),C=f=!0);void 0!==ta.ib&&
(ta.ib.m(r),G=ta.ib.$l({width:r.wc,height:2*r.wc,depth:1.5*r.wc,il:-r.hf,Pa:r.ff,Mk:r.gf}),y=!0)},On:function(r,P,ba,Q){r&&(W=r,z&&ta.la.Zb(r),h&&ta.ra.Zb(r),f&&ta.kc.Zb(r),c.forEach(function(Y){Y.Zb(r)}));ba&&(R=ba);Q&&(ea=Q)},vb:function(r){ca.Z()?(F.j("s90NNGLcolor",r),F.j("s90NNGLtexture",r),F.j("s90NNGLtextureNormalMap",r),F.j("s90NNGLtextureParamsMap",r),F.j("s90NNGLtextureNormalParamsMap",r)):(F.j("s94",r),F.j("s95",r),F.j("s96",r),F.j("s97",r),F.j("s98",r),F.j("s99",r),F.j("s100",r))},Za:function(r,
P,ba){var Q=[r[0]+P[0],r[1]+P[1],r[2]+P[2]];Q=[Q[0]+ba[0],Q[1]+ba[1],Q[2]+ba[2]];a.Jd=Q;a.Fm=P;a.so=ba;T.vb([{type:"3f",name:"u138",value:Q}]);ca.Z()&&(z&&ta.la.Za(r,P,ba),h&&ta.ra.Za(Q));y&&ta.ib.Za(r)},$a:function(r,P,ba){var Q=r*P*ba;a.Gm=P;a.to=ba;a.Rl=r;T.vb([{type:"1f",name:"u139",value:Q}]);ca.Z()&&(z&&ta.la.$a(r*P,ba),h&&ta.ra.$a(Q));y&&ta.ib.$a(r)},Ni:function(){T.Za(a.Jd,a.Fm,a.so);T.$a(a.Rl,a.Gm,a.to);T.bj(a.rx);T.m(a.og);T.Zi(a.mk,a.Fb)},bj:function(r){a.rx=r;T.vb([{type:"1f",name:"u75",
value:r}]);ca.Z()&&(z&&ta.la.jg(r),h&&ta.ra.jg(r))},Zi:function(r,P){a.mk=r;a.Fb=P;T.vb([{type:"1f",name:"u140",value:r},{type:"1f",name:"u141",value:P}])},Hn:function(r){t=r;0===e&&T.vb([{type:"1f",name:"u144",value:t[0]},{type:"1f",name:"u145",value:t[1]}])},Ya:function(r){function P(){y&&ta.ib.toggle(!1);w&&F.j("s79",[{type:"1f",name:"u102",value:0}])}0>=r?(l=0,0!==e&&(e=0,Jb.kn(),y&&ta.ib.toggle(!0),w&&F.j("s79",[{type:"1f",name:"u102",value:1}]))):1<=r?(l=1,1!==e&&(e=1,Jb.kj(!0)),P()):(l=r,2!==
e&&(Jb.kj(!1),e=2,P()));F.j("s81",[{type:"1f",name:"u114",value:1-r}]);A[0].value=l;A[1].value=t[0]*(1-r)+-300*r;A[2].value=t[1]*(1-r)+-300*r;A[3].value=p*(1-r)+r*B;A[4].value=q*(1-r);A[5].value=1-r+r*v;x&&ta.la.kg(l,A);h&&ta.ra.kg(l,A);T.vb(A)},fl:function(r){W.h(1);r.forEach(function(P){P.al()});y&&G.V()},rm:function(){return 1===e},te:function(r){W.Na(r)},Nj:function(r){c.push(r)},tg:function(r){H=!r;x=r&&z},sg:function(r){C=r&&f},gg:function(r){h&&ca.Z()&&ta.ra.Sn(r)},wb:function(r){ca.Z()&&(z&&
ta.la.wb(r),h&&ta.ra.wb(r))},cl:function(r,P){if(!k)return!1;n.M();r.h(0);F.set("s72");F.N("u8",0,J);Z.l(!1,!1);g.o();n.h(0);F.N("u8",E,0);Z.l(!1,!1);F.set("s73");P.M();g.h(0);Z.l(!1,!1);return!0},jj:function(r){k=r&&I},resize:function(r,P,ba){I&&(r*=ba,P*=ba,n.resize(r,P),g.resize(r,P),E=1/r,J=1/P)},eg:function(r,P){var ba=r.L(),Q=r.Y(),Y={width:ba,height:Q,isPot:!1};z&&(K&&K.remove(),K=aa.instance(Y));M=va.instance({width:ba,height:Q});f||h?(ta.kc.fg(ba,Q),N&&N.remove(),N=aa.instance(Y)):N=r;z&&
ta.la.fg(ba,Q);P&&(ja&&ja.remove(),ja=aa.instance(Y))},Zk:function(r){var P=null;switch(e){case 0:P=r;break;case 2:M.bind(!1,!0);ja.o();F.set("s63");F.G("u7",l);r.h(1);ea.h(0);Z.l(!0,!0);P=ja;break;case 1:P=ea}if(!x||1===e||!ca.Z())return P;P.Na(0);C&&ta.kc.V(P,N);M.bind(!1,!C);h&&(C?P.h(0):(N.o(),F.set("s1"),Z.l(!0,!0)),ta.ra.V());N.h(0);R.Na(2);ta.la.V();K.o();F.set("s1");C||h?N.h(0):P.h(0);Z.l(!0,!U.da);ta.la.add();return K},dl:function(r,P){if(!w)return!1;F.set("s79");F.G("u100",r*m);u.h(1);Ra.te(2);
N?N.h(3):P.h(3);return!0},v:function(){d=!1;l=e=0;q=B=p=-1;v=1;t=null;y=!1;G=null;C=f=h=H=x=z=!1;ta.la.v();ta.hb.v()}};return T}(),sa=function(){function a(){q.forEach(function(r){r.gl(K)})}function c(){q.forEach(function(r){r.ed(K)})}function d(){q.forEach(function(r){r.el(K)})}function e(){q.forEach(function(r){r.fd(K)})}function l(){K?Ra.fl(q):q.forEach(function(r){r.bl()})}function p(){w&&clearTimeout(w);w=setTimeout(function(){w=g=!1},16)}function B(r){r()}var q=[],v=[],t={ga_:!1,position:!1,
sb:!1},y=[],G=[],z=null,x=0,H=null,h=null,f=null,C=null,I=!1,k=!1,n=!1,g=!1,E=!1,J=!1,u=null,m=null,w=null,M=null,N=!1,K=!1,R=!1,ea=!1,ja=!1,W=!1,A=!1,T={m:function(){b.enable(b.DEPTH_TEST);b.depthFunc(b.LEQUAL);b.clearDepth(1);U.Kk?(b.enable(b.CULL_FACE),b.frontFace("CCW"===U.Lk?b.CCW:b.CW),b.cullFace(b.BACK)):b.disable(b.CULL_FACE);T.dh();var r={isPot:!1,isLinear:!1,width:ca.qb(),height:ca.pb(),F:4,isFloat:!1};H=aa.instance(r);r=Object.assign({},r,{isLinear:!0,width:ca.L(),height:ca.Y()});h=aa.instance(r);
f=aa.instance(r);U.Ja&&(r=Object.assign({},r,{isLinear:!1}),C=aa.instance(r));J=xa.ea();U.Ja||(z=$b.instance({Eb:U.Eb,pc:U.pc,qc:U.qc,oc:U.oc}));I=!0},dh:function(){ca.Z()?t=qc.instance({}):(t.ga_=Eb.instance({bc:U.Ja?!1:"s91",isFloat:!1,Qb:!0,clearColor:[0,0,0,0],F:4}),t.position=Eb.instance({bc:U.Ja?!1:"s101",isFloat:!0,Qb:!0,clearColor:[0,0,0,0],F:4}),t.sb=Eb.instance({bc:!1,isFloat:!0,Qb:!0,clearColor:[0,0,0,0],F:4}),t.Cc=Eb.instance({bc:!1,isFloat:!1,Qb:!0,clearColor:[0,0,0,0],F:4}))},Bl:function(){return z},
sa:function(r){z=r},iq:function(){},wb:function(r){Ra.wb(r)},Ti:function(r){Ra.m(r,y);ca.Z()||(t.ga_.cj(!1),t.position.cj("s94"));K=ea=!0},Rp:function(){Ra.Ni()},Mo:function(r){Ra.Nj(r)},vn:function(r,P,ba){Ra.Za(r,P,ba)},wn:function(r,P,ba){Ra.$a(r,P,ba)},tn:function(r,P){Ra.Zi(r,P)},un:function(r){Ra.Hn(r)},xn:function(r){Ra.bj(r)},Ya:function(r){Ra.Ya(r)},Ui:function(r,P,ba,Q){Ra.On(r,P,ba,Q);P&&T.eg(P,Q?!0:!1);R=!0},tg:function(r){Ra.tg(r)},gg:function(r){Ra.gg(r)},sg:function(r){Ra.sg(r)},jj:function(r){Ra.jj(r)},
No:function(r){N&&(ja=!0,W=aa.instance({width:M.L(),height:M.Y(),isPot:!1}),A=r)},eg:function(r,P){M="string"===typeof r?aa.instance({url:r,isFloat:!1}):r;K&&Ra.eg(M,P);N=!0},Mj:function(r){q.push(r);0!==y.length&&(y.forEach(function(P){P(r)}),y.splice(0,y.length))},fn:function(r){r=q.indexOf(r);-1!==r&&q.splice(r,1)},Oo:function(r){v.push(r)},Op:function(r){r=v.indexOf(r);-1!==r&&v.splice(r,1)},Vd:function(r){K&&(k=r)},animate:function(r){!U.Ja||K&&R?k&&(g||x>U.Hm&&E?(u&&clearTimeout(u),++x,window.cancelAnimationFrame(T.animate),
u=setTimeout(function(){window.requestAnimationFrame(T.animate)},16)):(T.Ii(r),++x,K||k&&window.requestAnimationFrame(T.animate))):setTimeout(T.animate,100)},Qo:function(r){G.push(r)},Ii:function(r){if((!U.Ja||K&&R)&&I){G.forEach(B);if(ca.Z()){if(!t.set()&&!ca.ja()){ca.ho();T.dh();Eb.Uc();F.Jn();U.Ja&&Ra.Ni();b.flush();window.requestAnimationFrame(T.animate);return}K||uc.hn();l();t.H();J&&b.depthMask(!1)}else K&&Ra.te(1),t.ga_.set(!0,!0,!0),c(),t.ga_.H(),J&&b.depthMask(!1),t.Cc.set(!1,!J,!1),d(),
t.Cc.H(),t.position.set(!0,!J,!1),jb.V(),a(),t.position.H(),t.sb.set(!1,!J,!1),e(),t.sb.H();b.disable(b.DEPTH_TEST);J||b.depthMask(!1);U.da&&zb.V();var P=T.yh();null!==P&&(P.h(7),F.set(U.da?"s80":"s81"),F.N("u8",1/ca.qb(),1/ca.pb()),Eb.nk(),H.M(),U.Xm?(b.enable(b.BLEND),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA)):b.disable(b.BLEND),K||jb.Pe(),t.position.h(0),t.sb.h(1),t.ga_.h(2),z.Xc(3),t.Cc.h(6),z.Yc(4),z.hh(),U.da&&zb.h(5),Z.l(!0,!0),va.fa(),Ra.cl(H,
h)||(F.set("s1"),h.M(),H.h(0),Z.l(!1,!1)),F.set("s69"),f.M(),h.h(0),Z.l(!1,!1),h.o(),f.h(0),ea&&K?(F.set("s68"),C.h(1),Ra.te(2),Z.l(!1,!1),F.set("s1"),C.M(),h.h(0),Z.l(!1,!1)):(F.set("s67"),Z.l(!1,!1),h.h(0)),va.$(),b.viewport(0,0,ca.L(),ca.Y()),K&&Ra.dl(r,P)||F.set("s1"),Z.l(!1,!1),b.enable(b.DEPTH_TEST),b.depthMask(!0),b.flush())}},yh:function(){if(!N)return aa.Jh();if(!K)return M;if(ja&&!Ra.rm()){F.set(A);va.fa();W.Kc();W.o();M.h(0);var r=W;Z.l(!0,!0)}else r=M;return Ra.Zk(r)},Zn:function(){U.Qk||
k||(k=!0,T.animate(Date.now()),n||rc.$n(),n||Jb.jc(!1),m&&clearTimeout(m),U.da&&zb.Nd(),m=setTimeout(T.ya,U.jk),n||ca.Ul(),n=!0)},gq:function(){k&&(E=k=!1,cancelAnimationFrame(T.animate))},ya:function(){E||!n||g||U.fh||(E=g=!0,m&&clearTimeout(m),w&&clearTimeout(w),jb.Ve().Ki(),m=setTimeout(function(){ca.Fg(U.Lm);U.da&&zb.wj();x=0;p()},24))},wake:function(){E&&n&&!g&&(g=!0,E=!1,x=0,jb.Ve().Ki(),m&&clearTimeout(m),w&&clearTimeout(w),m=setTimeout(function(){ca.Fg(1);U.da&&zb.Nd();p()},16))},zp:function(){},
fp:function(){},Ud:function(r){ea=r},mq:function(){F.j("s81",[{type:"1f",name:"u117",value:U.Fc},{type:"1f",name:"u118",value:U.Uf}])},resize:function(r,P,ba){H.resize(r*ba,P*ba);h.resize(r,P);f.resize(r,P);U.Ja&&C.resize(r,P);Ra.resize(r,P,ba);r=[{type:"2f",name:"u8",value:[1/r,1/P]}];F.j("s69",r);F.j("s67",r)},K:function(){u&&clearTimeout(u);m&&clearTimeout(m);w&&clearTimeout(w);q.concat(v).forEach(function(r){r.K()});q.splice(0,q.length);v.splice(0,v.length);t.ga_.remove();t.sb.remove();t.Cc.remove();
t.position.remove();H.remove();h.remove();f.remove();C&&C.remove();g=!0},v:function(){T.K();J=E=g=n=k=K=R=g=!1}};return T}(),ta={},ca=function(){function a(){Eb.resize(d*v,e*v);H.Z()&&qc.resize(d*v,e*v);sa.resize(d,e,v);U.da&&zb.resize(d*v,e*v,v);H.Dg()}var c=null,d=0,e=0,l=-1,p=!1,B={Xd:!1,wg:!1,tj:!1,pg:!1,drawBuffers:!1,km:!1,Zh:!1,mm:!1,zc:!1,Ta:!1},q=Object.assign({},B),v=1,t=!1,y=!1,G=!1,z=!1,x=!1,H={m:function(h){void 0!==h.onload&&h.onload&&(y=h.onload);void 0===h.expand&&(h.expand=!1);void 0===
h.wd&&(h.wd=!1);void 0===h.pa&&(h.pa=!1);void 0===h.Mb&&(h.Mb=!1);void 0===h.alpha&&(h.alpha=!1);void 0===h.preserveDrawingBuffer&&(h.preserveDrawingBuffer=!1);h.wd&&(p=!0);c=h.pa?h.pa:document.getElementById(h.Dk);h.expand&&H.expand();try{window.Jo=h.Mb?h.Mb.pl():c.getContext("webgl",{antialias:!1,alpha:h.alpha,depth:!0,premultipliedAlpha:!1,stencil:!1,preserveDrawingBuffer:h.preserveDrawingBuffer});z=h.Mb?h.Mb.ja():!1;G=!z;8>b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS)&&H.bd("too few texture image units");
if(!xa.m())return H.bd("invalid config");U.po&&(q.wg=b.getExtension("EXT_texture_filter_anisotropic"),q.wg&&(q.Zh=!0));U.qo&&(q.Xd=b.getExtension("WEBGL_compressed_texture_s3tc"),q.Xd&&void 0!==q.Xd.COMPRESSED_RGBA_S3TC_DXT5_EXT&&q.Xd.COMPRESSED_RGBA_S3TC_DXT5_EXT&&(q.km=!0));G&&(q.tj=b.getExtension("OES_element_index_uint")||b.getExtension("MOZ_OES_element_index_uint")||b.getExtension("WEBKIT_OES_element_index_uint"),q.tj&&(q.mm=!0));!z&&U.ro&&(q.pg=b.getExtension("EXT_sRGB"),q.pg&&(q.zc=!0));G?
(q.drawBuffers=b.getExtension("WEBGL_draw_buffers"),q.drawBuffers&&!U.eh&&(q.Ta=!0)):q.Ta=4<=b.getParameter(b.MAX_DRAW_BUFFERS);if(q.Ta){var f=H.Sk();q.Ta=q.Ta&&f}}catch(C){return H.bd(C)}if(null===b||!b)return H.bd("NO_GL");h.expand&&window.addEventListener("resize",H.expand,!1);c.addEventListener("contextmenu",function(C){C.preventDefault();return!1},!1);d=c.width;e=c.height;H.mf();return!0},mf:function(){l=p?3:2;xa.ea()||(l=Math.min(l,1));xa.zk()||(l=Math.min(l,0));zc.m();Eb.m();for(var h in ta)ta[h].Gc();
F.m();jb.m();Jb.m();sa.m();rc.m();U.da&&zb.m();"undefined"!==typeof FPSCounter&&FPSCounter.m();H.Dg();H.Uk();t=!0;y&&y();return!0},Uk:function(){if(q.Ta){var h=qc.instance({width:256,height:1});h.bind();b.viewport(0,0,256,1);F.set("s89");F.xa("color",[1,0,0,1]);Z.l(!0,!0);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT||b.DEPTH_BUFFER_BIT);va.$();F.set("s1");h.sb.h(0);Z.l(!1,!1);h=new Uint8Array(1024);b.readPixels(0,0,256,1,b.RGBA,b.UNSIGNED_BYTE,h);x=1>=h[1020]}},Sk:function(){var h=qc.instance({width:1,
height:1});if(!h.set())return h.remove(),!1;F.Mn(b);Z.Kb(b);b.bindFramebuffer(b.FRAMEBUFFER,null);F.ub(b);h.ga_.Na(0);Z.Kb(b);var f=new Uint8Array(4);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,f);h.remove();return 3<Math.abs(f[0]-127)?!1:!0},ja:function(){return z},L:function(){return d},Y:function(){return e},qb:function(){return v*H.L()},pb:function(){return v*H.Y()},ql:function(){return d/e},T:function(){return l},pm:function(){return 3===l},bi:function(){return x},Z:function(){return q.Ta},ho:function(){q.Ta=
!1},Hp:function(){return!1},Bk:function(){return 0<H.T()},Wo:function(){return H.Z()&&0<H.T()},Ue:function(h){var f=b,C="";z||(f=q.drawBuffers,C="_WEBGL");return[f["COLOR_ATTACHMENT0"+C],f["COLOR_ATTACHMENT1"+C],f["COLOR_ATTACHMENT2"+C],f["COLOR_ATTACHMENT3"+C]].splice(0,h)},od:function(h){return H.Ue(4)[h]},Nl:function(){return z?b.SRGB?b.SRGB:b.RGBA:q.zc?q.pg.SRGB_ALPHA_EXT:b.RGBA},nm:function(){return q.Zh},vl:function(){return q.wg},Bm:function(h){H.ja()?b.drawBuffers(H.Ue(h)):q.drawBuffers.drawBuffersWEBGL(H.Ue(h))},
expand:function(){sa.wake();H.resize(window.innerWidth,window.innerHeight);sa.ya()},resize:function(h,f){!c||h===d&&f===e||(d=h,e=f,c.width=d,c.height=e,t&&(jb.resize(),a()))},Dg:function(){var h=[{type:"2f",name:"u8",value:[1/ca.qb(),1/ca.pb()]}];F.j("s69",h);F.j("s67",h)},Fg:function(h){v=h;a()},Fa:function(h,f){c.addEventListener(h,f,!1)},bd:function(){l=-1;return!1},Yg:function(){return 0<=l},Kp:function(){},Sp:function(){},eq:function(){var h=document.getElementById("loading");h&&(h.style.display=
"block")},Ul:function(){var h=document.getElementById("loading");h&&(h.style.display="none")},K:function(){H.Yg()&&(aa.uj(),sa.K(),Z.K(),Eb.K(),U.da&&zb.K(),$b.K(),rc.K(),F.K(),aa.K(),b.flush(),b=null)},v:function(){sa.v();Ra.v();F.v();Object.assign(q,B);t=!1}};return H}(),jb=function(){var a=!1,c=!1,d=[];return{m:function(){},instance:function(e){void 0===e.Li&&(e.Li=!0);void 0===e.je&&(e.je=.1);void 0===e.ie&&(e.ie=100);void 0===e.direction&&(e.direction=[0,0,-1]);void 0===e.Lb&&(e.Lb=45);var l=
new Sb,p=new Pa(50,-50,-400),B=null;l.setPosition(p);var q=new Int8Array(20),v=new Int8Array(20),t=0,y=0,G=0,z=0,x={V:function(){v[F.pd()]||(F.Jc("u119",l.elements),v[F.pd()]=1);q[F.pd()]||(F.Jc("u131",B),q[F.pd()]=1)},Oe:function(){y||(F.Jc("u119",l.elements),y=1);t||(F.N("u120",B[0],B[5]),t=1)},Pe:function(){G||(F.lg("u109",p.x,p.y,p.z),G=1)},Hb:function(){z||(F.lg("u149",p.x,p.y,p.z),z=1)},$g:function(){var H=e.je,h=e.ie,f=Math.tan(.5*e.Lb*Math.PI/180);B=[.5/f,0,0,0,0,.5*ca.ql()/f,0,0,0,0,-(h+
H)/(h-H),-1,0,0,-2*h*H/(h-H),0];for(H=0;20>H;++H)q[H]=0;t=0},In:function(H,h){p.Ri(h[0]).Si(h[1]).z=h[2];l.elements.set(H);for(H=0;20>H;++H)v[H]=0;z=G=y=0},Ki:function(){for(var H=z=G=0;20>H;++H)v[H]=0}};x.$g();a=x;c=!0;e.Li&&d.push(x);return x},V:function(){c&&a.V()},Oe:function(){c&&a.Oe()},Pe:function(){c&&a.Pe()},Hb:function(){c&&a.Hb()},resize:function(){d.forEach(function(e){e.$g()})},Ve:function(){return a}}}(),Eb=function(){var a=[],c=null;return{m:function(){c=va.instance({width:ca.qb(),
height:ca.pb(),xc:!ca.Z()})},instance:function(d){void 0===d.width&&(d.width=ca.qb());void 0===d.height&&(d.height=ca.pb());void 0===d.isFloat&&(d.isFloat=!1);void 0===d.Qb&&(d.Qb=!1);void 0===d.clearColor&&(d.clearColor=[0,0,0,0]);void 0===d.F&&(d.F=4);var e=aa.instance({isFloat:d.isFloat&&xa.ea(),S:d.isFloat,width:d.width,height:d.height,isPot:!1,isLinear:!1,F:d.F}),l=void 0!==d.bc&&d.bc?!0:!1,p=d.bc,B={set:function(q,v,t){t&&c.bind(!1,t);e.o();q&&(b.clearColor(d.clearColor[0],d.clearColor[1],d.clearColor[2],
d.clearColor[3]),c.ze());v&&c.Zg();l&&F.set(p)},cj:function(q){l=(p=q)?!0:!1},H:function(){e.Zd()},h:function(q){e.h(q)},resize:function(q,v){e.resize(q,v)},debug:function(){e.debug()},remove:function(){e.remove()}};d.Qb&&a.push(B);return B},resize:function(d,e){c.resize(d,e);a.forEach(function(l){l.resize(d,e)})},nk:function(){c.Sg()},Uc:function(){c.Uc()},Kc:function(){c.Kc()},Zo:function(){c.Zg()},Yo:function(){c.ze()},Xo:function(){c.clear()},K:function(){c.remove()}}}(),qc=function(){var a=[];
return{instance:function(c){void 0===c.width&&(c.width=ca.qb());void 0===c.height&&(c.height=ca.pb());var d=b.createFramebuffer(),e=c.width,l=c.height,p=!0;c={isFloat:xa.ea(),S:!0,width:e,height:l,isPot:!1,isLinear:!1,F:4};var B=aa.instance(c),q=aa.instance(c),v=aa.instance(c),t=aa.instance(c),y=va.wl(),G=va.Dh();b.bindFramebuffer(y,d);var z=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,z);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,e,l);b.framebufferRenderbuffer(y,b.DEPTH_ATTACHMENT,
b.RENDERBUFFER,z);b.clearDepth(1);b.framebufferTexture2D(y,ca.od(0),b.TEXTURE_2D,B.get(),0);b.framebufferTexture2D(y,ca.od(1),b.TEXTURE_2D,q.get(),0);b.framebufferTexture2D(y,ca.od(2),b.TEXTURE_2D,t.get(),0);b.framebufferTexture2D(y,ca.od(3),b.TEXTURE_2D,v.get(),0);ca.Bm(4);b.bindFramebuffer(y,null);va.reset();var x={position:B,sb:q,Cc:v,ga_:t,bind:function(){b.bindFramebuffer(y,d);va.reset()},set:function(){p&&b.checkFramebufferStatus(G);b.bindFramebuffer(y,d);va.reset();if(p){if(b.checkFramebufferStatus(G)!==
b.FRAMEBUFFER_COMPLETE)return!1;p=!1}b.viewport(0,0,e,l);b.clearColor(0,0,0,0);F.Ub()&&!ca.bi()&&(F.set("s88"),Z.l(!1,!1));b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);return!0},H:function(){},resize:function(H,h){e=H;l=h;B.resize(H,h);q.resize(H,h);t.resize(H,h);v.resize(H,h);b.bindRenderbuffer(b.RENDERBUFFER,z);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,e,l);b.bindRenderbuffer(b.RENDERBUFFER,null)},remove:function(){B.remove();q.remove();t.remove();v.remove();b.deleteRenderbuffer(z);
b.deleteFramebuffer(d);var H=a.indexOf(x);-1!==H&&a.splice(H,1)}};a.push(x);return x},resize:function(c,d){a.forEach(function(e){e.resize(c,d)})}}}(),$b=function(){var a=[],c=U.Rg;return{instance:function(d){function e(){v?l():(f=ld.instance({ka:G,jm:c}),q=U.kk[ca.T()],z=aa.instance({isFloat:xa.ea(),S:!0,isPot:!0,isLinear:!1,Ob:!0,width:q,height:q/2,F:3}),x=aa.instance({isFloat:xa.ea(),S:!0,isPot:!0,isLinear:!1,Ob:!0,width:q,height:q/2,F:3}),H=aa.instance({isFloat:xa.ea(),S:!0,isPot:!0,width:1,height:q/
2,F:3}),h=aa.instance({isFloat:xa.ea()&&!c,S:!c,isPot:!1,isLinear:!0,Ob:!0,isMipmap:!1,width:q,height:q/2,F:c?4:3}),v=!0,l(),I.forEach(function(k){k()}),I.splice(0,I.length))}function l(){if(v){va.fa();f.dn();z.M();F.set("s71");G.h(0);F.G("u87",U.Fc);aa.tk(1);Z.l(!0,!0);for(var k=U.am[ca.T()],n=0;n<k;++n)x.o(),F.set("s74"),F.N("u8",1/q,0),z.h(0),Z.l(!1,!1),z.o(),F.N("u8",0,2/q),x.h(0),Z.l(!1,!1);H.M();F.set("s76");z.h(0);Z.l(!1,!1);F.set(c?"s78":"s77");h.M();z.h(0);H.h(1);Z.l(!1,!1);aa.$(0);aa.$(1)}}
var p=Object.assign({Eb:null,pc:null,oc:0,qc:0},d),B=0,q=0,v=!1,t=null,y=null,G=null,z=null,x=null,H=null,h=null,f=null,C=0,I=[];d={m:function(){function k(){2===++n&&(G=aa.instance({isFloat:xa.ea(),S:!0,isPot:!1,isMipmap:!1,isLinear:!1,Ob:!0,width:B,height:B/2,F:3}),va.fa(),G.M(),F.set("s70"),F.G("u92",p.qc),F.G("u93",p.oc),t.h(0),y.h(1),Z.l(!0,!0),e())}var n=0;B=U.lk[ca.T()];C=Math.log2(B)-1;p.Eb&&(t=aa.instance({isPot:!1,url:p.Eb,R:k,F:3,isFlipY:!1}),y=aa.instance({isPot:!1,url:p.pc,R:k,F:3,isFlipY:!1}))},
$i:function(k){G=k;e()},Xc:function(k){v&&(f.h(k),F.G("u110",f.L()))},Yc:function(k){v&&h.h(k)},hh:function(){F.G("u22",C)},zh:function(){return C},L:function(){return B},Gb:function(k){v?k():I.push(k)},K:function(){t&&t.remove();y&&y.remove();z.remove();H.remove();x.remove();f.remove();h.remove();G.remove()}};a.push(d);d.m();return d},K:function(){a.forEach(function(d){d.K()})}}}(),Xc={instance:function(a){var c=a.vm,d=a.tm,e=0,l=c.L();a=U.Rg;var p=aa.instance({isFloat:xa.ea()&&!a,S:!a,isLinear:!0,
isMipmap:!1,isPot:!1,width:l,F:a?4:3,isFlipY:!1}),B=aa.instance({isFloat:xa.ea()&&!a,S:!a,isPot:!1,isLinear:!0,Ob:!0,isMipmap:!1,width:l,height:l/2,F:a?4:3}),q=va.instance({width:l,height:l}),v=a?"s64":"s63";return{Nn:function(t){e=t;F.set(v);b.viewport(0,0,l,l);q.o();p.o();F.G("u7",e);c.Xc(1);d.Xc(0);Z.l(!0,!0);b.viewport(0,0,l,l/2);B.o();c.Yc(1);d.Yc(0);Z.l(!1,!1);b.flush()},Xc:function(t){p.h(t)},Yc:function(t){B.h(t)},hh:function(){F.G("u22",c.zh()*(1-e)+d.zh()*e)}}}},Jb=function(){function a(M){var N=
(g-U.xe)/(U.Vg-U.xe);N=1-Math.pow(1-N,U.Ho);g+=M*(1+N*U.Io);g=Math.min(Math.max(g,U.xe),U.Vg);w.jc()}function c(M){-1!==q&&(C=f=0,B(),a(U.Go*M.deltaY/window.innerHeight),M.preventDefault())}function d(){k+=f;n+=C;n=Math.min(Math.max(n,U.Pm),U.Om);w.jc()}function e(M){if(0===q||-1===q)return!1;var N=void 0!==M.touches&&M.touches.length;M.preventDefault();if(2===q){var K=Oc(M.touches[0].pageX,M.touches[0].pageY,M.touches[1].pageX,M.touches[1].pageY);a(-(H-K)*U.Qm);H=K}else K=N?M.touches[0].clientX:
M.clientX,M=N?M.touches[0].clientY:M.clientY,f=2*(K-z)*Math.PI/ca.L(),C=2*(M-x)*Math.PI/ca.Y(),4===q?(m[0]+=f*U.xi,m[1]-=C*U.xi,m[0]=Math.min(Math.max(m[0],-U.Ai),U.Ai),m[1]=Math.min(Math.max(m[1],-U.Bi),U.Bi),w.jc()):d(),z=K,x=M}function l(){0!==q&&-1!==q&&(0===f&&0===C||1!==q||!J?sa.ya():(B(),h=Date.now(),E=setInterval(w.sm,I)),q=0)}function p(M){if(2!==q&&-1!==q){C=f=0;B();sa.wake();var N=void 0!==M.changedTouches&&M.touches.length;M.preventDefault();N&&2===M.touches.length?(q=2,H=Oc(M.touches[0].pageX,
M.touches[0].pageY,M.touches[1].pageX,M.touches[1].pageY)):(q=N||2!==M.button?1:4,z=N?M.touches[0].clientX:M.clientX,x=N?M.touches[0].clientY:M.clientY);return!1}}function B(){E&&(clearInterval(E),E=!1)}var q=0,v=!1,t=!1,y=!1,G=1,z=0,x=0,H=0,h=0,f=0,C=0,I=16,k=U.oj,n=U.zi,g=U.we,E=!1,J=0,u=new Float32Array([0,0,0,0,0]),m=[U.xk,U.yk],w={m:function(){J=U.Pj[ca.T()];I=U.gd[ca.T()];ca.Fa("mousedown",p);ca.Fa("mouseup",l);ca.Fa("mouseout",l);ca.Fa("mousemove",e);ca.Fa("mousemove",e);ca.Fa("wheel",c);ca.Fa("touchstart",
p);ca.Fa("touchend",l);ca.Fa("touchmove",e)},jc:function(M){v?(t[0]=-n,t[1]=k,y[1].value=G/U.we*g,Ra.vb(y)):(u[0]=k,u[1]=n,u[2]=g,u[3]=m[0],u[4]=m[1],rc.rn(u,M))},sm:function(){if(1E-4>f&&1E-4>C||-1===q)B(),C=f=0,0===q&&sa.ya();var M=Date.now(),N=M-h;h=M;M=Math.pow(J,N/I);f*=M;C*=M;d()},Qe:function(M){v||(v=!0,q=-1,t=[0,0,0],y=[{name:"u78",type:"3f",value:t},{name:"u82",type:"1f",value:1}],G=M)},kj:function(M){-1===q&&M&&(q=0);M||(q=-1)},kn:function(){C=f=0;k=U.oj;n=U.zi;g=U.we;w.jc()},Wp:function(M){g=
M},Xp:function(M){m[0]=M[0];m[1]=M[1];U.Wg=M[2]},Vp:function(M,N){k=M;n=N}};return w}(),uc=function(){var a={s90:!1,s90color:!1,s90NormalMap:!1,s90ParamsMap:!1,s90NormalParamsMap:!1};return{instance:function(c){function d(A){if(W){A.tweaker&&JEELIZVTO&&"undefined"!==typeof S&&S.Qg(A.tweaker);u.splice(0,u.length);u.push({n:0,offset:0});g.min.set(Infinity,Infinity,Infinity);g.max.set(-Infinity,-Infinity,-Infinity);var T=A.uvs;T&&(T=T.filter(function(ha){return ha}));ea=T&&0<T.length&&0<T[0].length?
!0:!1;"undefined"!==typeof vb&&"string"===typeof A.faces&&(A.faces=vb(A.faces));"undefined"!==typeof ob&&("string"===typeof A.vertices&&(A.vertices=ob(A.vertices)),T&&T.length&&T.forEach(function(ha,ra){"string"===typeof ha&&(T[ra]=ob(ha))}));var r=A.metadata.faces,P=1+(ea?1:0);r=(A.faces.length-r)/(A.metadata.faces*P);6!==r&&8!==r||ea||(++P,r/=2);if(4===r){r=6*P+2;for(var ba=4*P+1,Q=Array(A.metadata.faces*r),Y=0;Y<A.metadata.faces;++Y)for(var oa=0;oa<P;++oa)Q[Y*r+4*oa]=A.faces[Y*ba+5*oa],Q[Y*r+4*
oa+1]=A.faces[Y*ba+5*oa+1],Q[Y*r+4*oa+2]=A.faces[Y*ba+5*oa+2],0===oa&&(Q[Y*r+3]=A.faces[Y*ba+4]),Q[Y*r+4*oa+3*P+1]=A.faces[Y*ba+5*oa],Q[Y*r+4*oa+3*P+2]=A.faces[Y*ba+5*oa+2],Q[Y*r+4*oa+3*P+3]=A.faces[Y*ba+5*oa+3],0===oa&&(Q[Y*r+3*P+4]=A.faces[Y*ba+4]);A.faces=Q;A.metadata.faces*=2}z=Array(A.metadata.vertices);for(r=0;r<A.metadata.vertices;++r)z[r]=new Pa(A.vertices[3*r],A.vertices[3*r+1],A.vertices[3*r+2]),$c(g,z[r]);x=Array(A.metadata.faces);P=3*P+1;for(r=0;r<A.metadata.faces;++r)x[r]=new wc(A.faces[P*
r],A.faces[P*r+1],A.faces[P*r+2]),x[r].Wb=A.faces[P*r+3];w=3<z.length;W&&(W.visible=w);bd(z,x);H=cd(z,x);if(ea){P=Array(z.length);r=["a","b","c"];for(ba=0;ba<A.metadata.faces;++ba)for(Q=0;3>Q;++Q)if(Y=A.faces[7*ba+Q],oa=A.faces[7*ba+1+Q+3],"undefined"===typeof P[Y])P[Y]=[[Y,oa]];else if(P[Y][0][1]!==oa){for(var Ia=-1,Da=1;Da<P[Y].length;++Da)if(P[Y][Da][1]===oa){Ia=P[Y][Da][0];break}Da=-1;-1===Ia?(Da=z.length,z.push(z[Y].clone()),H.push(H[Y].clone()),P[Y].push([Da,oa]),P[Da]=[[Da,oa]]):Da=Ia;A.faces[7*
ba+Q]=Da;x[ba][r[Q]]=Da}h=Array(z.length);for(A=0;A<z.length;++A)r="undefined"===typeof P[A]?A:P[A][0][1],h[A]=new Qb(T[0][2*r],T[0][2*r+1])}var ka=oc(g);c.Cb&&(z.forEach(function(ha){ha.x-=ka.x;ha.z-=ka.z;ha.y-=g.min.y}),g.min.x-=ka.x,g.max.x-=ka.x,g.min.z-=ka.z,g.max.z-=ka.z,g.max.y-=g.min.y,g.min.y=0);if(c.Db){var la=U.ik/Math.max(g.max.x-g.min.x,g.max.y-g.min.y,g.max.z-g.min.z);z.forEach(function(ha){ha.Ba(la)});g.min.Ba(la);g.max.Ba(la)}A=ea?8:6;P=new Float32Array(z.length*A);for(r=0;r<z.length;++r)P[A*
r]=z[r].x,P[A*r+1]=z[r].y,P[A*r+2]=z[r].z,P[A*r+3]=H[r].x,P[A*r+4]=H[r].y,P[A*r+5]=H[r].z,ea&&(P[A*r+6]=h[r].x,P[A*r+7]=h[r].y);x.sort(function(ha,ra){return ha.Wb-ra.Wb});var Ba=new (65536>3*x.length?Uint16Array:Uint32Array)(3*x.length),V=0;x.forEach(function(ha,ra){ha.Wb===V?u[V].n+=3:(u.push({n:3,offset:3*ra}),++V);Ba[3*ra]=ha.a;Ba[3*ra+1]=ha.b;Ba[3*ra+2]=ha.c});f&&f.remove();f=Z.instance({ha:P,U:Ba});k=I=!1;R&&W.ah();M=!0;W.Ne();c.R&&(c.R(W),c.R=null)}}function e(A){f.Ga(A.n,A.offset)}function l(A,
T){K[T]&&(F.set(K[T].Il()),f.bind(!1),ea?(F.La(),F.Xi()):(F.Xa(),F.Yi()),K[T].Ac()&&(F.Ic(),I.rc(!1),F.Md(),jb.Hb()),K[T].Xk(),K[T].fd(),f.Ga(A.n,A.offset))}function p(A,T){K[T]&&(F.set(K[T].Jl()),f.bind(!1),ea?(F.La(),F.Xi()):(F.Xa(),F.Yi()),K[T].Ac()&&(F.Ic(),I.rc(!1),F.Md(),jb.Hb()),W.vc(),K[T].fd(),f.Ga(A.n,A.offset))}function B(A,T){ja&&K[T]&&(K[T].Yk(),f.Ga(A.n,A.offset))}function q(A,T){ja&&K[T]&&(K[T].$k(ea),f.Ga(A.n,A.offset))}function v(A,T){K[T]&&(F.set(K[T].El()),K[T].mh(),f.Ga(A.n,A.offset))}
function t(A,T){K[T]&&(F.set(K[T].Fl()),W.vc(),K[T].mh(),f.Ga(A.n,A.offset))}function y(A,T){K[T]&&(F.set(K[T].Gl()),K[T].Ac()&&(I.rc(!1),F.Md(),jb.Hb()),f.bind(!1),K[T].jh(ea),f.Ga(A.n,A.offset))}function G(A,T){if(K[T]){var r=K[T].Hl();F.set(r);K[T].Ac()&&(I.rc(!1),F.Md(),jb.Hb(),f.bind(!1));a[r]||(W.vc(),f.bind(!1),a[r]=!0);K[T].jh(ea);f.Ga(A.n,A.offset)}}if(!ca.Yg())return!1;void 0===c.Cb&&(c.Cb=!1);void 0===c.Db&&(c.Db=!1);void 0===c.Ug&&(c.Ug=!1);var z=null,x=null,H=null,h=null,f=null,C=null,
I=null,k=!1,n=new Sb,g=new vc,E=[],J=null,u=[{n:0,offset:0}],m=[],w=!1,M=!1,N=[],K=[],R=!1,ea=!1,ja=!1,W={visible:w,Ik:function(){return u.length},ah:function(){!k&&ea&&(x=x.filter(function(A){return null!==A}),C=dd(z,H,h,x),I=Z.instance({ha:C,U:!1}),h=H=x=z=C=null,k=!0)},vc:function(){jb.V();W.lh()},lh:function(){F.Jc("u132",n.elements)},gp:function(){w&&(W.lh(),f.bind(!1),ea?F.La():F.Xa(),f.V())},gl:function(A){w&&(A||W.vc(),f.bind(!1),ea?F.La():F.Xa(),f.V())},hl:function(){w&&(f.bind(!1),ea?F.La():
F.Xa(),u.forEach(B))},ih:function(){w&&(f.bind(!1),ea?F.La():F.Xa(),m.forEach(e))},el:function(A){ja&&w&&(f.bind(!1),ea?F.La():F.Xa(),A?u.forEach(v):u.forEach(t))},ed:function(A){w&&(A||W.vc(),f.bind(!1),A||(F.La(),F.Ic()),ja&&u.forEach(q))},fd:function(A){ja&&w&&(A?u.forEach(l):u.forEach(p))},bl:function(){ja&&w&&u.forEach(G)},al:function(){ja&&w&&u.forEach(y)},Ih:function(){return J},Gh:function(){return N},no:function(A,T){K[A].update(T);W.yj()},hg:function(A,T){function r(Q,Y){Q&&(Q.R=function(){W&&
++ba===P&&(ja=!0,R&&W.Gb(W.ah,5),W.Ne(),T&&W.Gb(function(){T(W)},10))},Q=zc.instance(Q),K[Y]&&K[Y].K(),K[Y]=Q,R=R||Q.Ac())}N=A;ja=!1;var P=A.length,ba=0;K=Array(P);R=!1;A.forEach(function(Q,Y){"string"===typeof Q?xc(-1===Q.indexOf(".json")?Q+".json":Q,function(oa){oa.name=Q;r(oa,Y,Q)}):r(Q,Y,!1)});W.Gb(function(){W.yj();sa.wb(W);sa.Vd(!0)},4)},yj:function(){m.splice(0,m.length);u.forEach(function(A,T){K[T]&&K[T].qm()&&m.push(A)})},Gb:function(A,T){M&&ja?A(W):E.push({mb:A,order:T?T:0})},Ne:function(){M&&
ja&&(E.sort(function(A,T){return 0>A.order-T.order?1:-1}),E.forEach(function(A){A.mb(W)}),E.splice(0,E.length))},remove:function(){W.K();W=null},K:function(){w=M=!1;f&&f.remove();K.forEach(function(A){A.K()});k&&I.remove()},Ll:function(){return g.size().x},Ml:function(){return g.size().y},xp:function(){return g.size().z},sl:function(){return oc(g).x},tl:function(){return oc(g).y},lp:function(){return oc(g).z},tp:function(){return g.min.y},replace:function(A,T,r){if(A===J)return T&&W&&(W.Ne(),T(W)),
!1;J=A;sa.Vd(!1);xc(A,function(P){d(P);T&&T(W)},r);return!0}};c.Dc&&W.hg(c.Dc,c.Ug);J=c.url;xc(c.url,d);return W},hn:function(){a.s90=!1;a.s90color=!1;a.s90NormalMap=!1;a.s90ParamsMap=!1;a.s90NormalParamsMap=!1}}}(),rc=function(){var a=null,c=!1,d=!1,e=null,l=new Float32Array(16),p=new Float32Array(3),B={data:0},q={m:function(){a=U.Ib?new Worker("js/worker.php"):{postMessage:function(v){B.data=v;Ac.Jm(B)},terminate:function(){}};a.onmessage=function(v){switch(v.data[0]){case 3:for(var t=0;16>t;++t)l[t]=
v.data[t+1];for(t=0;3>t;++t)p[t]=v.data[t+17];jb.Ve().In(l,p);break;case 6:q.Cn(),c=!0,Jb.jc(!1),U.da&&(zb.enable(),zb.Nd())}};e=new Float32Array(6);e[0]=2;U.Ib||Ac.En(a)},$n:function(){U.gh||(d=!0)},hq:function(){d=!1},rn:function(v,t){if(t||c&&d)e[1]=v[0],e[2]=v[1],e[3]=v[2],e[4]=v[3],e[5]=v[4],a.postMessage(e)},Cn:function(){a.postMessage([5,U.Wg])},K:function(){U.Ib&&a.terminate()}};return q}(),Ac=function(){var a=0,c=0,d=0,e=[0,0],l=new Sb,p=new nc,B=new nc,q=new Pa,v=new Pa,t=new Rb,y=0,G=new Float32Array(20);
G[0]=3;var z=!1,x={data:!1},H={m:function(){"undefined"===typeof U&&(self.Ko={Ib:!0});U.Ib&&H.Vf([6])},Jm:function(h){switch(h.data[0]){case 2:H.ig(h.data);break;case 5:y=h.data[1]}},Vf:function(h){U.Ib?postMessage(h):(x.data=h,z.onmessage(x))},ig:function(h){a=h[1];c=h[2];d=h[3];e[0]=h[4];e[1]=h[5];q.set(e[0],e[1],-d);t.set(c,a,0,"XYZ");if(!1===t instanceof Rb)throw Error("JETHREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");h=Math.cos(t.B/2);var f=
Math.cos(t.C/2),C=Math.cos(t.D/2),I=Math.sin(t.B/2),k=Math.sin(t.C/2),n=Math.sin(t.D/2),g=t.order;"XYZ"===g?(p.B=I*f*C+h*k*n,p.C=h*k*C-I*f*n,p.D=h*f*n+I*k*C,p.O=h*f*C-I*k*n):"YXZ"===g?(p.B=I*f*C+h*k*n,p.C=h*k*C-I*f*n,p.D=h*f*n-I*k*C,p.O=h*f*C+I*k*n):"ZXY"===g?(p.B=I*f*C-h*k*n,p.C=h*k*C+I*f*n,p.D=h*f*n+I*k*C,p.O=h*f*C-I*k*n):"ZYX"===g?(p.B=I*f*C-h*k*n,p.C=h*k*C+I*f*n,p.D=h*f*n-I*k*C,p.O=h*f*C+I*k*n):"YZX"===g?(p.B=I*f*C+h*k*n,p.C=h*k*C+I*f*n,p.D=h*f*n-I*k*C,p.O=h*f*C-I*k*n):"XZY"===g&&(p.B=I*f*C-h*
k*n,p.C=h*k*C-I*f*n,p.D=h*f*n+I*k*C,p.O=h*f*C+I*k*n);q.y-=y;h=l.elements;n=p.x;var E=p.y,J=p.z;I=p.w;var u=n+n,m=E+E;k=J+J;f=n*u;C=n*m;n*=k;g=E*m;E*=k;J*=k;u*=I;m*=I;I*=k;h[0]=1-(g+J);h[4]=C-I;h[8]=n+m;h[1]=C+I;h[5]=1-(f+J);h[9]=E-u;h[2]=n-m;h[6]=E+u;h[10]=1-(f+g);h[3]=0;h[7]=0;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;l.setPosition(q);B.J(p).inverse();h=v.J(q);E=h.x;u=h.y;J=h.z;f=B.x;C=B.y;I=B.z;k=B.w;n=k*E+C*J-I*u;g=k*u+I*E-f*J;m=k*J+f*u-C*E;E=-f*E-C*u-I*J;h.x=n*k+E*-f+g*-I-m*-C;h.y=g*k+E*-C+m*-f-
n*-I;h.z=m*k+E*-I+n*-C-g*-f;for(h=1;17>h;++h)G[h]=l.elements[h-1];G[17]=v.x;G[18]=v.y;G[19]=v.z;H.Vf(G)},En:function(h){z=h;H.Vf([6])}};return H}();Ac.m();var zc=function(){function a(B){var q=B.split(":").shift();return"data"===q||"blob"===q?B:("undefined"!==typeof L&&L.aa?L:U).aa+U.Dm+B}function c(B,q){return Math.min(q+B+q*B,1)}var d=!1,e=null,l=1,p={diffuseTexture:null,normalTexture:null,paramsTexture:null,colorTextureUsage:0,metalness:.5,roughness:.5,fresnelMin:0,fresnelMax:1,fresnelPow:5,alpha:1,
diffuseColor:[255,255,255],paramsMapMask:[0,0,0,0],R:null};return{m:function(){e=aa.instance({width:1,height:1,isMipmap:!1,F:4,array:new Uint8Array([255,255,255,255]),zc:!1})},Qe:function(){d=!0;l=2},instance:function(B){function q(w){function M(){++K===N&&w&&w()}var N=1,K=0;(t=x.normalTexture&&ca.Bk()?!0:!1)&&!f.Ka&&(++N,f.Ka=aa.instance({url:a(x.normalTexture),isLinear:!0,isMipmap:!0,Uh:ca.pm(),isPot:!0,F:3,R:M}));(y=x.diffuseTexture&&""!==x.diffuseTexture?!0:!1)&&!f.ga_?(++N,f.ga_=aa.instance({url:a(x.diffuseTexture),
isMipmap:!0,isLinear:!0,isPot:!0,Uh:!0,zc:!1,Ob:!1,gm:!1,F:4,R:M}),h="s95"):f.ga_||(h="s96",f.ga_=e);H=[x.diffuseColor[0]/255,x.diffuseColor[1]/255,x.diffuseColor[2]/255];(C=x.paramsTexture?!0:!1)&&!f.tb&&(x.paramsTexture===x.diffuseTexture?f.tb=f.ga_:(++N,f.tb=aa.instance({url:a(x.paramsTexture),isMipmap:!0,isLinear:!0,isPot:!0,Uh:!0,zc:!1,Ob:!1,gm:!1,F:4,R:M})));M()}function v(w){"number"===typeof x.alpha?(G[0]=x.alpha,G[1]=0,G[2]=0,G[3]=0):(G[0]=x.alpha[0],G[1]=x.alpha[1]-x.alpha[0],G[2]=x.alpha[2],
G[3]=x.alpha[3]);var M=1<=x.fresnelPow?x.fresnelMin:x.fresnelMax;z[0]=c(G[0],M);z[1]=c(G[1],M);z[2]=G[2];z[3]=G[3];I={yi:x.fresnelMax,ki:[x.fresnelMin,x.roughness,x.fresnelPow/15,x.metalness],ni:x.paramsMapMask};w=x.R?x.R.bind(null,w):null;q(w);t||C||y?t||C?t&&!C?(k="s90NormalMap",n="s90NNGLtextureNormalMap"):!t&&C?(k="s90ParamsMap",n="s90NNGLtextureParamsMap"):(k="s90NormalParamsMap",n="s90NNGLtextureNormalParamsMap"):(k="s90",n="s90NNGLtexture"):(k="s90color",n="s90NNGLcolor");g=t?"s98":"s97";E=
t?"s92":"s102";J=C?"s100":"s99";u=C?"s93":"s103"}var t,y,G=[1,0,0,0],z=[0,0,0,0],x=Object.assign({},p,B),H=null,h=null,f={ga_:null,Ka:null,tb:null},C=t=y=!1,I=null,k=null,n=null,g=null,E=null,J=null,u=null,m={update:function(w){Object.assign(x,w);v()},Ac:function(){return t},qm:function(){return.99>G[0]},Jl:function(){return E},Il:function(){return g},Fl:function(){return u},El:function(){return J},Hl:function(){return k},Gl:function(){return n},fd:function(){t&&f.Ka.h(0)},$k:function(w){d&&F.set(h);
w?F.La():F.Xa();y&&F.Ic();m.ed()},ed:function(){y&&(F.G("u69",x.colorTextureUsage),f.ga_.h(0));F.mg("u142",H)},mh:function(){C&&(f.tb.h(0),F.xa("u71",I.ni),F.Ic());F.xa("u107",I.ki);F.G("u143",I.yi)},jh:function(w){C&&!t?f.tb.h(l):t&&(y||e.h(0),f.Ka.h(l),C&&f.tb.h(l+1));C&&F.xa("u71",I.ni);y||t?F.zn():w?F.An():F.Bn();m.ed();F.xa("u7",G);F.xa("u107",I.ki);F.G("u143",I.yi)},Xk:function(){F.xa("u7",G)},Yk:function(){F.xa("u7",z)},K:function(){y&&f.ga_.remove();t&&f.Ka.remove();C&&x.paramsTexture!==x.diffuseTexture&&
f.tb.remove()}};v(m);return m}}}(),zb=function(){var a=0,c=0,d=0,e=0,l=0,p=0,B=U.gk,q=U.fk,v=U.hk,t=0,y=0,G=null,z=null,x=0,H=0,h=0,f=0,C=0,I=null,k=0,n=0,g=0,E=Date.now(),J=null,u=!1,m=!1,w=!1,M=1,N=!1,K={m:function(){a=U.bk[ca.T()];c=U.ak[ca.T()];d=U.$j[ca.T()];n=U.ck[ca.T()];e=U.Uj[ca.T()];l=U.Yj[ca.T()];h=U.Zj[ca.T()];f=ca.L();C=ca.Y();t=Math.round(f*a);y=Math.round(C*a);z=va.instance({width:t,height:y,xc:!1});G=aa.instance({width:t,height:y,isPot:!1,isLinear:!0});I=aa.instance({width:t,height:y,
isPot:!1,isLinear:!0,F:1});u=!0},resize:function(R,ea,ja){M=ja;f=R;C=ea;t=Math.round(R*a);y=Math.round(ea*a);z.resize(t,y);m=!0},V:function(){var R=Math.exp(-(Date.now()-E)/n);k=w?g+(1-R)*(1-g):g*R;x=c+k*(d-c);H=e+(1-k)*(1-e);p=l+(1-k)*(1-l);aa.$(5);if(m&&u)aa.$(6),I.resize(t,y),F.set("s0"),F.Pd("u1",6),z.bind(!1,!0),I.o(),z.ze(),G.h(6),Z.l(!0,!0),G.resize(t,y),G.o(),I.h(6),Z.l(!1,!1),F.Pd("u1",0),m=!1;else{b.enable(b.BLEND);b.blendFunc(b.CONSTANT_ALPHA,b.ONE_MINUS_SRC_ALPHA);R=x/h;b.blendColor(R,
R,R,R);b.colorMask(!0,!1,!1,!0);F.set("s82");jb.Oe();F.G("u123",x);n&&(F.G("u124",H),F.G("u116",p));var ea=M*(B+Math.pow(Math.random(),v)*(q-B));F.N("u8",ea/f,ea/C);z.Sg();z.Kc();G.o();ea=2*Math.PI*Math.random();for(var ja=!0,W=0;W<h;++W)1===W&&(b.blendFunc(b.SRC_ALPHA,b.ONE),F.G("u123",R)),F.G("u122",ea+W/h*(Math.PI/2)),F.N("u121",(Math.random()-.5)/f,(Math.random()-.5)/C),Z.l(ja,ja),ja=!1;b.disable(b.BLEND);F.set("s83");F.N("u8",1/t,1/y);I.o();G.h(7);Z.l(!1,!1);b.colorMask(!0,!0,!0,!0)}},h:function(R){I.h(R)},
enable:function(){N=!0},Sm:function(){if(w||!N)return!1;J&&clearTimeout(J);K.Nd();J=setTimeout(K.wj,400)},Nd:function(){J&&(clearTimeout(J),J=!1);!w&&N&&(window.Hj.disable(),w=!0,E=Date.now(),g=k)},wj:function(){w&&N&&(J&&(clearTimeout(J),J=null),window.Hj.enable(),w=!1,E=Date.now(),g=k)},K:function(){G.remove();I.remove();z.remove()}};K.Sm();return K}(),ld={instance:function(a){var c=a.ka.L(),d=a.jm?!0:!1,e=d?"s65":"s12",l=aa.instance({isFloat:a.ka.ci()&&xa.ea()&&!d,S:a.ka.di()&&!d,isLinear:!0,isMipmap:!1,
isPot:!1,width:c,height:c,F:d?4:3}),p=aa.instance({isFloat:a.ka.ci()&&xa.ea(),S:a.ka.di(),isPot:!0,width:1,height:c/2,F:3});p.o();F.set("s76");a.ka.h(0);Z.l(!0,!0);var B=Math.round(Math.log(c)/Math.log(2));l.dn=function(){l.o();F.set(e);F.G("u87",U.Fc);a.ka.h(0);p.h(1);for(var q=0,v=0;v<=B;++v){var t=Math.pow(2,B-v),y=t/2;b.viewport(0,q,c,y);F.N("u85",c/t,1);F.G("u86",Math.min(6/y,.6));q+=t/2;Z.l(0===v,0===v)}};l.gn=l.remove;l.remove=function(){l.gn();p.remove()};return l}};ta.hb=function(){var a=
{Ld:45,cg:1,Xb:"../../images/debug/picsou.png",dg:.8,Af:3.14/6,Bf:.314,Cf:4,yf:.5,zf:-.25,um:1,ta:256,xf:.15},c={Jb:null,kd:null,screen:null},d=!1,e=!1,l=-1,p=null,B=null,q=null,v=Math.PI/180,t=[1,1],y={m:function(G){l=G.width;G={isFloat:xa.ea(),S:!0,isPot:!1,isMipmap:!1,isLinear:!1,isMirrorY:!0,width:l,height:l/2,F:3};c.Jb=aa.instance(G);c.kd=aa.instance(G);F.j("s104",[{type:"1i",name:"u150",value:0}]);F.j("s105",[{type:"1i",name:"u155",value:0}]);y.oo()},oo:function(){F.j("s105",[{type:"1f",name:"u156",
value:a.Af},{type:"1f",name:"u157",value:a.Bf},{type:"1f",name:"u158",value:a.Cf},{type:"1f",name:"u159",value:a.yf},{type:"1f",name:"u160",value:a.zf}])},Ip:function(){return e},sa:function(G){p=G},Gc:function(){B="uniform sampler2D u150;uniform vec2 u151,u152,u4;uniform int u153;uniform float u154,u136;varying vec2 vv0;const float h=3.141593;const vec2 i=vec2(.5,.5);const float e=1.2;const vec3 g=vec3(1.,1.,1.);void main(){vec2 c=vec2(vv0.x*2.,-vv0.y+.5)*h,a=i+u4*(c-u151)/u152;float b=1.;if(u153==0){if(a.x<0.||a.x>1.||a.y<0.||a.y>1.)discard;}else b*=smoothstep(-e,0.,a.x),b*=1.-smoothstep(1.,1.+e,a.x),b*=smoothstep(-e,0.,a.y),b*=1.-smoothstep(1.,1.+e,a.y);vec3 d=mix(u154*g,texture2D(u150,a).rgb*u136,b*g);gl_FragColor=vec4(d,1.);}";
q="uniform sampler2D u155;uniform float u156,u157,u158,u159,u160;varying vec2 vv0;const float f=3.141593;const vec2 o=vec2(.5,.5);const vec3 h=vec3(1.,1.,1.);void main(){float i=(vv0.x*2.-1.)*f,c=(-vv0.y+.5)*f;vec4 a=texture2D(u155,vec2(.5,.5));float d=a.r,j=u158*a.g,k=u159*(a.b+u160),b=a.a,g=asin(cos(b)*cos(d)),l=atan(cos(b)*sin(d),-sin(b)),m=acos(sin(c)*sin(g)+cos(c)*cos(g)*cos(i-l)),n=1.-smoothstep(u156-u157,u156+u157,m);gl_FragColor=vec4(h*(max(k,0.)+max(j,0.)*n),1.);}";F.oa("s104",{name:"_",
g:B,i:"u150 u151 u153 u152 u154 u136 u4".split(" "),precision:"highp"});F.oa("s105",{name:"_",g:q,i:"u155 u156 u157 u158 u159 u160".split(" "),precision:"highp"})},rg:function(G,z,x,H,h,f,C){F.N("u151",z,x);F.Pd("u153",H?1:0);F.N("u152",h,h/f);F.ej("u4",C);G.h(0);Z.l(!1,!1)},Lj:function(G){b.viewport(0,0,a.ta,a.ta/2);F.set("s105");G.h(0);Z.l(!1,!1)},Ol:function(){return c.Jb},wk:function(G){y.m({width:a.ta});y.zj(G,!1,1);e=!0},vk:function(){d&&c.screen.Pl()===a.Xb||(d=!1,c.screen=aa.instance({url:a.Xb,
isFloat:!1,R:function(){d=!0}}))},ig:function(G){Object.assign(a,G)},zj:function(G,z,x){var H=a.ta;va.fa();c.kd.M();F.set("s0");c.Jb.h(0);Z.l(!0,!0);c.Jb.o();F.set("s104");F.G("u154",a.xf);F.G("u136",a.um);y.rg(G,Math.PI,0,!0,90*v,G.L()/G.Y(),t);d&&(F.G("u136",a.dg),b.viewport(0,0,H/2,H/2),y.rg(c.screen,0,0,!1,2*a.Ld*v,2*a.cg,t),b.viewport(H/2,0,H/2,H/2),y.rg(c.screen,2*Math.PI,0,!1,2*a.Ld*v,2*a.cg,t));b.enable(b.BLEND);b.blendFunc(b.ONE,b.ONE);z&&y.Lj(z);F.set("s0");b.blendColor(0,0,0,1-x);b.blendFunc(b.CONSTANT_ALPHA,
b.ONE_MINUS_CONSTANT_ALPHA);c.kd.h(0);Z.l(!1,!1);b.disable(b.BLEND);p.$i(c.Jb)},v:function(){Object.assign(c,{Jb:null,kd:null,screen:null});e=d=!1;l=-1;p=null}};return y}();ta.ib=function(){var a=!1,c=!0,d=null,e=null,l={Gc:function(){ca.Z()&&(F.oa("s106",{name:"_",s:"attribute vec3 a0;uniform sampler2D u37;uniform vec2 u38;uniform vec3 u138;const float l=1.,m=0.,n=0.,E=1.;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 F=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,p);vec2 f=u81*e;vec3 c=u81*o;vec2 t=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,q).rgb+vec3(u75,0.,0.),u78,c);float u=mix(texture2D(u37,r).r,0.,u81);a.z+=u;mat3 v=s(a);vec3 w=mix(u138,u79,c);float x=mix(l,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u77,1.,u81);vec2 j=u76/t;vec3 k=a0;float A=max(0.,-a0.z-m)*n;k.x+=A*sign(a0.x)*(1.-u81);vec3 B=v*(k+w)*x+b;vec2 C=j*z;vec3 D=vec3(g*C,-j)+B*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(D,1.));}",
g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,1.,1.),gl_FragData[2]=vec4(1.,0.,0.,0.),gl_FragData[3]=vec4(0.,.5,1.,0.);}",i:["u37","u38","u74","u138"].concat(F.$e(),F.af()),I:["a0"],P:[3],ca:!0}),a=!0)},m:function(p){a&&F.j("s106",[{type:"1i",name:"u37",value:1},{type:"3f",name:"u74",value:p.Ca},{type:"1f",name:"u75",value:0},{type:"1f",name:"u83",value:1}].concat(p.Cg))},$a:function(p){e=p;d&&l.Ph()},Za:function(p){d=p;e&&l.Ph()},Ph:function(){ca.Z()&&(F.j("s106",[{type:"3f",
name:"u138",value:[d[0]*e,d[1]*e,d[2]*e]}]),F.H())},$l:function(p){for(var B=p.width/2,q=p.height/2,v=p.depth,t=p.il,y=p.height/4,G=p.Mk,z=2*G+4,x=[],H=[],h=-B+p.Pa,f=-t-p.Pa,C=B-p.Pa,I=-t-p.Pa,k=0;k<z;++k){var n=0,g=0;0===k?(n=-B,g=-t-v):1<=k&&k<=1+G?(g=(k-1)/G*Math.PI/2,n=h-Math.cos(g)*p.Pa,g=f+Math.sin(g)*p.Pa):k>=2+G&&k<=2+2*G?(g=(k-2-G)/G*Math.PI/2,n=C+Math.sin(g)*p.Pa,g=I+Math.cos(g)*p.Pa):k===z-1&&(n=B,g=-t-v);x.push(n,q+y,g,n,-q+y,g);0!==k&&H.push(2*k,2*k-2,2*k-1,2*k,2*k-1,2*k+1)}return l.instance({ha:x,
U:H})},toggle:function(p){c=p},instance:function(p){var B=Z.instance({ha:p.ha,U:p.U});return{V:function(){a&&c&&(F.set("s106"),B.bind(!0),B.V())}}}};return l}();ta.la=function(){var a={ef:-87,Tl:[85,95],Oh:[90,90],Nh:[85,70],$c:24,Nk:12,Ok:2,Wf:[-80,10],Mh:[40,140],vd:[1,8],Sl:80,vi:[-120,-10],Im:2,Rd:[0,-15],he:1024,eb:256,Ed:4,Yn:[6,30],ui:1.2};a.Ei=a.Wf;var c=!1,d=!1,e=!1,l=null,p=null,B=null,q=null,v=null,t=null,y=!1,G=!1,z=null,x=null,H=null,h=null,f=.5,C=[{type:"1f",name:"u162",value:1}],I=
null,k=null,n=null,g=null,E=null,J={Kl:function(){return{name:"_",s:"attribute vec3 a0,a2;attribute vec2 a1;varying vec2 vv0;varying float vv1;uniform sampler2D u37;uniform vec2 u38;uniform float u139;uniform vec3 u138;const float o=0.,p=0.;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 G=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,r);vec2 f=u81*e;vec3 c=u81*q;vec2 v=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,s).rgb+vec3(u75,0.,0.),u78,c);float w=mix(texture2D(u37,t).r,0.,u81);a.z+=w;mat3 h=u(a);vec3 x=mix(u138,u79,c);float y=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u77,1.,u81);vec2 k=u76/v;vec3 l=a0;float B=max(0.,-a0.z-o)*p;l.x+=B*sign(a0.x)*(1.-u81);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(E,1.)),vv0=a1,gl_Position*=vec4(-1.,1.,1.,1.);vec3 F=h*a2;vv1=-F.z;}",
g:"uniform sampler2D u169,u155;uniform vec2 u85,u170;uniform float u171,u162;varying vec2 vv0;varying float vv1;void main(){vec2 b=u170*u171+u85*vv0;vec4 a=u162*texture2D(u169,b);a.r*=step(0.,vv0.y),gl_FragColor=vec4(0.,0.,0.,a.r*vv1);}",i:"u37 u169 u155 u38 u74 u171 u170 u139 u138 u85 u162".split(" ").concat(F.$e()).concat(F.af()),I:["a0","a2","a1"],P:[3,3,2],precision:"lowp"}},Gc:function(){F.oa("s107",{name:"_",s:"attribute vec3 a0;uniform vec3 u138;uniform vec2 u163,u164;uniform float u139,u165,u166,u167;varying float vv0,vv1;void main(){vec3 a=(a0+u138)*u139;float b=atan(a.x,a.z-u165),d=2.*(a.y-u166)/(u167-u166)-1.;vv0=a0.y;float g=1.-u163.x*u163.x/(u163.y*u163.y),c=u163.x/sqrt(1.-g*pow(cos(b),2.));vec3 h=vec3(c*sin(b),a.y,c*cos(b)+u165);vv1=smoothstep(u164.x,u164.y,length(h-a)),gl_Position=vec4(b,d,0.,1.);}",
g:"uniform float u168;uniform vec4 u7;varying float vv0,vv1;void main(){float a=u7.x+u7.y*smoothstep(-u7.w,-u7.z,vv0),b=min(a,1.)*u168;gl_FragColor=vec4(b,vv1,1.,1.);}",i:"u139 u138 u163 u164 u165 u166 u167 u7 u168".split(" "),I:["a0"],P:[3],precision:"highp"});F.oa("s108",J.Kl());F.oa("s109",{name:"_",g:"uniform sampler2D u1;uniform vec2 u8;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u1,vv0-3.*u8),c=texture2D(u1,vv0-2.*u8),d=texture2D(u1,vv0-u8),f=texture2D(u1,vv0+u8),g=texture2D(u1,vv0+2.*u8),h=texture2D(u1,vv0+3.*u8);float j=.031496*b.r+.110236*c.r+.220472*d.r+.275591*a.r+.220472*f.r+.110236*g.r+.031496*h.r;vec2 i=b.gb*b.b+c.gb*c.b+d.gb*d.b+a.gb*a.b+f.gb*f.b+g.gb*g.b+h.gb*h.b;i/=b.b+c.b+d.b+a.b+f.b+g.b+h.b,gl_FragColor=vec4(mix(j,a.r,1.-i.x),i,1);}",
i:["u1","u8"],precision:"lowp"});c=!0},m:function(u){if(c){if(void 0===u.cc||!u.cc)return!1;if(d)J.Vi(u);else{q=aa.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:a.he,height:a.he/4,F:4});var m=a.eb/4,w={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:a.eb,height:m,F:4};B=aa.instance(w);t=aa.instance(w);v=aa.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:a.eb,height:m*a.Ed,F:4});m=.5-.5/u.dc[1];w=.5+.5/u.dc[1];for(var M=a.Nk+1,N=[],K=[],R=new Float32Array(16*a.$c),ea=new Uint16Array(6*
(a.$c-1)),ja=0,W=0,A=0,T=0;T<a.$c;++T){var r=2*T/(a.$c-1)-1;r=Math.sign(r)*Math.pow(Math.abs(r),a.Ok);r=Math.PI*(r+1)/2-Math.PI/2;var P=Math.sin(r),ba=Math.cos(r),Q=Math.sin(r*a.ui),Y=Math.cos(r*a.ui),oa=r/(Math.PI*u.dc[0])+.5,Ia=a.Nh[0]*P,Da=a.Ei[0],ka=a.Nh[1]*ba+a.ef,la=oa,Ba=m,V=a.Oh[0]*P,ha=a.Ei[1],ra=a.Oh[1]*ba+a.ef,Ga=w,Ja=16*T;R[Ja]=V;R[Ja+1]=ha;R[Ja+2]=ra;R[Ja+3]=Q;R[Ja+4]=0;R[Ja+5]=Y;R[Ja+6]=oa;R[Ja+7]=Ga;R[Ja+8]=Ia;R[Ja+9]=Da;R[Ja+10]=ka;R[Ja+11]=Q;R[Ja+12]=0;R[Ja+13]=Y;R[Ja+14]=la;R[Ja+
15]=Ba;0!==T&&(la=2*T,Ba=6*(T-1),ea[Ba]=la,ea[Ba+1]=la-1,ea[Ba+2]=la-2,ea[Ba+3]=la,ea[Ba+4]=la+1,ea[Ba+5]=la-1);Ba=Math.pow(.5*(1+Math.cos(Math.min(Math.max(Math.PI/a.Mh[0]*Ia,-Math.PI),Math.PI))),a.Im);Da-=a.Sl*Ba;la=a.Mh[1]*Ba;Ia-=P*a.vd[0];ka-=ba*a.vd[1];V-=P*a.vd[0];ra-=ba*a.vd[1];P=.001>Ba?2:M;for(ba=0;ba<P;++ba)Ba=ba/(P-1),oa=Da*(1-Ba)+ha*Ba,Ga=a.vi[0],Ga=Math.min(Math.max((oa-Ga)/(a.vi[1]-Ga),0),1),Ga=Ga*Ga*(3-2*Ga),N.push(Ia*(1-Ba)+V*Ba,oa,(ka+la*Math.exp(400*-Math.abs(r)*Math.pow(Ba,4)))*
(1-Ga)+ra*Ga,Q,0,Y,0,0);r=0===T?0:2<P&&2<W?P-1:1;for(Q=1;Q<=r;++Q)Y=P>W?P-2:0,K.push(ja+Q+Y,ja+Q-1,A+Q-1,A+Q-1,A+Q+(P<W?W-2:0),ja+Q+Y);W=P;A=ja;ja+=P}g=Z.instance({ha:new Float32Array(N),U:new Uint16Array(K)});E=Z.instance({ha:R,U:ea});J.Vi(u);F.j("s109",[{type:"1i",name:"u1",value:0}]);d=!0}}},Vi:function(u){f=u.Tn;h=u.Sd;I=[{type:"1i",name:"u37",value:1},{type:"1i",name:"u169",value:0},{type:"1i",name:"u155",value:2},{type:"3f",name:"u74",value:[u.Ca[0],u.Ca[1]-a.Rd[0],u.Ca[2]+a.Rd[1]]},{type:"1f",
name:"u171",value:u.Un},{type:"2f",name:"u85",value:[1,1/a.Ed]},{type:"2f",name:"u170",value:[0,1/a.Ed]},{type:"1f",name:"u162",value:1}].concat(u.Cg,u.vj);F.j("s108",I)},Zb:function(u){l=u},Yb:function(u){k=u;k.Gb(J.sc)},ei:function(){return e&&null!==k&&null!==n},sc:function(){if(!(e||G&&y)||null===k||null===n)return!1;b.viewport(0,0,a.he,a.he/4);va.fa();q.o();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);F.j("s107",[{type:"1f",name:"u165",value:a.ef},{type:"1f",name:"u166",value:a.Wf[0]},{type:"1f",
name:"u167",value:a.Wf[1]},{type:"3f",name:"u138",value:[z[0]+x[0],z[1]+x[1],z[2]+x[2]]},{type:"1f",name:"u168",value:f},{type:"2f",name:"u163",value:a.Tl},{type:"2f",name:"u164",value:a.Yn}]);k.hl();F.set("s1");var u=a.eb/4;b.viewport(0,0,a.eb,u);B.o();q.h(0);q.nd();Z.l(!0,!0);for(var m=0;m<a.Ed;++m)F.set("s109"),0!==m&&b.viewport(0,0,a.eb,u),t.o(),B.h(0),F.N("u8",1/a.eb,0),Z.l(!1,!1),B.o(),t.h(0),F.N("u8",0,1/u),Z.l(!1,!1),a.Pk&&b.colorMask(0===m,1===m,2===m,!0),F.set("s1"),v.o(),B.h(0),b.viewport(0,
m*u,a.eb,u),Z.l(!1,!1),a.Pk&&b.colorMask(!0,!0,!0,!0);return e=!0},V:function(){J.ei()&&(n.bind(!1,!1),p.o(),b.clearColor(0,0,0,0),b.enable(b.DEPTH_TEST),b.depthMask(!0),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),F.set("s108"),l.h(1),v.h(0),g.bind(!0),g.V(),E.bind(!0),E.V(),b.disable(b.DEPTH_TEST),b.depthMask(!1))},add:function(){J.ei()&&(b.enable(b.BLEND),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),p.h(0),Z.l(!1,!1),b.disable(b.BLEND))},fg:function(u,m){n=va.instance({width:u,height:m,xc:!0});p=
aa.instance({width:u,height:m,isFloat:!1,isPot:!1});J.sc()},Za:function(u,m,w){u||(u=z,m=x,w=H);F.j("s108",[{type:"3f",name:"u138",value:[w[0]+h[0],w[1]+h[1]-a.Rd[0],w[2]+h[2]+a.Rd[1]]}]);z=u;x=m;H=w;G=!0;!e&&y&&J.sc();F.H()},$a:function(u,m){F.j("s107",[{type:"1f",name:"u139",value:u}]);F.j("s108",[{type:"1f",name:"u139",value:m}]);y=!0;!e&&G&&J.sc();F.H()},jg:function(u){F.j("s108",[{type:"1f",name:"u75",value:u}]);F.H()},wb:function(u){u&&(k=u);J.sc()},kg:function(u,m){C[0].value=1-u;F.j("s108",
C);F.j("s108",m)},K:function(){},v:function(){e=d=c=!1;t=v=q=B=p=l=null}};return J}();ta.ra=function(){var a=!1,c=null,d=0,e=0,l=0,p=[{type:"1f",name:"u162",value:1}],B=null,q=null,v=null,t={Gc:function(){F.oa("s110",{name:"_",s:"attribute vec3 a0;uniform vec2 u172,u173;varying vec2 vv0;void main(){vec2 a=2.*(a0.xy-u173)/u172;gl_Position=vec4(a,0.,1.),vv0=a0.xy;}",g:"uniform vec2 u174;uniform float u175,u176,u177;varying vec2 vv0;void main(){vec2 b=vec2(sign(vv0.x)*.5*u175,u176),a=vv0-b,c=u177*a,d=(c-a)*u174;gl_FragColor=vec4(d,0.,1.);}",
i:"u172 u173 u175 u176 u177 u174".split(" "),I:["a0"],P:[3],precision:"highp"});F.oa("s111",{name:"_",s:"attribute vec3 a0;varying vec2 vv0,vv1;uniform sampler2D u37;uniform vec3 u138;uniform vec2 u38,u172,u173;uniform float u139;const float n=0.,o=0.;const vec2 e=vec2(1.);const vec3 p=vec3(1.);const vec2 F=vec2(-1.,1.),q=vec2(.16,.5),r=vec2(.5,.5),s=vec2(.84,.5);uniform mat4 u72;uniform vec3 u74,u78,u79,u80;uniform float u73,u81,u82,u75,u76,u77,u83;mat3 t(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u37,q);vec2 f=u81*e;vec3 c=u81*p;vec2 u=mix(d.a*u38,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u37,r).rgb+vec3(u75,0.,0.),u78,c);float v=mix(texture2D(u37,s).r,0.,u81);a.z+=v;mat3 w=t(a);vec3 x=mix(u138,u79,c);float y=mix(u139,u82,u81);vec3 b=mix(u74,u80,c);b.x+=u73*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 z=mat2(h,i,-i,h);b.xy=z*b.xy;float A=mix(u77,1.,u81);vec2 j=u76/u;vec3 k=a0;float B=max(0.,-a0.z-n)*o;k.x+=B*sign(a0.x)*(1.-u81);vec3 C=w*(k+x)*y+b;vec2 D=j*A;vec3 E=vec3(g*D,-j)+C*vec3(1.,-1.,-1.);gl_Position=u72*(vec4(u83*e,e)*vec4(E,1.)),gl_Position*=vec4(-1.,1.,1.,1.),vv0=vec2(.5,.5)+(a0.xy-u173)/u172,vv1=vec2(.5,.5)+.5*gl_Position.xy/gl_Position.w;}",
g:"uniform sampler2D u178,u179;uniform float u162;varying vec2 vv0,vv1;void main(){vec2 a=u162*texture2D(u178,vv0).rg;gl_FragColor=texture2D(u179,a+vv1);}",i:"u162 u37 u178 u179 u172 u173 u38 u74 u139 u138".split(" ").concat(F.$e(),F.af()),I:["a0"],P:[3],precision:"lowp"});a=!0},m:function(y){if(a){if(void 0===y.cc||!y.ad)return!1;q=aa.instance({isFloat:!0,isPot:!1,isMipmap:!1,isLinear:!1,width:256,height:128,F:4});v=va.instance({width:256,height:128});F.j("s111",[{type:"1i",name:"u37",value:1},{type:"1i",
name:"u178",value:2},{type:"1i",name:"u179",value:0},{type:"3f",name:"u74",value:y.Ca},{type:"1f",name:"u162",value:1}].concat(y.vj,y.Cg));e=y.He;l=y.Ge;d=y.Ie}},Zb:function(y){c=y},Yb:function(y){B=y;B.Gb(t.Ce)},Ce:function(){b.viewport(0,0,256,128);v.o();q.o();var y=B.Ll(),G=B.Ml(),z=[{type:"2f",name:"u172",value:[y,G]},{type:"2f",name:"u173",value:[B.sl(),B.tl()]}];F.j("s110",z.concat([{type:"1f",name:"u175",value:e},{type:"1f",name:"u176",value:l},{type:"1f",name:"u177",value:d},{type:"2f",name:"u174",
value:[1/y,-1/G]}]));B.ih();F.j("s111",z)},V:function(){F.set("s111");c.h(1);q.h(2);B.ih()},Za:function(y){F.j("s111",[{type:"3f",name:"u138",value:y}]);F.H()},$a:function(y){F.j("s111",[{type:"1f",name:"u139",value:y}]);F.H()},jg:function(y){F.j("s111",[{type:"1f",name:"u75",value:y}]);F.H()},Sn:function(y){d=y;t.Ce();F.H();sa.animate(Date.now())},wb:function(y){y&&(B=y);t.Ce()},kg:function(y,G){p.u162=1-y;F.j("s111",p);F.j("s111",G)},K:function(){}};return t}();ta.kc=function(){var a=[0,-.5],c=
!1,d=!1,e=null,l=null,p=null,B=null,q=null,v=-1,t=-1;return{Gc:function(){F.oa("s112",{name:"_",s:"attribute vec2 a0;uniform sampler2D u37;uniform vec2 u38,u5;uniform float u4;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){vec4 a=texture2D(u37,vec2(.25,.5));vec2 b=a.a*u38,c=2.*a.gb-f,d=u5+a0*u4;gl_Position=vec4(c+b*d,0.,1.),vv0=vec2(.5,.5)+.5*a0;}",g:"uniform sampler2D u180;varying vec2 vv0;void main(){gl_FragColor=texture2D(u180,vv0);}",i:["u37","u180","u38","u5","u4"],precision:"lowp"});
F.oa("s113",{name:"_",g:"uniform sampler2D u2,u181,u182;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){float a=texture2D(u2,vv0).r;vec3 b=texture2D(u182,vv0).rgb,c=texture2D(u181,vv0).rgb;gl_FragColor=vec4(mix(b,c,a*f),1.);}",i:["u2","u182","u181"],precision:"lowp"});c=!0},m:function(y){c&&(q=aa.instance({isFloat:!1,isPot:!0,url:y.ue,R:function(){d=!0}}),F.j("s112",[{type:"1i",name:"u37",value:1},{type:"1i",name:"u180",value:0},{type:"2f",name:"u38",value:y.Ej},{type:"2f",name:"u5",value:a},
{type:"1f",name:"u4",value:3.8}]),F.j("s113",[{type:"1i",name:"u181",value:0},{type:"1i",name:"u2",value:1},{type:"1i",name:"u182",value:2}]))},Zb:function(y){l=y},fg:function(y,G){var z={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:y,height:G,F:4};v=2/y;t=2/G;p=aa.instance(z);B=aa.instance(z);e=va.instance({width:y,height:G})},V:function(y,G){if(d){e.bind(!1,!0);F.set("s75");for(var z=0;2>z;++z){F.N("u8",v,0);p.o();0!==z&&B.h(0);var x=0===z&&!U.da;Z.l(x,x);F.N("u8",0,t);B.o();p.h(0);Z.l(!1,
!1)}F.set("s112");l.h(1);q.h(0);p.o();b.clearColor(1,0,0,1);b.clear(b.COLOR_BUFFER_BIT);Z.l(!1,!1);F.set("s113");G.o();B.h(0);p.h(1);y.h(2);Z.l(!1,!1)}},K:function(){}}}();var Ec=function(){var a={instance:function(c){var d=c.pi,e=c.oi,l=c.Fe,p=c.background?c.background:aa.Jh(),B=c.Ua,q={scale:1,offsetX:0,offsetY:0},v=null;c.Gf&&(q.scale=c.Gf.scale,q.offsetY=c.Gf.offsetY);return{Fh:function(){return B},yh:function(){return p},set:function(){v=cb.Cl();cb.aj(q);cb.$d();cb.ae();sa.Ui(l,p,!1,!1)},H:function(){cb.aj(v)},
Hc:function(){return{modelURL:d,materialsURLs:e,background:p.Hc(!1),Fe:l.Hc(!1),Ua:B.Hc(!0)}},Po:function(t){p.h(t)}}},Nc:function(c,d,e){function l(){if(3===++v&&d){var t=a.instance({pi:c.modelURL,oi:c.materialsURLs,background:p,Fe:B,Ua:q});d(t)}}var p=null,B=null,q=null,v=0;aa.Nc(c.background,function(t){!t&&e?e():(p=t,l())});aa.Nc(c.dataState,function(t){!t&&e?e():(B=t,l())});aa.Nc(c.light,function(t){!t&&e?e():(q=t,l())})}};return a}();return Oa||JEELIZVTO}();(function(X,wa){"function"===
typeof define&&define.amd?define(wa):"object"===typeof exports?module.exports=wa():X.ResizeSensor=wa()})("undefined"!==typeof window?window:this,function(){function X(Fa,gb){var Sa=Object.prototype.toString.call(Fa),Fb=0,Ca=Fa.length;if("[object Array]"===Sa||"[object NodeList]"===Sa||"[object HTMLCollection]"===Sa||"[object Object]"===Sa||"undefined"!==typeof jQuery&&Fa instanceof jQuery||"undefined"!==typeof Elements&&Fa instanceof Elements)for(;Fb<Ca;Fb++)gb(Fa[Fb]);else gb(Fa)}if("undefined"===
typeof window)return null;var wa=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(Fa){return window.setTimeout(Fa,20)},Ka=function(Fa,gb){function Sa(){var Ca=[];this.add=function(vb){Ca.push(vb)};var Za,nb;this.call=function(){Za=0;for(nb=Ca.length;Za<nb;Za++)Ca[Za].call()};this.remove=function(vb){var ob=[];Za=0;for(nb=Ca.length;Za<nb;Za++)Ca[Za]!==vb&&ob.push(Ca[Za]);Ca=ob};this.length=function(){return Ca.length}}function Fb(Ca,Za){if(Ca)if(Ca.resizedAttached)Ca.resizedAttached.add(Za);
else{Ca.resizedAttached=new Sa;Ca.resizedAttached.add(Za);Ca.resizeSensor=document.createElement("div");Ca.resizeSensor.className="resize-sensor";Ca.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";Ca.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>';
Ca.appendChild(Ca.resizeSensor);Ca.resizeSensor.offsetParent!==Ca&&(Ca.style.position="relative");var nb=Ca.resizeSensor.childNodes[0],vb=nb.childNodes[0],ob=Ca.resizeSensor.childNodes[1],hc,Bb,Mb,Vb,Wb=Ca.offsetWidth,Xb=Ca.offsetHeight,Yb=function(){vb.style.width="100000px";vb.style.height="100000px";nb.scrollLeft=1E5;nb.scrollTop=1E5;ob.scrollLeft=1E5;ob.scrollTop=1E5};Yb();var ic=function(){Bb=0;hc&&(Wb=Mb,Xb=Vb,Ca.resizedAttached&&Ca.resizedAttached.call())};Za=function(){Mb=Ca.offsetWidth;Vb=
Ca.offsetHeight;(hc=Mb!=Wb||Vb!=Xb)&&!Bb&&(Bb=wa(ic));Yb()};var jc=function(Zb,Ib,kc){Zb.attachEvent?Zb.attachEvent("on"+Ib,kc):Zb.addEventListener(Ib,kc)};jc(nb,"scroll",Za);jc(ob,"scroll",Za)}}X(Fa,function(Ca){Fb(Ca,gb)});this.detach=function(Ca){Ka.detach(Fa,Ca)}};Ka.detach=function(Fa,gb){X(Fa,function(Sa){if(Sa){if(Sa.resizedAttached&&"function"==typeof gb&&(Sa.resizedAttached.remove(gb),Sa.resizedAttached.length()))return;Sa.resizeSensor&&(Sa.contains(Sa.resizeSensor)&&Sa.removeChild(Sa.resizeSensor),
delete Sa.resizeSensor,delete Sa.resizedAttached)}})};return Ka});var gc={glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",appstaticURL:"https://appstatic.jeeliz.com/"},eb={notLoaded:-1,init:0,realtime:2,loadingModel:3,paused:4},Qa={isRT:!0,sku:void 0,mode:eb.notLoaded},bc=-1,cc=-1,dc=-1,ec=-1,Rc={cv:null,container:null,adjust:null,adjustNotice:null,adjustExit:null,loading:null,trackIframe:null},qa=Object.assign({},Rc),md={ADJUST_START:null,ADJUST_END:null,LOADING_START:null,LOADING_END:null},
Bc=null,Lb={enabled:!1,callback:null,interval:1E3},sc={error:!1},ac=null,Ub=null,ub={start:function(X){console.log("INFO in JeelizVTOWidget.js: start()");if(Qa.mode!==eb.notLoaded)ub.resume();else{pa();if(X.settings)for(var wa in X.settings)gc[wa]=X.settings[wa];X.NNCPath&&Oa.set_NNCPath(X.NNCPath);X.faceDetectionCallback&&(Lb.enabled=!0,Lb.callback=X.faceDetectionCallback,Lb.interval="undefined"===typeof X.faceDetectionInterval?1E3:X.faceDetectionInterval);Bc=Object.assign({},md,X.callbacks||{});
qa.container=X.placeHolder||document.getElementById("JeelizVTOWidget");if(!qa.container)throw Error("Cannot find a <div> element with id=JeelizVTOWidget to append the VTO widget.");qa.cv=X.canvas||document.getElementById("JeelizVTOWidgetCanvas");qa.cv||(qa.cv=document.createElement("canvas"),qa.container.appendChild(qa.cv));qa.loading=document.getElementById("JeelizVTOWidgetLoading");X.onError&&(sc.error=X.onError);Tb();if(!Ab(qa.container))return db("PLACEHOLDER_NULL_WIDTH"),!1;if(!ma(qa.container))return db("PLACEHOLDER_NULL_HEIGHT"),
!1;Hb();new ResizeSensor(qa.container,function(Fa){Hb()});(X.searchImageMask||X.searchImageColor||X.searchImageRotationSpeed)&&Oa.set_loading(X.searchImageMask,X.searchImageColor,X.searchImageRotationSpeed);X.callbackReady&&(Ub=X.callbackReady);Qa.mode=eb.init;wa="undefined"===typeof X.assetsPath?gc.appstaticURL+"jeefit/":X.assetsPath;"undefined"!==typeof X.catalog&&(ac=X.catalog);if(X.onWebcamGet)Oa.onWebcamGet(X.onWebcamGet);Oa.init(wa,na,Ma,qa.cv);var Ka=X.sku?X.sku:null;Oa.onHalfLoad(function(){!1===
X.isShadow&&Oa.switch_shadow(!1);ub.load(Ka)});return!0}},destroy:function(){return Oa.destroy().then(function(){Qa.mode=eb.notLoaded;Qa.sku=void 0;Ub=ac=null;Object.assign(qa,Rc)})},pause:function(X){if(!Qa.isRT)return Promise.reject();Qa.mode=eb.paused;var wa=Oa.switch_sleep(!0,X);return X?wa:Promise.resolve(wa)},resume:function(X){if(!Qa.isRT)return Promise.reject();Qa.mode=eb.realtime;var wa=Oa.switch_sleep(!1,X);return X?wa:Promise.resolve(wa)},set_videoRotation:function(X){Qa.isRT&&Oa.set_videoRotation(X)},
set_videoSizes:function(X,wa,Ka,Fa,gb,Sa){Qa.isRT&&Oa.set_videoSizes(X,wa,Ka,Fa,gb,Sa)},resize:function(){Hb()},set_scale:function(X){Oa.set_scale(X)},capture_image:function(X,wa,Ka){Oa&&Oa.ready?Oa.capture_image(X,wa,Ka,!1):wa(!1)},toggle_loading:function(X){X?(ya(qa.loading),fc("LOADING_START")):(La(qa.loading),fc("LOADING_END"))},load_modelStandalone:function(X,wa){if(!Qa.isRT)throw Error("Loading standalone models is only available in RT mode");Qa.mode===eb.paused&&ub.resume();Qa.mode=eb.loadingModel;
var Ka="undef";"string"===typeof X?(Ka=X,za(X).then(function(Fa){Oa.set_modelStandalone(Fa,wa,Ka)}).catch(Ua)):(Ka="RANDOM_SKU_"+Date.now().toString(),Oa.set_modelStandalone(X,wa,Ka));Qa.sku=Ka},load:function(X,wa){ub.toggle_loading(!0);Qa.isRT&&ub.load_RT(X,wa)},load_RT:function(X,wa){X===Qa.sku?ub.toggle_loading(!1):(Qa.sku=X,Qa.mode=eb.loadingModel,Qa.mode===eb.paused&&ub.resume(),X?ac&&ac[X]?Kb(X,ac[X],wa):za(gc.glassesDBURL+X).then(function(Ka){if(Ka.error)return Ua();Kb(X,Ka.intrinsic,wa)}).catch(Ua):
(Qa.mode=eb.realtime,ub.toggle_loading(!1),Oa.start_rendering(),wa&&wa()))},enter_adjustMode:kb,exit_adjustMode:tb,set_LUT:function(X){return Oa&&Oa.ready?Oa.set_LUT(X||null):Promise.reject("NOT_READY")}};return ub}();JEELIZVTO=JEELIZVTO;
JEELIZVTOWIDGET={VERSION:"2.3.6",start:JeelizVTOWidget.start,pause:JeelizVTOWidget.pause,resume:JeelizVTOWidget.resume,load:JeelizVTOWidget.load,load_modelStandalone:JeelizVTOWidget.load_modelStandalone,capture_image:JeelizVTOWidget.capture_image,set_videoRotation:JeelizVTOWidget.set_videoRotation,resize:JeelizVTOWidget.resize,set_scale:JeelizVTOWidget.set_scale,set_videoSizes:JeelizVTOWidget.set_videoSizes,destroy:JeelizVTOWidget.destroy,enter_adjustMode:JeelizVTOWidget.enter_adjustMode,exit_adjustMode:JeelizVTOWidget.exit_adjustMode,
set_LUT:JeelizVTOWidget.set_LUT};

export {JEELIZVTO, JEELIZVTOWIDGET};
/* eslint-enable */
