<html>
    <head>
        <title>LG</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

        <!-- 합쳐지고 최소화된 최신 CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
        <link href="./../assets/css/main.css?ver=202101063" rel="stylesheet">     

        
        <!-- 
        <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
        <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>
        -->
        <script type="module" src="./../script/model-viewer.js"></script>
        <script  src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="./../script/etc.js"></script>

<script src="https://kit.fontawesome.com/767c73f891.js" crossorigin="anonymous"></script>
    </head>
    <div class="container">
        <br />
        <div class="title" >LG Sound Bar</div>
        <div id="modelSizeDesc"></div>
        <h4 id="modelSizeDesc2"></h4>
        <h4 id="modelSizeDesc3"></h4>
        <br />
        <model-viewer id="model-viewer" 
        src="./../assets/models/PL2_Black_v02.glb" 
        ios-src="./../assets/models/PL2_Black_v02.usdz" 
        ar 
        camera-controls 
        interaction-prompt="none"
        auto-rotate
        ar-modes="scene-viewer quick-look webxr" 
        ar-scale="auto"
        autoplay
        >
            <div class="d-grid gap-2 col-1 mx-auto btnArea">
                <button type="button" class="btn btn-danger hide"  id="animationBtn" onclick="animationPlay()"> 
                    <span class="glyphicon glyphicon-off" aria-hidden="true" id="animationStatus"></span>
                      <div class="spinner-border spinner-border-sm hide" role="status" id="loadingAnimation">
                        <span class="sr-only">Loading...</span>
                      </div>
                </button>        
            </div>

            <div id="sns_popup" class="text-center hide" >
                <div class="mb-2">
                    <div class="remove_btn" onclick="document.getElementById('sns_popup').classList.add('hide');">
                    <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                    </div>

                <div class="snsTitle">Share your AR experience <br/>
                on social media with hashtags!</div>
                <div class="snsText">
                #LGHomeAppliances <br/>
                #LGWaterPurifier 
                </div>
                <br/>
                </div>
                <div class="btnHashtag">
                    <button type="button" class="btn btn-primary btn"  onclick="jsCopyLink('#LGWaterPurifier')"> Copy #Hashtag</button>        
                </div>

                <a onclick="action_app_instagram('intent://facebook.com/#Intent;package=com.facebook.katana;scheme=https;end', 'https://www.facebook.com', 'https://itunes.apple.com/kr/app/facebook/id284882215')">
                    <img src='./../assets/img/facebook.png' width = 40 alt='facebook_img'>
                  </a>

                  <a onclick="action_app_instagram('intent://instagram.com/#Intent;package=com.instagram.android;scheme=https;end', 'https://www.instagram.com', 'https://itunes.apple.com/kr/app/instagram/id389801252?mt=8')">
                    <img src='./../assets/img/instagram.png' width = 40 alt='instagram_img'>
                  </a>

                <a onclick="action_app_instagram('intent://twitter.com/#Intent;package=com.twitter.android;scheme=https;end', 'https://www.twitter.com', 'https://itunes.apple.com/kr/app/twitter/id333903271')">
                    <img src='./../assets/img/twitter.png' width = 40 alt='twitter_img'>
                  </a>
                             
            </div>
        </model-viewer>
      
        <br/>
         <div class="row">
            <div class="row">
                <div class="col-5" style="text-align : center;">
                    <div class="select_label">Model Select</div>
                </div>
                <div class="col-7">
                    <select id="selectBox" class="form-select form-select-lg mb-3" aria-label=".form-select-lg example"onchange = "selectBoxChange()">
                        <option value='{"name" :"SP11","size" : "W1443 x H63 x D146mm" ,"size2" : "W221 x H390 x D312.8mm (Subwoofer)" ,"size3" : "W130 x H211.5 x D191.2mm (Rear Speaker)"}' selected >SP11RA</option>
                        <option value='{"name" :"SP9","size" : "W1220 x H57 x D145mm" ,"size2" : "W221 x H390 x D312.8mm (Subwoofer)" ,"size3" : " "}'  >SP9</option>
                        <option value='{"name" :"SP8","size" : "W1,060 x H57 x D119mm","size2" : "W221 x H390 x D312.8mm (Subwoofer)" ,"size3" : " "}' >SP8</option>
                        <option value='{"name" :"SP7","size" : "W1,000 x H63 x D105mm","size2" : "W180 x H394 x D290mm(Subwoofer)" ,"size3" : " "}'  >SP7Y</option>
                        <option value='{"name" :"SPD7","size" : "W890 x H65 x D119mm","size2" : "W180 x H394 x D290mm(Subwoofer)" ,"size3" : " "}'  >SPD7</option>
                        <option value='{"name" :"SP2","size" : "W760 x H63 x D90mm","size2" : " " ,"size3" : " "}' >SP2</option>
                      </select>
                </div>

                <div class="col-5" style="text-align : center;" >
                    <div class="select_label">Color</div>
                </div>
                
                <div class="col-7">
                    <select id="selectColor" class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" onchange="modelChange()">
                      </select>


          </div>
        </div>
        <br />
        <div class="d-grid gap-2 col-6 mx-auto">
        <button type="button" class="btn btn-primary btn-lg" id="my-own-custom-button" onclick="activateAR_click()"> View in your space </button>        
        </div>
        <br/>    <br/>
        <div class="viewother" onClick="window.location.href='/'">
            <a href="http://lgvirtualstudio-HE.com/ar/sound"></span> View Other Products </a>
            </div>
    </div>
    
    <script>
        const ColorData = [
            {name : 'SP11', color :[ "Black"], ProductName : 'LG Sound Bar'},
            {name : 'SP9', color :[  "Black"], ProductName : 'LG Sound Bar'},
            {name : 'SP8', color :[ "Black"], ProductName : 'LG Sound Bar'},
            {name : 'SP7', color :[ "Black"], ProductName : 'LG Sound Bar'},
            {name : 'SPD7', color :[ "Black"], ProductName : 'LG Sound Bar'},
            {name : 'SP2', color :[ "Dark Gray","Light Gray" ], ProductName : 'LG Sound Bar'},

        ];

        function getDirName(name) {
            if (name.indexOf('SP11') != -1)
                return './../assets/models/AV/LG Sound Bar/SP11R/';
            else if (name.indexOf('SP9') != -1)
                return './../assets/models/AV/LG Sound Bar/SP9/';
            else if (name.indexOf('SP8') != -1)
                return './../assets/models/AV/LG Sound Bar/SP8/';
            else if (name.indexOf('SP7') != -1)
                return './../assets/models/AV/LG Sound Bar/SP7/';
            else if (name.indexOf('SPD7') != -1)
                return './../assets/models/AV/LG Sound Bar/SPD7/';
            else if (name.indexOf('SP2') != -1)
                return './../assets/models/AV/LG Sound Bar/SP2/';

            else   
                return 'error';
        }
        function selectBoxChange() {
        
            var selectedValue = $("#selectBox option:selected").val();
            var selectedModel = JSON.parse(selectedValue).name;

            colorArray = ColorData.find(x => { return x.name == selectedModel})
            if (colorArray == undefined) return;
            
            $('#productName').html(colorArray.ProductName);
            $("select[id='selectColor'] option").remove(); 

            colorArray.color.forEach(
                function(item,index,arr2){
                    $("#selectColor").append('<option value="' + item + '">' + item + '</option');
                    })

            $('#selectColor option:eq(0)').attr('selected', 'selected');

            modelChange();
        }


        function modelChange() {

            var selectBox = document.getElementById("selectBox");
            var selecrArray = selectBox.options[selectBox.selectedIndex].value;
            
            var selectedModel = JSON.parse(selecrArray).name;
            var selectedValue;

            if (selectedModel == 'SP2')
                selectedValue = selectedModel + '_' + $("#selectColor option:selected").val();
            else
                selectedValue = selectedModel;

            var size  = JSON.parse(selecrArray);
            $("#modelSizeDesc").html(size.size);
            $("#modelSizeDesc2").html(size.size2);
            $("#modelSizeDesc3").html(size.size3);

            var modelViewer = document.querySelector("model-viewer")
            const base = getDirName(selectedValue) + selectedValue;
            modelViewer.src = base + '.glb';
            modelViewer.iosSrc = base + '.usdz';

            if (selectedValue.indexOf('Wall') != -1)
            {
                modelViewer.arPlacement = 'wall'
            }
            else
            {
                modelViewer.arPlacement = 'floor'
            }
            
            modelViewer.resetTurntableRotation();
        }

        function activateAR_click() {
            var modelViewer = document.getElementById('model-viewer');
            modelViewer.activateAR();
        }
     
        function init(){
            
            var selectedValue = $("#selectBox option:selected").val();
            var selectedModel = JSON.parse(selectedValue).name;

            colorArray = ColorData.find(x => { return x.name == selectedModel})
            if (colorArray == undefined) return;

            $("select[id='selectColor'] option").remove(); 

            colorArray.color.forEach(
                function(item,index,arr2){
                    $("#selectColor").append('<option value="' + item + '">' + item + '</option');
                    })

            $('#selectColor option:eq(1)').attr('selected', 'selected');
            
            var selectBox = document.getElementById("selectBox");
            var selecrArray = selectBox.options[selectBox.selectedIndex].value;
            
            var selectedModel = JSON.parse(selecrArray).name;

            if (selectedModel == 'SP2')
                selectedValue = selectedModel + '_' + $("#selectColor option:selected").val();
            else
                selectedValue = selectedModel;

            var size  = JSON.parse(selecrArray);
            $("#modelSizeDesc").html(size.size);
            $("#modelSizeDesc2").html(size.size2);
            $("#modelSizeDesc3").html(size.size3);

            var animationBtn = document.getElementById("animationBtn");
            if (selectedValue == 'RollableTVClipAnimation') 
            {
                animationBtn.classList.remove('hide')
            }
            else
            {
                animationBtn.classList.add('hide')
            }

            var modelViewer = document.querySelector("model-viewer")
            const base = getDirName(selectedValue) + selectedValue;
            modelViewer.src = base + '.glb';
            modelViewer.iosSrc = base + '.usdz';
            if (selectedValue.indexOf('Wall') != -1)
            {
                modelViewer.arPlacement = 'wall'
            }
            else
            {
                modelViewer.arPlacement = 'floor'
            }
            
        }

        init();    
    </script>
</html>


